---
title: gajus/eslint-plugin-jsdocã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ Part 1
---

Oxcã«JSDocã®ã‚µãƒãƒ¼ãƒˆã‚’å…¥ã‚Œã‚‹ã¹ãã€ã“ã®ã¸ã‚“ã‚’ã‚ˆãèª¿æŸ»ã—ã¦ã‚‹ä»Šæ—¥ã“ã®é ƒã€‚èã„ã¦ã¯ã„ãŸã‘ã©ã€å™‚ã«é•ã‚ã¬é­”å¢ƒã§ã‚ã£ãŸã€‚

ã¨ã„ã†ã‚ã‘ã§ã€ã›ã£ã‹ãèª¿æŸ»ã—ãŸã®ã§ãã®ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¦ãŠãã€‚

## ä¸€å£ã«JSDocã¨ã„ã£ã¦ã‚‚

ã±ã£ã¨æ€ã„ã¤ãã®ã¯ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œã‚Œã‚‹ã‚¢ãƒ¬ã§ã¯ã‚ã‚‹ã‘ã©ã€æ˜¨ä»Šã¯ã‚‚ã£ã¨ã„ã‚ã‚“ãªä½¿ã‚ã‚Œæ–¹ã‚’ã—ã¦ã‚‹ã€‚

```js
/**
 * JSDoc example.
 * @param {string} x X!
 * @returns {string}
 */
const dummy = (x) => {
  return `${x}!`;
};
```

ãã—ã¦ã¿ã‚“ãªä¼¼ãŸç›®çš„ï¼ˆå¤§ã¾ã‹ã«ï¼‰ã®ãŸã‚ã«ã€å¾®å¦™ã«é•ã†ã“ã¨ã‚’ã‚„ã£ã¦ã‚‹ã€‚

- TypeScript(JSDoc TS)
  - ESTreeã¨ã¯é•ã£ãŸç‹¬è‡ªã®ASTã§æ‰±ã†
  - https://github.com/microsoft/TypeScript/blob/d04e3489b0d8e6bc9a8a9396a633632a5a467328/src/compiler/types.ts#L40
    - EndOfFileã¨ã„ã†ãƒˆãƒ¼ã‚¯ãƒ³ã‚‚ã‚ã‚‹
    - JSDocã‚‚ASTã®ä¸­ã§å®šç¾©ã•ã‚Œã¦ã‚‹
- jsdoc.app
  - `@babel/parser` = ESTreeã‚’ä½¿ã£ã¦ã‚‹
  - https://github.com/jsdoc/jsdoc/blob/3c68ce426711d9bd05dfe33f9c00f15a5bf9bde6/packages/jsdoc-ast/lib/ast-builder.js#L17
  - ç‹¬è‡ªã®walker/visitorã‚’å®Ÿè£…ã—ã¦ãŒã‚“ã°ã£ã¦ã‚‹
- eslint-plugin-jsdoc
  - ESLintã®ASTã€ã¤ã¾ã‚Š`espree(acorn)` = ESTreeã‚’ä½¿ã£ã¦ã‚‹
  - å®Ÿè£…ãŒã©ã†ãªã£ã¦ã‚‹ã‹ã¯ã€ä»Šã‹ã‚‰èª­ã¿è§£ã„ã¦ã
- etc...

å…±é€šã®SpecãŒã‚ã‚‹ã‚ã‘ã§ã‚‚ã€å…±é€šã®å®Ÿè£…ãŒã‚ã‚‹ã‚ã‘ã§ã‚‚ãªã„ã£ã¦ã®ãŒãƒã‚¤ãƒ³ãƒˆã€‚

è‚²ã£ã¦ããŸç’°å¢ƒãŒé•ã†ã‹ã‚‰ã€œã£ã¦æ„Ÿã˜ã§ã€ã¾ããã‚Œã¯ãã‚Œã§ã„ã„ã¨ã—ã¦ã‚‚ã€ã©ã‚Œã‚‚ã„ã‚ã‚“ãªæ–¹å‘æ€§ã§èª­ã‚€ã®ãŒå¤§å¤‰ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ä»•ä¸ŠãŒã£ã¦ã‚‹ã€‚

## eslint-plugin-jsdocã®ãƒ«ãƒ¼ãƒ«

> gajus/eslint-plugin-jsdoc
> https://github.com/gajus/eslint-plugin-jsdoc

æœ€åˆã«æ¦‚è¦³ã‚’çŸ¥ã£ã¦ãŠããŸãã€ã©ã†ã„ã†ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ã®ã‹ã‚‚ã–ã£ã¨è¦‹ã¦ãŠãã€‚

ã©ã†ã‚„ã‚‰ã»ã¼ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ«ãŒ`iterateJsdoc()`ã¨ã„ã†é«˜éšé–¢æ•°ã‚’ä»‹ã—ã¦ãŸã®ã§ã€ç‰¹æ®Šãã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®šã«ã¤ã„ã¦ã‚‚ãƒ¡ãƒ¢ã—ã¦ãŠãã€‚

æ•°ãŒå¤šã„ã®ã§ã€ã¨ã‚Šã‚ãˆãšrecommendedãªãƒ«ãƒ¼ãƒ«ã®ã¿ã€‚

- check-access: `checkPrivate`, `iterateAllJsdocs`
  - `@access`ã«æ­£ã—ã„å€¤ãŒå…¥ã£ã¦ã‚‹ã‹ã€`@private`ãªã©ãŒä½µç”¨ã•ã‚Œã¦ãªã„ã‹é‡è¤‡ã—ã¦ãªã„ã‹
- check-alignment: `iterateAllJsdocs`
  - ã‚³ãƒ¡ãƒ³ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã®`*`ã®ä½ç½®ãŒæƒã£ã¦ã„ã‚‹ã‹
- check-param-names
  - `@param`ã§å®šç¾©ã—ãŸå¼•æ•°ãŒã€ã¡ã‚ƒã‚“ã¨å®Ÿè£…ã«ã‚ã‚‹ã‹
- check-property-names: `iterateAllJsdocs`
  - `@property`ã§å­˜åœ¨ã—ãªã„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡ã—ã¦ãªã„ã‹ï¼ˆ`foo`ãªã—ã§`foo.bar`ã£ã¦æ›¸ã„ã¦ã‚‹ã¨ã‹ï¼‰
- check-tag-names: `iterateAllJsdocs`
  - `@xxx`ã®ã‚¿ã‚°åãŒæ—¢å®šã®å€¤ã«ãªã£ã¦ã‚‹ã‹ã©ã†ã‹
- check-types: `iterateAllJsdocs`
  - `{string}`ã®ã‚ˆã†ã«å‹ã‚’æŒ‡å®šã™ã‚‹éƒ¨åˆ†ã®æŒ‡å®šãŒã€è¦å®šã®æ–‡å­—åˆ—ã«ãªã£ã¦ã„ã‚‹ã‹ï¼ˆ`String`ã¨ã—ã¦ã„ãªã„ã‹ï¼‰
- check-values: `iterateAllJsdocs`
  - ç‰¹å®šã®ã‚¿ã‚°ã«å¯¾ã—ã¦ã€æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆ`version`ã¯`semver`æº–æ‹ ã‹ã©ã†ã‹ãªã©ï¼‰ãŒæŒ‡å®šã•ã‚Œã¦ã‚‹ã‹
- empty-tags: `checkInternal`, `checkPrivate`, `iterateAllJsdocs`
  - ç‰¹å®šã®ã‚¿ã‚°ã«å¯¾ã—ã¦ã€ç©ºå€¤ã«ãªã£ã¦ã‚‹ã‹ã©ã†ã‹
- implements-on-classes: `contextDefaults`
  - `@implements`ãŒæ­£ã—ã„æ¡ä»¶ä¸‹ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹
- multiline-blocks: `iterateAllJsdocs`
  - ã‚³ãƒ¡ãƒ³ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆè¤‡æ•°è¡Œ or è¡Œãªã©ï¼‰ã‚’å¼·åˆ¶ã§ãã‚‹
- no-multi-asterisks: `iterateAllJsdocs`
  - ã‚³ãƒ¡ãƒ³ãƒˆãƒ–ãƒ­ãƒƒã‚¯ä¸­ã®å„è¡Œã«ãŠã„ã¦ã€`*`ãŒè¤‡æ•°ç™»å ´ã—ãªã„ã‚ˆã†ã«ã§ãã‚‹
- no-undefined-types: `iterateAllJsdocs`
  - `{}`ã§æŒ‡å®šã•ã‚ŒãŸå‹ãŒã‚¹ã‚³ãƒ¼ãƒ—å†…ã«å­˜åœ¨ã—ã€`undefined`ã«ãªã£ã¦ãªã„ã‹
- require-jsdoc
  - JSDocã®è¨˜è¿°ã‚’å¼·åˆ¶ã™ã‚‹
  - âš ï¸ ã“ã®ãƒ«ãƒ¼ãƒ«ã ã‘ã¯`iterateJsdoc()`ã§ã¯ãªãã€ç‹¬è‡ªã§Visitorã‚’ç”¨æ„
- require-param: `contextDefaults`, `noTracking`
  - é–¢æ•°ã®å¼•æ•°ãŒã™ã¹ã¦`@param`ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
- require-param-description: `contextDefaults`
  - `@param`ã«èª¬æ˜æ–‡ãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-param-name: `contextDefaults`
  - `@param`ã«åå‰ãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-param-type: `contextDefaults`
  - `@param`ã«å‹ã®æŒ‡å®šãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-property: `iterateAllJsdocs`
  - `@typedef`ã¨`@namespace`ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå®šç¾©ã•ã‚Œã‚‹ã¨ãã€`@property`ãŒã‚»ãƒƒãƒˆã«ãªã£ã¦ã„ã‚‹ã‹ã©ã†ã‹
- require-property-description: `iterateAllJsdocs`
  - `@property`ã«èª¬æ˜æ–‡ãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-property-name: `iterateAllJsdocs`
  - `@property`ã«åå‰ãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-property-type: `iterateAllJsdocs`
  - `@property`ã«å‹ã®æŒ‡å®šãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-returns: `contextDefaults`
  - `@returns`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
- require-returns-check
  - `@returns`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ãã€`return`ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹
- require-returns-description: `contextDefaults`
  - `undefined|void`ã‚’å«ã¾ãªã„`@returns`ã«èª¬æ˜æ–‡ãŒã¤ã„ã¦ã‚‹ã‹
- require-returns-type: `contextDefaults`
  - `@returns`ã«æ–¹ã®æŒ‡å®šãŒã¤ã„ã¦ã„ã‚‹ã‹
- require-yields: `contextDefaults`
  - ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿é–¢æ•°ã«`@yields`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
- require-yields-check
  - `@yields`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ãã€`yield`ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã‹
- tag-lines: `iterateAllJsdocs`
  - JSDocã‚³ãƒ¡ãƒ³ãƒˆå†…ã®ç©ºè¡Œã®ç½®ãæ–¹ã‚’å¼·åˆ¶ã§ãã‚‹
- valid-types: `iterateAllJsdocs`
  - `{}`ã®å‹æŒ‡å®šãŒã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãªã„ã‹

ç´°ã‹ãå½¹å‰²ãŒåˆ†ã‹ã‚ŒãŸã‚·ãƒ³ãƒ—ãƒ«ãªãƒ«ãƒ¼ãƒ«ã‚‚ã‚ã‚Œã°ã€ã¨ã¦ã‚‚é‡åšãªå®Ÿè£…ã®ã‚ã‚‹ãƒ«ãƒ¼ãƒ«ã‚‚ã‚ã‚‹ã€‚å½¹å‰²ãŒè¢«ã£ã¦ãªã„ï¼Ÿä½•ãŒé•ã†ã®ï¼Ÿã£ã¦ã„ã†ã®ã‚‚ã‚ã‚‹ã€‚

recommendedã§ã¯ãªã„ã‚‚ã®ã¯ä¸€æ—¦è¿½ã‚ãšã«ç½®ã„ã¦ãŠããƒ»ãƒ»ãƒ»ã€‚

- check-examples
- check-indentation
- check-line-alignment
- check-syntax
- informative-docs
- match-description
- no-bad-blocks
- no-blank-block-descriptions
- no-defaults
- no-missing-syntax
- no-restricted-syntax
- no-types
- require-asterisk-prefix
- require-description
- require-description-complete-sentence
- require-example
- require-file-overview
- require-hyphen-before-param-description
- require-throws
- sort-tags

## å®Ÿè£…ã®Overview

- å„ãƒ«ãƒ¼ãƒ«ã¯ã€`iterateJsdoc(ruleIter, ruleConfig)`ã¨ã„ã†utilsãŒèµ·ç‚¹
  - `ruleConfig`ã®`iterateAllJsdocs`ãªã©ã®æŒ‡å®šã§ã€ãã®æŒ™å‹•ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
  - ï¼ˆæŒ‡å®šæ¼ã‚Œã¦ãªã„ï¼Ÿã£ã¦ã®ã‚‚ã‚ã‚‹ï¼‰ï¼ˆãã‚‚ãã‚‚é–¢æ•°åˆ†ã‘ã‚ã¨ã„ã†æ°—æŒã¡ï¼‰
- utilsã‚’åä¹—ã‚‹ã‚³ãƒ¼ãƒ‰ãŒã€ã‚ã‚ã›ã¦4000è¡Œãã‚‰ã„ã‚ã‚‹ğŸ˜‡
  - JSDocãŒçµæ§‹æ›¸ã‹ã‚Œã¦ã‚‹ã›ã„ã§ã‚‚ã‚ã‚‹ã‘ã©ã€ãã‚Œã§ã‚‚ã‚ˆãƒ»ãƒ»ãƒ»
  - å‹•çš„ã«æ–‡å­—åˆ—ã‹ã‚‰çµ„ã¿ä¸Šã’ãŸã‚Šã€ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã ã‚‰ã‘ã ã£ãŸã‚Šè¿½ã†ã®ãŒè¾›ã„
  - å„ãƒ«ãƒ¼ãƒ«ã¯ã€ã“ã®utilsã‚’ãŸã£ã·ã‚Šä½¿ã£ã¦å®Ÿè£…ã—ã¦ã‚‹
- è‚å¿ƒã®JSDocã‚³ãƒ¡ãƒ³ãƒˆã‚’æ¢ã—å‡ºã™éƒ¨åˆ†ã¯åˆ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ãªã£ã¦ã‚‹
  - https://github.com/es-joy/jsdoccomment
- `jsdoccomment`ã¯ã€æ¬¡ã®2ã¤ã«å¼·ãä¾å­˜ã—ã¦ã‚‹
  - https://github.com/syavorsky/comment-parser
  - https://github.com/jsdoc-type-pratt-parser/jsdoc-type-pratt-parser
- `eslint-plugin-jsdoc`æœ¬ä½“ã‚‚ã€ã“ã®2ã¤ã«ã¯ä¾å­˜ã—ã¦ã‚‹
  - ä»–ã«ã‚‚ã„ã‚ã‚“ãªã‚‚ã®ã«ä¾å­˜ã—ã¦ã‚‹
  - https://github.com/gajus/eslint-plugin-jsdoc/blob/ab893bae6aa5f05228390cb3ce4487485360cba8/package.json#L7-L17

ã¨ã„ã†å‰æã‚’è¸ã¾ãˆã¤ã¤ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ã„ãå¿…è¦ãŒã‚ã‚‹ã€‚

## ç¶šã

å…¥å£ã‹ã‚‰ã—ã¦ã‚ããªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚‚ãªã„ã¨ã“ã‹ã‚‰å¯Ÿã™ã‚‹ã«ã€èª­ã‚€ã®ã«é›£å„€ã—ãã†ã§ã‚ã‚‹ãªã‚ã€‚

> https://github.com/gajus/eslint-plugin-jsdoc/blob/37df54dc8535eaed65b4dadaca2dc072e4c7bc4e/test/iterateJsdoc.js

ç¶šãã€‚
