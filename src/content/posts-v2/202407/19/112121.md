---
title: æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«ã¤ã„ã¦ã®ã–ã£ãã‚Šã¾ã¨ã‚
---

å€‹äººçš„ãªç†è§£ãªã®ã§ã€èª¤è§£ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãƒ»ãƒ»ãƒ»ã®ã§ã€é–“é•ã£ã¦ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ã€‚

## æ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿

æ—¥å¸¸çš„ã«ã€Œæ–‡å­—ã€ã¨ã—ã¦èªè­˜ã—ã¦ã‚‹ã§ã‚ã‚ã†ã‚‚ã®ã€‚

ä¸€èˆ¬çš„ãªã‚¨ãƒ‡ã‚£ã‚¿ã§ã‚«ãƒ¼ã‚½ãƒ«ãŒå‹•ãå˜ä½ã§ã‚ã‚Šã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ–‡å­—å˜ä½ã§ä½•ã‹ã‚’æ‰±ã„ãŸã„ã¨ãã¯ã€ç›´æ„Ÿçš„ã«ã“ã‚Œã§è€ƒãˆãŸããªã‚‹ã€‚

ãŒã€ã“ã¨ã¯ãã†ç°¡å˜ã§ã¯ãªã„ã€‚

## Unicodeæ–‡å­—

ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆæ•´æ•°å€¤ï¼‰ã«ãƒžãƒƒãƒ—ã•ã‚ŒãŸæ–‡å­—ã®é›†åˆã§ã‚ã‚Šã€ä¸»ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ‰±ã†ã“ã¨ã«ãªã‚‹ã®ã¯ã“ã£ã¡ã€‚

ãŸã¨ãˆã°ã€

- `a`ã¯`0x61`
- `ðŸ‘»`ã¯`0x1f47b`

ã¨ã„ã†ã‚ˆã†ã«æ±ºã¾ã£ã¦ã‚‹ã€‚Unicodeã«ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã„ã‚ã„ã‚ã‚ã‚‹ã‚‰ã—ã„ã€‚

æ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ã‚ˆã‚Šã‚‚ç´°ã‹ã„ç²’åº¦ã«ãªã£ã¦ã‚‹ã¨ã“ã‚ãŒé‡è¦ã§ã€ãŸã¨ãˆã°ã€`ðŸ‡¯ðŸ‡µ`ã‚„`ðŸ‘ˆðŸ»`ã‚„`ðŸ§‘â€ðŸ§‘â€ðŸ§’`ã¿ãŸã„ãªã®ã¯ã€å®Ÿã¯è¤‡æ•°ã®Unicodeæ–‡å­—ã®ä¸¦ã³ã§ã§ãã¦ã‚‹ã€‚
ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§è¡¨ç¤ºã™ã‚‹ã¨1æ›¸è¨˜ç´ ã«è¦‹ãˆã¦ã‚‹ã‘ã©ã€ä»Šã“ã®Nvimã§è¨˜äº‹ã‚’æ›¸ã„ã¦ã‚‹ã¨ãã¯ã€è¤‡æ•°ã®UnicodeãŒä¸¦ã‚“ã§ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã‚‹ã€‚ï¼‰

ãªã‚“ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæŒ¯ã‚‰ã‚Œã¦ãªã„ã®ã‹ï¼Ÿã¯ã€ãã®ã»ã†ãŒæŸ”è»Ÿã ã‹ã‚‰ã¨ã®ã“ã¨ã€‚æŒ‡å·®ã—çµµæ–‡å­—ãŒå¢—ãˆã‚‹ãŸã³ã«ã€ã‚¹ã‚­ãƒ³ãƒˆãƒ¼ãƒ³ã®æ•°ã ã‘æž ã‚’å®šç¾©ã™ã‚‹å¿…è¦ã‚ã‚‹ï¼Ÿã¿ãŸã„ãªã€‚

ãã†ã„ã†ã‚ã‘ã§ã€UnicodeåŒå£«ã‚’ãã£ã¤ã‘ãŸã‚Šã€é€†ã«HTMLã®`wbr`è¦ç´ ã¿ãŸãéžæŽ¥åˆã‚’è¡¨ã™Unicodeæ–‡å­—ãªã‚“ã‹ã‚‚ã‚ã‚‹ã¨ã®ã“ã¨ã€‚

## ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

ã“ã®Unicodeã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¸Šã§ã€ãƒ¡ãƒ¢ãƒªã¨ã—ã¦ã€ã©ã†ã„ã†å˜ä½ã§è¡¨ç¾ã™ã‚‹ã‹ã€‚

- UTF-8
- UTF-16
- UTF-32

æ¦‚ã­ã“ã®3ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒä½¿ã‚ã‚Œã‚‹ã¨ã®ã“ã¨ã€‚

### UTF-8

1ã¤ã®Unicodeæ–‡å­—ã‚’ã€8bitã§1ã¤ã‹ã‚‰4ã¤ã¾ã§ã®å¯å¤‰å¹…ã®ãƒ¦ãƒ‹ãƒƒãƒˆã¨ã—ã¦æ‰±ã†ã€‚

ASCIIã®ã‚ˆã†ãªã‚‚ã®ãªã‚‰1byteã§è¶³ã‚Šã‚‹ã—ã€ç‰¹æ®Šãªçµµæ–‡å­—ãªã‚“ã‹ã¯4byteã¾ã§ä½¿ã†ã€‚

Rustã®`&str`ã¯`u8`ã®ä¸¦ã³ãªã®ã§ã€ã“ã®æ–¹å¼ã€‚

### UTF-16

JavaScriptã¯ã“ã£ã¡ã€‚

ã“ã¡ã‚‰ã‚‚å¯å¤‰å¹…ã§ã¯ã‚ã‚‹ãŒã€1ã¤ã®Unicodeæ–‡å­—ã‚’ã€16bitã§1ã¤ã‹2ã¤ã®ãƒ¦ãƒ‹ãƒƒãƒˆã§æ‰±ã†ã€‚

2ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆHigh + Lowï¼‰ã§è¡¨ç¾ã™ã‚‹ã¨ãã€ãã‚Œã‚‰ã¯ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã¨å‘¼ã°ã‚Œã€ã“ã‚Œã¯UTF-16ãªã‚‰ã§ã¯ã®æ¦‚å¿µã€‚

å˜ä¸€ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’2ã¤ã«å‰²ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã—ã€2ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆã‹ã‚‰ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«åˆç®—ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚

### UTF-32

ã™ã¹ã¦ã‚’32bitã€ã¤ã¾ã‚Š4byteã§æ‰±ã†ã€‚ï¼ˆãŸã ã—Unicodeã¯21bitã¾ã§ã—ã‹ä½¿ã‚ãªã„ã‚‰ã—ã„ã‘ã©ï¼‰

ãã®ãŸã‚ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã‚µã‚¤ã‚ºãŒè‚¥å¤§åŒ–ã—ãŒã¡ã§ã€è¦‹ãˆã‚‹ã¨ã“ã‚ã§ä½¿ã‚ã‚Œã‚‹ã“ã¨ã¯ã‚ã¾ã‚Šãªã„ã¨ã®ã“ã¨ã€‚

ã¡ãªã¿ã«Rustã§`.chars()`ã™ã‚‹ã¨ã€`u8`ã ã£ãŸãƒã‚¤ãƒˆåˆ—ã‚’ã„ã„æ„Ÿã˜ã«ã€`u32`ã§ã‚‚ã‚ã‚‹`char`ã«ã—ã¦ãã‚Œã¦ã€Unicodeæ–‡å­—ã®å˜ä½ã§æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ä¾¿åˆ©ã€‚

## ã¾ã¨ã‚

ã¨ã„ã†ã“ã¨ã‚’èª¬æ˜Žã—ãŸå›³ãŒWikipediaã«ã‚ã£ãŸã€‚

```
+------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|      | 00 | 01 | 02 | 03 | 04 | 05 | 06 | 07 | 08 | 09 | 0A | 0B | 0C | 0D | 0E | 0F |
+------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|UTF-8 | A  |    Î©    |      èªž      |        ðŸ˜Š         |
|      | 41 | CE | A9 | E8 | AA | 9E | F0 | 9F | 98 | 8A |
+------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|UTF-16|    A    |    Î©    |    èªž   |         ðŸ˜Š        |
|      |   0041  |   03A9  |   8A9E  |  D83D   |   DE0A  |
+------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|UTF-32|         A         |         Î©         |         èªž        |         ðŸ˜Š        |
|      |     00000041      |      000003A9     |      00008A9E     |      0001F60A     |
+------+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
```

> Unicode - Wikipedia
> https://ja.wikipedia.org/wiki/Unicode#%E6%96%87%E5%AD%97%E7%AC%A6%E5%8F%B7%E5%8C%96%E5%BD%A2%E5%BC%8F

æ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ã®å˜ä½ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰æ‰±ã†ã«ã¯ã€ä¸€æ‰‹é–“ãŒå¿…è¦ã€‚

JavaScriptãªã‚‰`Intl.Segmenter`ã‚’ä»‹ã—ãŸã‚Šã€‚

> Intl.Segmenter - JavaScript | MDN
> https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter
