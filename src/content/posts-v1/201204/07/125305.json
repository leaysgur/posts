{
  "title": "VPSへssh接続できない時にチェックしたい5つ",
  "html": "<p>やっぱ久しぶりにやると何かしらミスるわけで。<br />\nちょっと時間を食ってしまったので、そのメモを。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>sshd_config記述ミス</h3>\n    \n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>vi /etc/ssh/sshd_config</pre>\n<p>ssh_configじゃなくて、sshd_configですので・・。<br />\nだいたいの修正内容は以下です。</p>\n\n<ul>\n<li>ポート番号</li>\n<li>鍵認証の採用</li>\n<li>rootログインの拒否</li>\n<li>空パスワードの拒否</li>\n<li>パスワードログインの拒否</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h3>chmodしてない</h3>\n    <p>ローカルのマシンから公開鍵を持ってきたは良いものの、権限設定してませんでした。<br />\nそりゃあダメです。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>chmod 700 ~/.ssh\nchmod 600 ~/.ssh/authorized_keys</pre>\n\n</div>\n<div class=\"section\">\n    <h3>sshdが止まってる</h3>\n    \n<div class=\"section\">\n    <h4>そもそも止まってる</h4>\n    <p>そりゃあかんわね。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>/etc/init.d/sshd start</pre>\n<p>OS起動時に起きてこないのなら、そっちも。</p>\n\n</div>\n<div class=\"section\">\n    <h4>再起動してない</h4>\n    <p>sshd_configを修正したら、sshdを再起動する必要があります。<br />\n再起動してないと、何も反映されません！</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>/etc/init.d/sshd restart</pre>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>実はid_rsa.pubじゃない</h3>\n    <p>id_rsa:秘密鍵<br />\nid_rsa.pub:公開鍵</p><p>秘密鍵はローカルマシンにそっと留めます。<br />\n公開鍵をサーバーにアップして、authorized_keysとして使います。</p>\n\n    <blockquote>\n        <p>今回VPSの移行でこの作業をしてるのですが、ローカルで新たに鍵を生成する必要はありません。<br />\n既に作成済みの公開鍵を、新サーバーに移してやるだけでOKです。<br />\n旧サーバーにも、新サーバーにも、1ペアの鍵で接続できるようになります。</p><p>まぁ、考えてみれば当たり前なんですけどね・・。</p>\n\n    </blockquote>\n\n</div>\n<div class=\"section\">\n    <h3>それでもダメなら</h3>\n    <p>そんな場合はあれです、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Google\">Google</a>です。</p>\n\n</div>\n</div>"
}
