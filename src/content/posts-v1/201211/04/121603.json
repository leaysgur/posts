{
  "title": "画像ボタンでよく使うinput type=\"image\" と \"submit\"の違い",
  "html": "<p>画像ボタンでformを送信するには、だいたい以下のパターンが考えられると思います。</p><p></p>\n\n<ul>\n<li>type=\"submit\"と<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a>のbackground-image</li>\n<li>type=\"image\"</li>\n<li>img要素で<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a>から送信</li>\n<li>その他要素と<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a>のbackground-imageで<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a>から送信</li>\n</ul><p><br />\n下2つはもはやなんでもありなので置いておくとして、今回のメインはinput要素のsubmitとimageについて。<br />\ninput要素のtype=\"image\"は、画像ボタンが設定できるtype=\"submit\"の上位互換！とか思ってた時期が私にもありました。</p><p>実際は、ちょっと挙動が違うんですね。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>type=\"submit\" と type=\"image\"で画像ボタンを作る場合</h3>\n    <p>その他指定はあると思いますが、これら要素に対して指定しそうなものと、その組み合わせ。</p>\n\n<div class=\"section\">\n    <h4>type=\"submit\"</h4>\n    \n<table>\n    <tr>\n    <th>value -></th>\n    <th>指定あり</th>\n    <th>半角スペース</th>\n    <th>指定なし(=空)</th>\n    </tr>\n    <tr>\n    <td>パラメータ</td>\n    <td>○</td>\n    <td>○</td>\n    <td>○</td>\n    </tr>\n    <tr>\n    <td>見た目</td>\n    <td>×</td>\n    <td>○</td>\n    <td>○</td>\n    </tr>\n</table><p>画像じゃないボタンの場合は、valueに設定した値がラベルとして表示されますよね。<br />\nただ画像を<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a>であてる場合は、文字が邪魔になります。<br />\n画像の上に文字が出ちゃうので、×。</p><p>name=\"submit\"のパラメータが必要な場合は、</p>\n\n<ul>\n<li>素直にtype=\"hidden\"を利用する。</li>\n<li>text-indent: -9999pxとか、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a>で文字を隠すようにする。</li>\n<li>value=\"\" or value=\" \" とする。　←　空か半角スペース＝どちらも見えない</li>\n</ul><p>そうすれば安心。</p>\n\n</div>\n<div class=\"section\">\n    <h4>type=\"image\"</h4>\n    \n<table>\n    <tr>\n    <th>value -></th>\n    <th>指定あり</th>\n    <th>半角スペース</th>\n    <th>指定なし(=空)</th>\n    </tr>\n    <tr>\n    <td>パラメータ</td>\n    <td>○</td>\n    <td>○</td>\n    <td>×</td>\n    </tr>\n    <tr>\n    <td>見た目</td>\n    <td>○</td>\n    <td>○</td>\n    <td>○</td>\n    </tr>\n</table><p>そしてこっちが落とし穴です。<br />\n以下のコードで分かる通り、両者では挙動が異なります。</p><p></p>\n\n</div>\n<div class=\"section\">\n    <h4>name=\"submit\"のパラメータが</h4>\n    \n<div class=\"section\">\n    <h5>検証コード</h5>\n    <p>こんな<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/PHP\">PHP</a>のコードと、</p>\n<pre class=\"code lang-php\" data-lang=\"php\" data-unlink><span class=\"synSpecial\">&lt;?php</span>\n     <span class=\"synIdentifier\">var_dump</span><span class=\"synSpecial\">(</span><span class=\"synStatement\">$</span><span class=\"synIdentifier\">_POST</span><span class=\"synSpecial\">)</span>;\n     <span class=\"synStatement\">$</span><span class=\"synIdentifier\">submit</span> <span class=\"synStatement\">=</span> <span class=\"synSpecial\">(</span><span class=\"synStatement\">isset</span><span class=\"synSpecial\">(</span><span class=\"synStatement\">$</span><span class=\"synIdentifier\">_POST</span><span class=\"synSpecial\">[</span>'<span class=\"synConstant\">submit</span>'<span class=\"synSpecial\">]))</span> <span class=\"synStatement\">?</span> '<span class=\"synConstant\">Yes!</span>' <span class=\"synStatement\">:</span> '<span class=\"synConstant\">No..</span>';\n     <span class=\"synPreProc\">echo</span> '<span class=\"synConstant\">$_POST[&quot;submit&quot;]: </span>' <span class=\"synStatement\">.</span> <span class=\"synStatement\">$</span><span class=\"synIdentifier\">submit</span>;\n<span class=\"synSpecial\">?&gt;</span>\n</pre><p>このHtmlで検証します。</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">pre</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synComment\">&lt;!-- ↑のPHPのコード --&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">pre</span><span class=\"synIdentifier\">&gt;</span>\n\n\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\"> </span><span class=\"synType\">action</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;/sample.php&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">method</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;post&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;formA&quot;</span><span class=\"synIdentifier\">&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hoge&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hidden&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;fuga&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hidden&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;submit&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;submit&quot;</span><span class=\"synIdentifier\"> / </span><span class=\"synType\">style</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;background-image: url(...);&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\">&gt;</span>\n\n\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\"> </span><span class=\"synType\">action</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;/sample.php&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">method</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;post&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;formB&quot;</span><span class=\"synIdentifier\">&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hoge&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hidden&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;fuga&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hidden&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n     <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;image&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;sample_40x40.png&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;submit&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">width</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;20&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">height</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;20&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\">&gt;</span>\n</pre>\n</div>\n<div class=\"section\">\n    <h5>formA</h5>\n    <p>type=\"submit\"でポストした場合は、以下の通り。</p>\n<pre class=\"code lang-php\" data-lang=\"php\" data-unlink>array(3) {\n  [&quot;text&quot;]=<span class=\"synError\">&gt;</span>\n  string(4) &quot;hoge&quot;\n  [&quot;hidden&quot;]=<span class=\"synError\">&gt;</span>\n  string(4) &quot;fuga&quot;\n  [&quot;submit&quot;]=<span class=\"synError\">&gt;</span>\n  string(4) &quot;Send&quot;\n}\n$_POST[&quot;submit&quot;]: Yes!\n</pre>\n</div>\n<div class=\"section\">\n    <h5>formB</h5>\n    <p>type=\"image\"でポストした場合は、以下の通り。</p>\n<pre class=\"code lang-php\" data-lang=\"php\" data-unlink>array(4) {\n  [&quot;text&quot;]=<span class=\"synError\">&gt;</span>\n  string(4) &quot;hoge&quot;\n  [&quot;hidden&quot;]=<span class=\"synError\">&gt;</span>\n  string(4) &quot;fuga&quot;\n  [&quot;submit_x&quot;]=<span class=\"synError\">&gt;</span>\n  string(2) &quot;19&quot;\n  [&quot;submit_y&quot;]=<span class=\"synError\">&gt;</span>\n  string(1) &quot;7&quot;\n}\n$_POST[&quot;submit&quot;]: No..\n</pre><p>Oh...</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h4>どういうことか</h4>\n    \n<ul>\n<li>type=\"image\"にしてvalueを設定しなかった場合、nameで指定したパラメータが飛んでこない。\n<ul>\n<li>その代わりになぜか画像のクリックされた座標が飛んでくる。(誰が何に使うんや</li>\n</ul></li>\n<li>よって、type=\"submit\"と同じと思って if(isset($_POST[\"submit\"])){....} みたいな処理をしてるとコケる。</li>\n</ul><p>name=\"submit\"のパラメータが必要な場合は、</p>\n\n<ul>\n<li>なんでもいいからvalueを指定する。</li>\n<li>素直にtype=\"hidden\"を利用する。</li>\n</ul>\n</div>\n</div>\n<div class=\"section\">\n    <h3>結論</h3>\n    <p>個人的には・・</p>\n\n<ul>\n<li>submitもimageも、GET/POSTのトリガーとしてだけ使って、サーバーサイドの処理の判定ロジックには使わない。</li>\n<li>必要なパラメータはhiddenなり他の要素なりで渡す。</li>\n</ul><p>にしてもtype=\"image\"のクリック座標なんて誰得なんやろう。</p>\n\n</div>\n</div>"
}
