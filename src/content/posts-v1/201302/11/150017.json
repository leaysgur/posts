{
  "title": "Source Mapsについて調べた",
  "html": "<p>いま話題のアレです、アレ。<br />\nいま携わってるプロジェクトの開発環境が特殊で、どうにもこうにも困ってたことがあって。<br />\nそこでこのSource Mapsが使えるんじゃなかろうか？と思った次第です！</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>Source Mapsの仕組み</h3>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9\">ソースコード</a>をMini/Unifyする時に、どのファイルとどのファイルをくっつけたかが後から追えるように、マップファイルを一緒に用意するというもの。<br />\nそれだけで<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0\">デバッグ</a>する時に、どこのファイルのどの行かまで追えるようになる、と。</p><p>今まではMini/Unifyされたファイルで<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0\">デバッグ</a>なんてありえないと思ってたけど、この仕組を使えばそれも可能になりますね。</p><p>なんと<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a>だけじゃなくて、Sass/LessとかCoffeeScriptとかもOKらしい。</p><p></p>\n\n</div>\n<div class=\"section\">\n    <h3>使い方</h3>\n    \n<div class=\"section\">\n    <h4>Mini/Unifyする</h4>\n    <p>Closure compilerを実行するコマンドラインのオプションで指定するだけで良いらしい。</p>\n<pre class=\"code\" data-unlink>java -jar compiler.jar \\ \n     --js myScript.js \\\n     --js myScript2.js \\\n     --create_source_map ./maps/myScripts-min.js.map \\\n     --source_map_format=V3 \\\n     --js_output_file ./all/myScripts-min.js</pre><p>今はまだClosure compilerしか対応してないようです。</p>\n\n</div>\n<div class=\"section\">\n    <h4>Source Maps対応にする</h4>\n    <pre class=\"code\" data-unlink><span class=\"synComment\">// myScripts-min.js</span>\n……\n……\n<span class=\"synComment\">//@ sourceMappingURL=../maps/myScripts-min.js.map</span>\n</pre><p>というように、マップへのパスを記載するか</p>\n<pre class=\"code\" data-unlink>X-SourceMap: ../maps/myScripts-min.js.map</pre><p>というヘッダをコンテンツ配信時に付加する必要がある、と。</p><p></p>\n\n</div>\n<div class=\"section\">\n    <h4>ブラウザで見る</h4>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>の場合はChromeDevToolsのオプションから、<br />\n[General] -> [Sources] -> [Enable source maps] にチェック</p><p>そしてページをリロードすると、あら不思議。<br />\nもちろんこのオプションをOffにしてる時は、マップファイルを取得しません。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>実用的か</h3>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Twitter\">Twitter</a>とか見てると割と好評ぽいですね。</p>\n\n<div class=\"section\">\n    <h4>開発環境でもMini/Unifyしたファイルを配信できる</h4>\n    <p>本番環境と同じものを扱えるというのはメリットだと思います。<br />\nテンプレートの記述とかであっても、意識すべき部分が少しでも減るのは作業負荷軽減になりますもの。</p>\n\n</div>\n<div class=\"section\">\n    <h4>CoffeeScriptとかSassとかそういう系</h4>\n    <p>こういうプリコンパイル系のものをよりネイティブぽく扱えるようになるのは、便利になったと捉えて良いのかしら？<br />\nプロジェクトで生モノは使用しない！っていう人たちにとってはすごく便利そう。</p>\n\n</div>\n<div class=\"section\">\n    <h4>個人的には</h4>\n    <p>プロジェクトの規模やったり使ってるFw含め、環境によるところが多い気がする。<br />\n生のJsとか<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a>がメインな環境の場合、ちょっとファイルを修正したら即Mini/Unifyするのかというと、手動では絶対しないと思うのよね。<br />\nファイル保存しただけでコンパイル→Mini/Unifyするサーバーサイドの仕組みとかもあるところにはあるらしいので、そういうトコで使いたいかなー。</p><p>調べてみて、そんなに自分を助けてくれなさそうな事実に気付いて驚愕している！</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>参考リンクたち</h3>\n    \n<div class=\"section\">\n    <h4>実際に試してみたい方はこちら</h4>\n    \n    <blockquote>\n        <p>参考：<a href=\"http://dev.fontdragr.com/\" target=\"_blank\" title=\"font dragr | Drag and drop font testing\">font dragr | Drag and drop font testing</a></p>\n\n    </blockquote>\n<p>他には<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/jQuery\">jQuery</a>のページとかでも見れるらしいです。</p>\n\n</div>\n<div class=\"section\">\n    <h4>詳細なものとか</h4>\n    \n    <blockquote>\n        <p>参考：<a href=\"https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?hl=en_US&pli=1&pli=1\" target=\"_blank\" title=\"Source Map Revision 3 Proposal - Google ドライブ\">Source Map Revision 3 Proposal - Google ドライブ</a></p>\n\n    </blockquote>\n<p>本家のドキュメント！</p><p>全体像を知るならコレ。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/\" target=\"_blank\" title=\"Introduction to JavaScript Source Maps - HTML5 Rocks\">Introduction to JavaScript Source Maps - HTML5 Rocks</a></p>\n\n    </blockquote>\n<p>にしてもこの記事書かれたの2012年の3月21日なんよね。</p>\n\n</div>\n</div>\n</div>"
}
