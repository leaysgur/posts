{
  "title": "ElectronでMainプロセスからchild_processでコマンドを叩くとエラーコード: 127",
  "html": "<p>ElectronのMainプロセスから、Nodeの`child_process.exec`とか使って、`<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/ffmpeg\">ffmpeg</a>`とかそういう「後から入れたコマンド」を叩いた時にエラーになった。</p><p>その問題と対策をメモ。<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>$PATHのせい</h3>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/macOS\">macOS</a>の場合、`.bashrc`とか`.zshrc`とかで追加した<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4\">環境変数</a>が引き継がれないらしく、それで「コマンドがねーよ」って言われてる。</p><p>なのでそこを解決すればよい。</p><p>具体的には、</p>\n\n    <blockquote>\n        <p><a href=\"https://github.com/sindresorhus/fix-path\">GitHub - sindresorhus/fix-path: Fix the $PATH on macOS when run from a GUI app</a></p>\n\n    </blockquote>\n<p>こういうのを入れるほか、</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>process.env<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'PATH'</span><span class=\"synIdentifier\">]</span> = <span class=\"synConstant\">'/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin'</span>;\n</pre><p>みたく自力で定義してもいい。</p>\n\n</div>\n<div class=\"section\">\n    <h3>`electron-packager`でパッケージしたら発生した</h3>\n    <p>`electron .`とかして実行してる間は発生しなかったので、ちょっとハマった。</p>\n\n</div>"
}
