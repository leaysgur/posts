{
  "title": "JavaScriptでFormの値を操作する時にハマったとこ",
  "html": "<p>頼まれ備忘録なので軽く。</p><p>30秒で読めますｗ<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a>でForm要素の値の取り方</h3>\n    \n<ul>\n<li>getElementByIdで直接</li>\n<li>form['<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/hoge\">hoge</a>'].elements['piyo']とか：[ ]にはnameの値</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/hoge\">hoge</a>.piyoとか：nameの値でドットつなぎ</li>\n</ul><p>他にもいっぱいあるけど。</p><p>で、</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\"> </span><span class=\"synType\">action</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;f&quot;</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;v1&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;aaa&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;v2&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;bbb&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>こういうHTMLがあって、各要素の`value`を操作したいとする。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// Case 1: OK</span>\n<span class=\"synIdentifier\">var</span> x = <span class=\"synStatement\">document</span>.f.elements<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'v1'</span><span class=\"synIdentifier\">]</span>;\nx.value = <span class=\"synConstant\">&quot;Nya&quot;</span>;\n\n<span class=\"synComment\">// Case 2: NG</span>\n<span class=\"synIdentifier\">var</span> y = <span class=\"synStatement\">document</span>.f.elements<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'v2'</span><span class=\"synIdentifier\">]</span>.value;\ny = <span class=\"synConstant\">&quot;Nyo&quot;</span>;\n</pre><p>なんでCase 2の方はダメなの・・？っていう。</p>\n\n</div>\n<div class=\"section\">\n    <h3>変数の中身が</h3>\n    <p>わかる人には何をいまさらって感じですが、代入する変数に問題があります。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// Case 1: OK</span>\n<span class=\"synIdentifier\">var</span> x = <span class=\"synStatement\">document</span>.f.elements<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'v1'</span><span class=\"synIdentifier\">]</span>; <span class=\"synComment\">// xにはフォーム要素が代入</span>\nx.value = <span class=\"synConstant\">&quot;Nya&quot;</span>; <span class=\"synComment\">// そのフォーム要素のvalueを操作</span>\n\n<span class=\"synComment\">// Case 2: NG</span>\n<span class=\"synIdentifier\">var</span> y = <span class=\"synStatement\">document</span>.f.elements<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'v2'</span><span class=\"synIdentifier\">]</span>.value; <span class=\"synComment\">// y にはフォーム要素の値が代入</span>\ny = <span class=\"synConstant\">&quot;Nyo&quot;</span>; <span class=\"synComment\">// yの値を操作　≠　フォーム要素のvalue</span>\n</pre><p>というわけで。</p><p>`y`はフォーム要素の値が入ってるだけで、そのフォーム要素自身ではないので、後から操作しても何も起こらないってわけでした。</p>\n\n</div>"
}
