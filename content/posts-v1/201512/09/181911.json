{
  "title": "特定の文字列の中に、特定の文字列が何回あったかカウントしたい",
  "html": "<p>そして出来る限り速い書き方を知りたい。</p><p>'1/2/3/4/5'って文字列の中に、'/'が何回出てきたかを取る例。<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>案1: 愚直にsplit</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synConstant\">'1/2/3/4/5'</span>.split(/<span class=\"synIdentifier\">\\</span><span class=\"synComment\">//gm).length - 1;</span>\n</pre><p>splitして、端っこいらないのでマイナス1するパターン。</p>\n\n</div>\n<div class=\"section\">\n    <h3>案2: String#match</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synConstant\">'1/2/3/4/5'</span>.match(/<span class=\"synIdentifier\">\\</span><span class=\"synComment\">//gm).length;</span>\n</pre><p>こっちのが王道っぽい。</p>\n\n</div>\n<div class=\"section\">\n    <h3>結果</h3>\n    <p>上記の例でも、案2: String#matchの方が速かった。</p><p>どれくらい速かったかというと、手元のChrome 48.0.2564.23 beta (64-bit)だとこんな具合。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>console.time(<span class=\"synConstant\">'split'</span>)\n<span class=\"synStatement\">for</span> (<span class=\"synIdentifier\">var</span> i = 0; i &lt; 100000; i++)<span class=\"synIdentifier\">{</span>\n  <span class=\"synConstant\">'1/2/3/4/5'</span>.split(/<span class=\"synIdentifier\">\\</span><span class=\"synComment\">//gm).length - 1</span>\n<span class=\"synIdentifier\">}</span>\nconsole.timeEnd(<span class=\"synConstant\">'split'</span>)\n\nconsole.time(<span class=\"synConstant\">'match'</span>)\n<span class=\"synStatement\">for</span> (<span class=\"synIdentifier\">var</span> i = 0; i &lt; 100000; i++)<span class=\"synIdentifier\">{</span>\n  <span class=\"synConstant\">'1/2/3/4/5'</span>.match(/<span class=\"synIdentifier\">\\</span><span class=\"synComment\">//gm).length;</span>\n<span class=\"synIdentifier\">}</span>\nconsole.timeEnd(<span class=\"synConstant\">'match'</span>)\n\n<span class=\"synComment\">// VM12016:5  split: 201.295ms</span>\n<span class=\"synComment\">// VM12016:11 match: 124.047ms</span>\n</pre><p>FireFoxでもSafariでも、matchのパターンのが速かった。</p><p>ご参考まで。</p>\n\n</div>"
}
