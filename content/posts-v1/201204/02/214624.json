{
  "title": "さくらVPSでcronの設定",
  "html": "<p>ハッスルサーバーで動かしてたTwitterのbotを、さくらVPSの方に移しました。<br />\nその手順のメモです。</p><p>BotはPHPで動いてます。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>cronのインストール</h3>\n    <p>インストールされてるかどうかを確認します！</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>/etc/rc.d/init.d/crond status</pre>\n<p>インストールされてなかったので・・・。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>yum install crontabs</pre>\n<p>インストールしたら起動して、OS起動で自動実行するように。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>/etc/rc.d/init.d/crond start\nchkconfig --level 2345 crond on</pre>\n\n</div>\n<div class=\"section\">\n    <h3>crontabの設定</h3>\n    <p>調べたところ、cronというものを動かすには色々やり方があるようでした。</p>\n\n<ul>\n<li>crontabに設定を書く</li>\n<li>週一実行とか、月一実行とかディレクトリが用意されてるのでそこにファイルを置く</li>\n</ul><p>前者が一般的とのことで、crontabを設定していきます。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>crontab -e</pre>\n<p>viが立ち上がって、空っぽのファイルを編集することになります。</p>\n\n    <pre class=\"code lang-linux\" data-lang=\"linux\" data-unlink>0 6,9,15,21 * * * php /hoge/piyo/tw_bot.php</pre>\n<p>毎日の6, 9, 15, 21時ちょうどにtw_bot.phpを実行します。</p><p>詳しい書き方はこちらを参照。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"http://www.server-memo.net/tips/crontab.html\" target=\"_blank\" title=\"crontabの書き方 — server-memo.net\">crontabの書き方 — server-memo.net</a></p>\n\n    </blockquote>\n<p>PHPでTwitterのbotを作るやり方は、以前の記事へ！</p>\n\n    <blockquote>\n        <p>参考：<a href=\"http://lealog.hateblo.jp/entry/2011/12/01/230341\" target=\"_blank\" title=\"TwitterのBotをPHPでOAuthで作るときの流れ - console.lealog();\">TwitterのBotをPHPでOAuthで作るときの流れ - console.lealog();</a></p>\n\n    </blockquote>\n\n</div>\n<div class=\"section\">\n    <h3>動かないときにチェック</h3>\n    <p>自分でやってハマったので一応・・。</p>\n\n<ul>\n<li>コマンドだけ実行してみて、動くかチェックする。</li>\n<li>実行するファイルをちゃんと設置する。</li>\n<li>crondが起動してるか確認する。(/etc/rc.d/init.d/crond status)</li>\n<li>crontabの書き方を単純なやつに変えてみる。</li>\n<li>ログのチェック。(/var/log/cron)</li>\n</ul>\n</div>\n</div>"
}
