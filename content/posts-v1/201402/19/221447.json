{
  "title": "噂のVue.jsをさわってみた",
  "html": "<p>なんか流行りにのってる感があります。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"http://vuejs.org/\" target=\"_blank\" title=\"vue.js\">vue.js</a></p>\n\n    </blockquote>\n<p>なんかわからんけどはてブの上位に出てた、気象庁のAPIとあわせて使ってみました。</p><p>以下、サンプルのURLです。<br />\nソース見た方がはやいかも。</p>\n\n    <blockquote>\n        <p>気象庁APIの仕様変更？の影響か、レスポンスが取得できなくなったので、現在動作してません。</p>\n\n    </blockquote>\n<p>使用感なんて語れるほど大した身分ではないのですが、まあこういう風にも見えてるよ、ということでココはひとつ。</p>\n\n    <blockquote>\n        <p>20140712追記<br />\nいまだぽつぽつブクマされるので追記です。<br />\nこのサンプルで使ってるVue.jsはバージョンがかなり古いので、そこを念頭に置いた上で読んでください！<br />\n最近のバージョンアップでループまわりは記述方法変わってた気もするので。</p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h3>さわるまえ</h3>\n    <p>ドキュメントを読んでる感じ、Angular.jsの時と同じような印象。<br />\n「え、コードこんだけでいいの？うわ動いてるすげー！」っていう感じ。</p><p>コードのスタイルがシンプルなjsのオブジェクトで組んでいく風で、そこは使いやすそう。<br />\n(Angularの$scope祭りには戸惑った覚えがあるので)</p><p>ドキュメントもまだモリモリじゃないので、ちょっと頑張れば全部読める。</p><p>後は、このライブラリの恩恵を受け続けれるかどうかが気になって、</p>\n\n<ul>\n<li>ディレクティブをどんだけ使いこなせるか(覚えられるか)</li>\n<li>どこまでビルトインの仕組みを用意してもらえてるのか</li>\n</ul><p>みたいなことをチェックしたいですね。</p><p>Backboneは、よくも悪くもスーパーマンではなかったので、<br />\nいかに自分のコードを書かず、おいしいとこをいただけるかが気になるなと。<br />\n自分であれこれ作れる人からすると、また違った観点になるんでしょうかねー。</p><p>HTMLにガリガリあれこ書いていくスタイルがダメ！って人は、元からダメなんやろうなと思います。<br />\nまあそこはもう割切りな気もする今日このごろ。<br />\n時代の流れ的なものが見え隠れしてて、しっかりと見極められる目を養いたい！</p>\n\n</div>\n<div class=\"section\">\n    <h3>さわってみて</h3>\n    <p>実際のコードは後でメモるとして、ざっと。</p>\n\n<ul>\n<li>モデルのバインディングっていうか、勝手に値が反映されるのはやっぱり楽でいい！</li>\n<li>DOMがID祭りにならないのいい</li>\n<li>v-show/v-if/とv-transitionのセットは中々ありがたい</li>\n<li>v-ifはDOMから消えるけど、v-showはdisplay: none;ってだけの違いぽい</li>\n<li>データ構造は生のjsです！っていうけど、実はgetter/setterだらけなのでconsoleでちょっと見にくい</li>\n<li>某ヒゲテンプレっぽく書ける風やけど、デリミタがヒゲなだけで {{#if}} とかはできない</li>\n<li>なので、{{#each arr}} とかないから配列のネストの処理がわからない</li>\n<li>Angularよりお手軽！ってどっかで見たけど、ちゃんとしてる分だけやはり学習コストはかかる</li>\n<li>ドキュメントはあるけど、まだまだ生きたサンプルが少ない(ってか、ない)</li>\n<li>Backboneとは住む世界が違う気がする(機能としてはRoutingとかもないし、そもそも比較対象なん？)</li>\n<li>あとはパフォーマンスが気になる(特にモバイル)</li>\n</ul><p>当然ですが、もうちょっと使ってみないと、実戦投入できるかは測りかねる感じ。<br />\nそもそもまだv0.8.6(20140219現在)やし。</p>\n\n</div>\n<div class=\"section\">\n    <h3>コードのメモ</h3>\n    <p>そのまんまです。</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span>section<span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;demo&quot;</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;input&quot;</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>{{title}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;forms.title&quot;</span><span class=\"synIdentifier\"> /&gt;</span>を\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;date&quot;</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;forms.date&quot;</span><span class=\"synIdentifier\">&gt;</span>の日中のデータから<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">br</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;number&quot;</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;forms.limit&quot;</span><span class=\"synIdentifier\">&gt;</span>件\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">label</span><span class=\"synIdentifier\">&gt;&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;radio&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;order&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;new&quot;</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;forms.order&quot;</span><span class=\"synIdentifier\">&gt;</span>新しい<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">label</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">label</span><span class=\"synIdentifier\">&gt;&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;radio&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;order&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;old&quot;</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;forms.order&quot;</span><span class=\"synIdentifier\">&gt;</span>古い<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">label</span><span class=\"synIdentifier\">&gt;</span>順に\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> v-on=</span><span class=\"synConstant\">&quot;click: search&quot;</span><span class=\"synIdentifier\">&gt;</span>検索！<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> v-on=</span><span class=\"synConstant\">&quot;click: clear&quot;</span><span class=\"synIdentifier\">&gt;</span>削除！<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n    パラメータ: order={{forms.order}}<span class=\"synError\">&amp;</span>limit={{forms.limit}}<span class=\"synError\">&amp;</span>datetime={{forms.date}} 00:00:00<span class=\"synError\">&amp;</span>datetime={{forms.date}} 23:59:59<span class=\"synError\">&amp;</span>title={{forms.title}}\n  <span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>\n\n  <span class=\"synComment\">&lt;!-- ここにデータいれる --&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>{{<span class=\"synError\">&gt;</span> repeat}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span>section<span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- テンプレ --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text/v-template&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;repeat-tmpl&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synSpecial\">  &lt;article </span><span class=\"synStatement\">class</span><span class=\"synSpecial\">=</span><span class=\"synConstant\">&quot;no-data&quot;</span><span class=\"synSpecial\"> v-show=</span><span class=\"synConstant\">&quot;!results.length&quot;</span><span class=\"synSpecial\"> v-transition&gt;まだデータがないよ&lt;/article&gt;</span>\n<span class=\"synSpecial\">  &lt;article v-repeat=</span><span class=\"synConstant\">&quot;results&quot;</span><span class=\"synSpecial\"> v-on=</span><span class=\"synConstant\">&quot;click: tweet&quot;</span><span class=\"synSpecial\"> </span><span class=\"synStatement\">class</span><span class=\"synSpecial\">=</span><span class=\"synConstant\">&quot;article-{{$index}}&quot;</span><span class=\"synSpecial\">&gt;</span>\n<span class=\"synSpecial\">    &lt;header&gt;</span>\n<span class=\"synSpecial\">      </span><span class=\"synIdentifier\">[{{</span><span class=\"synSpecial\">datetime</span><span class=\"synIdentifier\">}}]</span><span class=\"synSpecial\"> &lt;a href=</span><span class=\"synConstant\">&quot;{{link}}&quot;</span><span class=\"synSpecial\"> target=</span><span class=\"synConstant\">&quot;_blank&quot;</span><span class=\"synSpecial\">&gt;詳細</span>(<span class=\"synSpecial\">XML</span>)<span class=\"synSpecial\">&lt;/a&gt;</span>\n<span class=\"synSpecial\">      &lt;h2&gt;</span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">title</span><span class=\"synIdentifier\">}}</span><span class=\"synSpecial\">&lt;/h2&gt;</span>\n<span class=\"synSpecial\">    &lt;/header&gt;</span>\n<span class=\"synSpecial\">    &lt;p&gt;</span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">headline | getFirst</span><span class=\"synIdentifier\">}}</span><span class=\"synSpecial\">&lt;/p&gt;</span>\n<span class=\"synSpecial\">    </span><span class=\"synComment\">&lt;!--</span><span class=\"synSpecial\"> &lt;p&gt;</span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">#each headline</span><span class=\"synIdentifier\">}}{{this}}</span><span class=\"synSpecial\"> / </span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">/each</span><span class=\"synIdentifier\">}}</span><span class=\"synSpecial\">&lt;/p&gt; &lt;- NOT WORK... </span><span class=\"synComment\">--&gt;</span>\n<span class=\"synSpecial\">  &lt;/article&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n</pre>\n<ul>\n<li>{{hoge}}でデータはバインディング</li>\n<li>input類みたく値をいじれるやつはv-modelで連携できる</li>\n<li>v-onでイベント貼れる</li>\n<li>v-show/v-ifで特定のデータのT/Fで挙動かえれる</li>\n<li>v-repeatで繰り返し</li>\n</ul><p>ってだけでだいぶいろいろやれるぽい。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// 独自のフィルタは大元に。</span>\nVue.filter(<span class=\"synConstant\">'getFirst'</span>, <span class=\"synIdentifier\">function</span> (value) <span class=\"synIdentifier\">{</span>\n  <span class=\"synStatement\">if</span> (!value) <span class=\"synIdentifier\">{</span> <span class=\"synStatement\">return</span>; <span class=\"synIdentifier\">}</span>\n  <span class=\"synStatement\">if</span> (<span class=\"synStatement\">typeof</span> value !== <span class=\"synStatement\">typeof</span> <span class=\"synIdentifier\">[]</span>) <span class=\"synIdentifier\">{</span> <span class=\"synStatement\">return</span>; <span class=\"synIdentifier\">}</span>\n  <span class=\"synStatement\">return</span> value<span class=\"synIdentifier\">[</span>0<span class=\"synIdentifier\">]</span>;\n<span class=\"synIdentifier\">}</span>);\n\n<span class=\"synIdentifier\">var</span> demo = <span class=\"synStatement\">new</span> Vue(<span class=\"synIdentifier\">{</span>\n  el: <span class=\"synConstant\">'#demo'</span>,\n  <span class=\"synComment\">// 部品テンプレつかえる</span>\n  partials: <span class=\"synIdentifier\">{</span>\n    repeat: <span class=\"synConstant\">'#repeat-tmpl'</span>\n  <span class=\"synIdentifier\">}</span>,\n  data: <span class=\"synIdentifier\">{</span>\n    title: <span class=\"synConstant\">'気象庁防災情報 XML 検索 APIから、その日中の気象警報・注意報を検索！'</span>,\n    <span class=\"synComment\">// input[type:hoge]に紐付けてるモデルたち</span>\n    forms: <span class=\"synIdentifier\">{</span>\n      title: <span class=\"synConstant\">'気象警報・注意報'</span>,\n      date: <span class=\"synConstant\">'2014-01-01'</span>,\n      order: <span class=\"synConstant\">'new'</span>,\n      limit: 5\n    <span class=\"synIdentifier\">}</span>,\n    <span class=\"synComment\">// 主たるデータ</span>\n    results: <span class=\"synIdentifier\">[]</span>\n  <span class=\"synIdentifier\">}</span>,\n  methods: <span class=\"synIdentifier\">{</span>\n    search: <span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n      <span class=\"synComment\">// いわんやdataです</span>\n      <span class=\"synIdentifier\">var</span> $data = <span class=\"synIdentifier\">this</span>.$data;\n      <span class=\"synIdentifier\">var</span> $forms = $data.forms;\n      <span class=\"synIdentifier\">var</span> base = <span class=\"synConstant\">'http://api.aitc.jp/jmardb/search'</span>;\n      <span class=\"synIdentifier\">var</span> param = <span class=\"synIdentifier\">[</span>\n        <span class=\"synConstant\">'order='</span> + $forms.order,\n        <span class=\"synConstant\">'limit='</span> + $forms.limit,\n        <span class=\"synConstant\">'datetime='</span> + $forms.date + <span class=\"synConstant\">' 00:00:00'</span>,\n        <span class=\"synConstant\">'datetime='</span> + $forms.date + <span class=\"synConstant\">' 23:59:59'</span>,\n        <span class=\"synConstant\">'title='</span> + $forms.title\n      <span class=\"synIdentifier\">]</span>;\n      $.ajax(<span class=\"synIdentifier\">{</span>\n        url: base + <span class=\"synConstant\">'?'</span> + param.join(<span class=\"synConstant\">'&amp;'</span>)\n      <span class=\"synIdentifier\">}</span>).done(<span class=\"synIdentifier\">function</span>(data)<span class=\"synIdentifier\">{</span>\n        <span class=\"synComment\">// setとかreplaceとかしなくても、これでもViewは更新される</span>\n        $data.results = data.data;\n      <span class=\"synIdentifier\">}</span>);\n    <span class=\"synIdentifier\">}</span>,\n    tweet: <span class=\"synIdentifier\">function</span>(e) <span class=\"synIdentifier\">{</span>\n      console.log(<span class=\"synIdentifier\">this</span>); <span class=\"synComment\">// コレはこのdemoVMのこと</span>\n      console.log(e.targetVM); <span class=\"synComment\">// コレは今クリックされたrepeatされてるVM</span>\n      global.<span class=\"synStatement\">alert</span>(e.targetVM.headline<span class=\"synIdentifier\">[</span>0<span class=\"synIdentifier\">]</span>);\n    <span class=\"synIdentifier\">}</span>,\n    clear: <span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n      <span class=\"synIdentifier\">this</span>.$data.results = <span class=\"synIdentifier\">[]</span>;\n  <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>);\n</pre>\n<ul>\n<li>カスタム○○は勝手に定義する</li>\n<li>elでDOMと一緒にVMは初期化する</li>\n<li>バインドしたいデータはdata以下</li>\n<li>メソッドはmethods以下</li>\n</ul><p>もはや説明しなくてもコード見ればわかる、ってすごいことですね。</p>\n\n</div>\n<div class=\"section\">\n    <h3>わからなかったこと</h3>\n    \n<ul>\n<li>v-repeatでまわす配列の中に、さらに配列がいる場合にどうやるんか</li>\n</ul><p>上記の例で、ajaxで取得してるdata.data[n].headlineは配列なのですが、それをどうやってイテレーションすればいいのかわかりませんでした。<br />\nわからんので今回は無理やりフィルターを試すということにしました・・。</p>\n\n    <blockquote>\n        <p>最近のバージョンでできるようになったぽい！きたこれ！<br />\n<a href=\"http://lealog.hateblo.jp/entry/2014/03/16/182334\" target=\"_blank\" title=\"Vue.jsでv-repeatをネストするには - console.lealog();\">Vue.jsでv-repeatをネストするには - console.lealog();</a></p>\n\n    </blockquote>\n\n</div>\n<div class=\"section\">\n    <h3>さいごにメモ</h3>\n    <p>まさかのご本人様の登場でした。</p><p><blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"en\" dir=\"ltr\"><a href=\"https://twitter.com/leader22\">@leader22</a> <a href=\"http://t.co/XXVqHlPEnr\">http://t.co/XXVqHlPEnr</a> Note `value` will be changed to `$value` soon.</p>&mdash; Evan You (@youyuxi) <a href=\"https://twitter.com/youyuxi/status/435869624094449664\">2014年2月18日</a></blockquote><script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></p><p>v-repeatで配列まわすときで、突っ込むデータがその配列だけな場合の話かな。<br />\nmentionやけど答えにはなってないｗ</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">new</span> Vue(<span class=\"synIdentifier\">{</span>\n  el: <span class=\"synConstant\">'#tags'</span>,\n  data: <span class=\"synIdentifier\">{</span>\n    tags: <span class=\"synIdentifier\">[</span><span class=\"synConstant\">'JavaScript'</span>, <span class=\"synConstant\">'MVVM'</span>, <span class=\"synConstant\">'Vue.js'</span><span class=\"synIdentifier\">]</span>\n  <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>);\n</pre><p>で、</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;tags&quot;</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synComment\">&lt;!--&lt;li v-repeat=&quot;tags&quot;&gt;{{value}}&lt;/li&gt;--&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-repeat=</span><span class=\"synConstant\">&quot;tags&quot;</span><span class=\"synIdentifier\">&gt;</span>{{$value}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>ってことかな？</p><p>めもめも。<br />\nというように、これからもアップデートが頻繁にくる感じですね！期待してます。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"https://github.com/vuejs\" target=\"_blank\" title=\"vuejs\">vuejs</a></p>\n\n    </blockquote>\n<p>RouterとかTouchとかあるー！<br />\nまた今度試してみようー。</p>\n\n</div>"
}
