{
  "title": "第3回くらいYokohama.jsの課題やってみた",
  "html": "<p>こういう勉強会にいつかは行ってみたいと思いつつ、こんなぺーぺーがなぁ・・とか思って家でTLやらを追ってばかり。</p><p>今回も、<br />\n<blockquote class=\"twitter-tweet\" lang=\"ja\"><p>今日の→ <a href=\"http://t.co/5FQ0Qt2C\" title=\"http://bit.ly/yjs20120805\">bit.ly/yjs20120805</a> <a href=\"https://twitter.com/search/%23yjs20120805\"><s>#</s><b>yjs20120805</b></a></p>&mdash; Yokohamaさん (@yokohamajs) <a href=\"https://twitter.com/yokohamajs/status/232018430792962048\" data-datetime=\"2012-08-05T07:41:19+00:00\">8月 5, 2012</a></blockquote><br />\n<script src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script></p><p>こんなのが流れてきたので、やってみました。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>完成品</h3>\n    <p><script type=\"text/javascript\" src=\"http://jsdo.it/blogparts/bPuO/js\"></script></p>\n\n</div>\n<div class=\"section\">\n    <h3>ソース</h3>\n    \n<div class=\"section\">\n    <h4>メインのコード</h4>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">function</span> Slider(tgt)<span class=\"synIdentifier\">{</span>\n\t<span class=\"synIdentifier\">this</span>.main = tgt;\n\t<span class=\"synIdentifier\">this</span>.nav = tgt.getElementsByClassName(<span class=\"synConstant\">'move'</span>);\n\t<span class=\"synIdentifier\">this</span>.list = tgt.getElementsByClassName(<span class=\"synConstant\">'image-list'</span>)<span class=\"synIdentifier\">[</span>0<span class=\"synIdentifier\">]</span>;\n\t<span class=\"synIdentifier\">this</span>.imgLen = <span class=\"synIdentifier\">this</span>.list.getElementsByTagName(<span class=\"synConstant\">'img'</span>).length;\n\t<span class=\"synIdentifier\">this</span>.current = 0;\n<span class=\"synIdentifier\">}</span>\nSlider.prototype.init = <span class=\"synIdentifier\">function</span>()<span class=\"synIdentifier\">{</span>\n\t<span class=\"synIdentifier\">var</span> $nav = <span class=\"synIdentifier\">this</span>.nav;\n\t<span class=\"synIdentifier\">var</span> $slider = <span class=\"synIdentifier\">this</span>;\n\t<span class=\"synStatement\">for</span>(<span class=\"synIdentifier\">var</span> i = 0, l = $nav.length; i &lt; l; i++)<span class=\"synIdentifier\">{</span>\n\t\t$nav<span class=\"synIdentifier\">[</span>i<span class=\"synIdentifier\">]</span>.addEventListener(<span class=\"synConstant\">'click'</span>, <span class=\"synIdentifier\">function</span>(e)<span class=\"synIdentifier\">{</span>\n\t\t\t$slider.update(e);\n\t\t\t$slider.move($slider.current);\n\t\t<span class=\"synIdentifier\">}</span>, <span class=\"synConstant\">false</span>);\n\t<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>;\nSlider.prototype.update = <span class=\"synIdentifier\">function</span>(e)<span class=\"synIdentifier\">{</span>\n\t<span class=\"synIdentifier\">var</span> dir = e.target.className.split(<span class=\"synConstant\">' '</span>)<span class=\"synIdentifier\">[</span>1<span class=\"synIdentifier\">]</span>;\n\t<span class=\"synStatement\">if</span>(dir === <span class=\"synConstant\">'prev'</span>)<span class=\"synIdentifier\">{</span>\n\t\t<span class=\"synStatement\">if</span>(<span class=\"synIdentifier\">this</span>.current === 0)<span class=\"synIdentifier\">{</span>\n\t\t\t<span class=\"synIdentifier\">this</span>.current = <span class=\"synIdentifier\">this</span>.imgLen-1;\n\t\t<span class=\"synIdentifier\">}</span><span class=\"synStatement\">else</span><span class=\"synIdentifier\">{</span>\n\t\t\t<span class=\"synIdentifier\">this</span>.current--;\n\t\t<span class=\"synIdentifier\">}</span>\n\t<span class=\"synIdentifier\">}</span><span class=\"synStatement\">else</span><span class=\"synIdentifier\">{</span>\n\t\t<span class=\"synStatement\">if</span>(<span class=\"synIdentifier\">this</span>.current === <span class=\"synIdentifier\">this</span>.imgLen-1)<span class=\"synIdentifier\">{</span>\n\t\t\t<span class=\"synIdentifier\">this</span>.current = 0;\n\t\t<span class=\"synIdentifier\">}</span><span class=\"synStatement\">else</span><span class=\"synIdentifier\">{</span>\n\t\t\t<span class=\"synIdentifier\">this</span>.current++;\n\t\t<span class=\"synIdentifier\">}</span>\n\t<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>;\nSlider.prototype.move = <span class=\"synIdentifier\">function</span>(current)<span class=\"synIdentifier\">{</span>\n\t<span class=\"synIdentifier\">this</span>.list.style.marginLeft = - (337 * current) + <span class=\"synConstant\">'px'</span>;\n<span class=\"synIdentifier\">}</span>;\n</pre>\n</div>\n<div class=\"section\">\n    <h4>実行するとこ</h4>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>;(<span class=\"synIdentifier\">function</span>(_doc)<span class=\"synIdentifier\">{</span>\n\t<span class=\"synIdentifier\">var</span> doc = _doc;\n\t<span class=\"synIdentifier\">var</span> tgt = doc.getElementsByClassName(<span class=\"synConstant\">'slider'</span>)<span class=\"synIdentifier\">[</span>0<span class=\"synIdentifier\">]</span>;\n\t<span class=\"synIdentifier\">var</span> slider = <span class=\"synStatement\">new</span> Slider(tgt);\n\tslider.init();\n\t\n\t<span class=\"synIdentifier\">var</span> tgt2 = doc.getElementsByClassName(<span class=\"synConstant\">'slider'</span>)<span class=\"synIdentifier\">[</span>1<span class=\"synIdentifier\">]</span>;\n\t<span class=\"synIdentifier\">var</span> slider2 = <span class=\"synStatement\">new</span> Slider(tgt2);\n\tslider2.init();\n\t\n<span class=\"synIdentifier\">}</span>(<span class=\"synStatement\">document</span>));\n</pre>\n</div>\n</div>\n<div class=\"section\">\n    <h3>反省</h3>\n    \n<div class=\"section\">\n    <h4>updateメソッドの中身がキレイくない。</h4>\n    <p>だいたいのスライダーの実装については、以前にLearn jQuery 30 daysの動画見た時に覚えてたけれども、細かいとこが・・。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"https://tutsplus.com/lesson/prototypal-inheritance-and-refactoring-the-slider/\" target=\"_blank\" title=\"Tuts+ Premium Course: 30 Days to Learn jQuery - Prototypal Inheritance and Refactoring the Slider\">Tuts+ Premium Course: 30 Days to Learn jQuery - Prototypal Inheritance and Refactoring the Slider</a></p>\n\n    </blockquote>\n<p>改めて見返すと、これが美しいコードか・・・！ってほどすっきりしてますね！</p>\n\n</div>\n<div class=\"section\">\n    <h4>最初にDOMつかむとこ</h4>\n    <p>getElementsByClassNameで掴んだほうがいいのか、querySelectorAllとか使った方がいいのか判断つかず。<br />\nあとgetElementsByTagNameも。</p><p>ちょっと調べた限りじゃよくわからなかったのよねー。</p>\n\n</div>\n<div class=\"section\">\n    <h4>PC限定っていう</h4>\n    <p>クリックイベントしか取ってないので、スマートフォンで動かんのやろなあ・・。<br />\nタッチイベント系やらスワイプやらまとめて処理してくれるライブラリがあれば、それ使ってごにょごにょできそうかな・・？</p><p>うーん、精進しますです・・。</p>\n\n</div>\n</div>\n</div>"
}
