{
  "title": "AbemaTV Developer Conference 2017 に行ってきたメモ #abematv_dev",
  "html": "\n    <blockquote>\n        <p><a href=\"https://abematv.connpass.com/event/65069/\">AbemaTV Developer Conference 2017 - connpass</a></p>\n\n    </blockquote>\n<p>dotsっていつの間に名前変わってたんや・・！<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>AbemaTVを支えるGoogle Cloud Platform by Google Platform Japan 福田潔様</h3>\n    \n<div class=\"section\">\n    <h4>はじめに</h4>\n    \n<ul>\n<li>GCPとかG SuiteとかあわせてGoogle Cloudっていってる</li>\n<li>それを日本で広めるための会社です</li>\n<li>AbematTVで使ってる概要を紹介</li>\n<li>GCPはこの5年間でサービスも増えた</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>AbemaTV on GCP</h4>\n    \n<ul>\n<li>クライアント <-> Akamai <-> GCP</li>\n<li>GCPの領域では最初にGCLBがいる</li>\n<li>中はコンテナ、GKE上で動かしてる\n<ul>\n<li>App Engine</li>\n<li>Container Engine(GKE) <- コレ</li>\n<li>Compute Engine</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>GKE</h4>\n    \n<ul>\n<li>Google Kubernetes Engine\n<ul>\n<li>Dockerもk8sをネイティブサポート</li>\n<li>各種クラウドベンダーもだいたいk8sをサポート</li>\n<li>コンテナやるならk8sな時代</li>\n</ul></li>\n<li>Google is your SRE\n<ul>\n<li>Site Reliability Engineer</li>\n<li>コードも書けるし運用もできるエンジニア</li>\n</ul></li>\n<li>k8sのノードのアップデートとかも面倒みてくれる</li>\n<li><a href=\"http://blog.kubernetes.io/2017/01/running-mongodb-on-kubernetes-with-statefulsets.html\">Kubernetes: Running MongoDB on Kubernetes with StatefulSets</a>\n<ul>\n<li>当時はk8s上では永続化層は設けないのがベストプラクティスだった</li>\n</ul></li>\n<li>k8sやるならGKEがオススメ\n<ul>\n<li>歴史もあるし、なによりGoogleだし</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>GCLB</h4>\n    \n<ul>\n<li>物理的に最も近いリージョンに振り分ける</li>\n<li>バックエンドに障害があっても、また違う最寄りのリージョンに振り分けてくれる</li>\n<li>Cloud CDNも、チェックボックスひとつで利用可能</li>\n<li>世界中に存在するPOPや、ネットワーク（物理含め）があるからこそ成せる</li>\n</ul><p>FirestoreといいGCPキテますなー。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTV将棋チャンネルの配信技術 〜全国完全生中継への挑戦〜 by 藤崎 智</h3>\n    <p>お台場のテレビ局を経て、個人で局をやったりした経験が</p>\n\n<div class=\"section\">\n    <h4>中継技術の進化</h4>\n    \n<ul>\n<li>FPU（マイクロ波）\n<ul>\n<li>中継基地にいったん送って、それからスタジオへ</li>\n<li>1つの映像しか送れない</li>\n<li>現場から中継基地が見えるか（電波届くか）が問題</li>\n<li>しかし費用が高い</li>\n</ul></li>\n<li>衛生\n<ul>\n<li>電波はどこでも使える</li>\n<li>遅延する</li>\n<li>天候に弱い</li>\n<li>めっちゃ費用高い</li>\n<li>ナミブ砂漠からの6分の中継に5000万</li>\n</ul></li>\n<li>これらは使えない・・・</li>\n<li>Skype\n<ul>\n<li>不安定</li>\n<li>PCベース</li>\n</ul></li>\n<li>SkypeTX\n<ul>\n<li>720Pまで配信できる</li>\n<li>低遅延</li>\n<li>やや不安定</li>\n</ul></li>\n<li>LiveU\n<ul>\n<li><a href=\"http://www.liveu.tv/ja/\">&#x30DB;&#x30FC;&#x30E0;</a></li>\n<li>各種通信キャリアを束ねて利用(SIMが刺さってるだけｗ)</li>\n<li>1本1通信じゃなくて、分散させて飛ばす</li>\n<li>圏外はどうしようもない</li>\n<li>パケロス</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>将棋中継の仕組み</h4>\n    \n<ul>\n<li>2ヶ月前から下見</li>\n<li>1ヶ月前に回線工事</li>\n<li>発電機の手配とかも</li>\n<li>キャリアの基地局の場所を把握</li>\n<li>前々日に撮影機材の櫓をたて・・</li>\n<li>そこから本部まで150m回線を伸ばしたことも・・</li>\n<li>1日の放送のためにこれだけ</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>想定外実話 Best3</h4>\n    \n<ul>\n<li>3位: インターネットが黒電話だった\n<ul>\n<li>150年の歴史がある旅館でございます</li>\n</ul></li>\n<li>2位: 8階までクレーンであげる\n<ul>\n<li>末端が隣の建物の地下、試合するのは別館の8F</li>\n</ul></li>\n<li>1位: 国宝\n<ul>\n<li>工事できません</li>\n<li>ネットもつながりません！</li>\n</ul></li>\n</ul><p>めっちゃおもしろかった・・すごい話やった・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTVの画質定義～ラウドネスマネージメント by 御池 崇史</h3>\n    <p>トランスコードエンジニアっていう肩書の人もいるのね！</p>\n\n<div class=\"section\">\n    <h4>用語説明</h4>\n    \n<ul>\n<li>解像度\n<ul>\n<li>フルHD: 1920x1080</li>\n<li>720P: 1280x720</li>\n<li>854x480</li>\n<li>640x360</li>\n<li>426x240</li>\n</ul></li>\n<li>CODEC\n<ul>\n<li>映像・音声を圧縮</li>\n<li>COder / DECorder</li>\n</ul></li>\n<li>コンテナ・拡張子</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>入稿素材</h4>\n    \n<ul>\n<li>h264がメジャー</li>\n<li>PRORES422</li>\n<li>mxfコンテナ</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>トランスコード</h4>\n    \n<ul>\n<li>DynamiDrivePoolに素材を</li>\n<li>メタデータを付与してトランスコーダーへ</li>\n<li>そこでHLSやDASHに</li>\n<li>解像度を個別に出したりHDRとか</li>\n<li>2回トランスコードする</li>\n<li>中間ファイルはh264 10mbps フルhd</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>品質評価</h4>\n    \n<ul>\n<li>Quales / Vantageという品質評価のソフトを使ってる</li>\n<li>SSIMとPSNRという指標を見たり</li>\n<li>ビットレートを削った上で、主観でのチェックもしている</li>\n<li>Server Side Ad Insertionがキモ</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>ラウドネス</h4>\n    \n<ul>\n<li>音量管理ルール</li>\n<li>番組とcmの音量差とか</li>\n<li>チャンネル間の音量バランス</li>\n<li>エピソードごとにも</li>\n<li>制作年代にもよるので注意して調整</li>\n<li>劇場版は特に注意（ダイナミックレンジを潰さないように）</li>\n</ul><p>すっっっごい興味ある内容やったのに、Macbookがまた動作不良で鉄板と化してメモがあまり取れず本当に無念・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTV モバイルアプリの開発体制と開発プロセスの話 by 波戸勇二</h3>\n    \n    <blockquote>\n        <p><a href=\"https://www.slideshare.net/yuujihato/abematv-81041440\">AbemaTV &#x30E2;&#x30D0;&#x30A4;&#x30EB;&#x30A2;&#x30D7;&#x30EA;&#x306E;&#x958B;&#x767A;&#x4F53;&#x5236;&#x3068;&#x958B;&#x767A;&#x30D7;&#x30ED;&#x30BB;&#x30B9;&#x306E;&#x8A71;</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h4>iOSアプリ</h4>\n    \n<ul>\n<li>チーム全体は50人くらい</li>\n<li>その中でiOSチームは10人</li>\n<li>iOSは1ヶ月で162PRがマージされてる\n<ul>\n<li>8PR/dayくらいマージされてる</li>\n</ul></li>\n<li>tvOSはその半分くらい</li>\n<li>apiはそんなに多くない</li>\n<li>頻繁にPRがマージされる環境</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>開発体制とかプロセスとか</h4>\n    \n<ul>\n<li>開発とQAが並走すると辛いので、1週間ごとに繰り返すように（あわせて2週間のスプリント）</li>\n<li>スプリントにしてはざっくりしたポイントで\n<ul>\n<li>0.5, 1, 2 みたいな</li>\n</ul></li>\n<li>5段階の優先度</li>\n<li>使ってるツールは一般的\n<ul>\n<li><a href=\"https://github.com/toshi0383/cmdshelf\">https://github.com/toshi0383/cmdshelf</a></li>\n<li>バイナリコマンドをまとめられる内製ツール</li>\n</ul></li>\n<li>PRのマージルールとかも決まってる</li>\n<li>レビュー文化も活発</li>\n<li>コーディング規約もある</li>\n<li>テストは2000くらい\n<ul>\n<li>モデルとかロジックまわりのみ</li>\n</ul></li>\n<li>週一で定例</li>\n<li>GitのブランチはGitHubFlow</li>\n<li>Bot通知とかも活用\n<ul>\n<li>毎日同じ文言で遅刻連絡を自動化してる人がいる説</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>Beta配信</h4>\n    \n<ul>\n<li>Carshlytics</li>\n<li>iTunesConnect -> TestFlight</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>QA効率化</h4>\n    \n<ul>\n<li>ローカル通知のシミュレート</li>\n<li>ユーザー設定、キャッシュなどの削除</li>\n<li>UIアニメの調整</li>\n<li>映像情報をオーバーレイしたり</li>\n</ul><p>事業スピードも品質も落とさず継続開発するって大変やと思うので、すごいなという。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>デザインのBefore & After by 松本 俊介(@ShunsukeM108) & 清水 康秀</h3>\n    \n    <blockquote>\n        <p><a href=\"https://www.slideshare.net/ShunsukeMatsumoto/abematv-before-after\">AbemaTV &#x30C7;&#x30B6;&#x30A4;&#x30F3;&#x306E;Before &amp; After</a></p>\n\n    </blockquote>\n<p>前半はiOS / Androidのデザイナーさん、後半がWebのデザイナーさん。</p>\n\n<div class=\"section\">\n    <h4>デザイナー</h4>\n    \n<ul>\n<li>チーム全体でデザイナーは4人</li>\n<li>3つのラインでデザイン改善\n<ul>\n<li>グロースライン</li>\n<li>ビデオライン</li>\n<li>UX改善ライン</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>アプリの改善例</h4>\n    \n<ul>\n<li>ボタンが増えるのを見越して情報整理</li>\n<li>AndroidにあるSnackBarをiOSでも\n<ul>\n<li>端末が大きくなって指が上部に届かない</li>\n</ul></li>\n<li>フルスクリーンのモーダルを避ける</li>\n<li>マテリアルデザインのシステムとしての優秀さ</li>\n<li>Netflixのようにサムネ重視から、テキストベースに\n<ul>\n<li>ハリウッド映画に比べるとサムネの訴求力は弱い</li>\n</ul></li>\n<li>アプリのアイコン\n<ul>\n<li>AndroidのAdaptive Iconに対応</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>Web</h4>\n    \n<ul>\n<li>AbemaTVはモバイルWebで見れない</li>\n<li>アプリへの導線</li>\n<li>番組紹介のLPの改善\n<ul>\n<li>番組紹介であることを第一に</li>\n<li>アプリ版とUIに遜色ないように</li>\n</ul></li>\n<li>Twitter流入からのDL率改善\n<ul>\n<li>改善前は、パーマネントなリンクではなかった</li>\n<li>改善後は、放送後でも見れるページにした</li>\n</ul></li>\n<li>全体でDL率が200％改善</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>まとめ</h4>\n    \n<ul>\n<li>UI変更に抵抗はない</li>\n<li>ユーザーもUI変更に追従する</li>\n<li>改悪も確かにあるが、変化を恐れるほうが悪</li>\n</ul>\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTVにおけるモニタリング by Le Van Nghia(@nghialv2607)</h3>\n    \n<div class=\"section\">\n    <h4>アーキテクチャ</h4>\n    \n<ul>\n<li>GCP + k8sで動くMicroServices（gRPCでやり取り）</li>\n<li>StatefullなのはRedis / Mongo</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>モニタリングシステム</h4>\n    \n<ul>\n<li>すべてのレイヤーを監視したい\n<ul>\n<li>昔はStackDriverで</li>\n</ul></li>\n<li>Prometheus + Grafanaでやり替え\n<ul>\n<li><a href=\"https://developers.cyberagent.co.jp/blog/archives/3814/\">AbemaTV&#x306B;Prometheus&#x3068;&#x3044;&#x3046;&#x30E2;&#x30CB;&#x30BF;&#x30EA;&#x30F3;&#x30B0;&#x30B7;&#x30B9;&#x30C6;&#x30E0;&#x3092;&#x5C0E;&#x5165;&#x3057;&#x305F;&#x8A71;</a></li>\n</ul></li>\n<li>Prometheus\n<ul>\n<li>k8sと親和性が高い</li>\n<li>パフォーマンスよし = 10000target/1instance</li>\n<li>クラスタ内に1つ</li>\n</ul></li>\n<li>Grafanaで複雑なクエリを書くと遅い</li>\n<li>取りたいメトリクスが増えた\n<ul>\n<li>Nodeメトリクス</li>\n<li>k8sのメトリクス</li>\n<li>CCUメトリクス（同時接続数）</li>\n</ul></li>\n<li>1つのPrometheusでは厳しくなってきた\n<ul>\n<li>メトリクスの種類で分ける</li>\n<li>ターゲットで分ける</li>\n</ul></li>\n<li>HA Prometheus\n<ul>\n<li>メトリクスからMicroServicesを自動でスケーリングしたい</li>\n</ul></li>\n<li>Config書く運用が大変</li>\n<li>設定かえたら再起動</li>\n<li>Prometheus Operator\n<ul>\n<li>Configの自動生成（代わりにservice-monitorを記述）</li>\n<li>ホットリロード</li>\n</ul></li>\n<li>AlertManager\n<ul>\n<li>NodeのHighCPUUsageなどがあるとSlackに通知</li>\n</ul></li>\n<li>割といい感じにモニタリングできてきた</li>\n<li>が、まだ問題はいろいろある\n<ul>\n<li>k8sのyaml重複</li>\n<li>applyする順番</li>\n</ul></li>\n<li>Helm\n<ul>\n<li><a href=\"https://github.com/kubernetes/helm\">https://github.com/kubernetes/helm</a></li>\n<li>ロールバックとかも安心</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>トラフィックのリアルタイム可視化</h4>\n    \n<ul>\n<li>Prometheusのデータを可視化したい</li>\n<li>Promviz\n<ul>\n<li><a href=\"https://github.com/nghialv/promviz\">https://github.com/nghialv/promviz</a></li>\n<li><a href=\"https://github.com/mjhd-devlion/promviz-front\">https://github.com/mjhd-devlion/promviz-front</a></li>\n</ul></li>\n<li>さっきOSSにしました <- ！！</li>\n</ul><p>ものすごい知見大放出な感じはわかったけど、ほとんど理解できなかった・・。にしても優秀さがにじみ出てた・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>Microservices下におけるWebの負荷対策 -SSR×SPA×PWAへ向けて- by 大泉 明日香(@asukaleido)</h3>\n    \n    <blockquote>\n        <p><a href=\"https://speakerdeck.com/asukaleido/abematv-developer-conference-2017\">Microservices&#x4E0B;&#x306B;&#x304A;&#x3051;&#x308B;Web&#x306E;&#x8CA0;&#x8377;&#x5BFE;&#x7B56; / AbemaTV DEVELOPER CONFERENCE 2017 // Speaker Deck</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h4>事の発端</h4>\n    \n<ul>\n<li>亀田興毅の番組でWebが死\n<ul>\n<li>復帰も遅かった</li>\n</ul></li>\n<li>藤井4段のときも死\n<ul>\n<li>アプリが5分くらいで復活する中・・</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>それまでの構成</h4>\n    \n<ul>\n<li>Nginx x Node.js\n<ul>\n<li>Nginxはアセット、HTML</li>\n<li>Nodeは他サービスからgRPCでタイトルなどの情報をもらって返す</li>\n</ul></li>\n<li>WebはSPAなので後はAPIを叩くだけ</li>\n<li>しかし死</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>なぜ死んだか</h4>\n    \n<ul>\n<li>SPAの初期表示に必要なAPIが返ってこないと、ずっと真っ白</li>\n<li>NodeでgRPCを叩いてるがタイムアウト機構がない（ずっとPromiseを待つ）</li>\n<li>Nginxが詰まる</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>対策</h4>\n    \n<ul>\n<li>エラー処理</li>\n<li>gRPCコールのタイムアウト</li>\n<li>サーバーに頼らずスケーリングしたい\n<ul>\n<li>CDN</li>\n<li>制約もあるがコスパはいい選択肢</li>\n</ul></li>\n<li>まだ導入できておらず、CDNはこれから</li>\n<li>SSRとかもしたいしBFF整備とかも・・</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>Webでやりたいこと</h4>\n    \n<ul>\n<li>負荷対策 = パフォーマンス向上</li>\n<li>他のCAサービスに比べると劇的に遅い</li>\n<li>SSR、js分割など</li>\n<li>パフォーマンス改善に命を燃やす！</li>\n</ul><p>なんかもうフロントエンドだけで完結できる話ではないし、やっぱ広い目で見ないといかんなーという気持ち。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTVを支えるアプリの優しさ by 小形 昌樹</h3>\n    \n    <blockquote>\n        <p><a href=\"https://speakerdeck.com/ogaclejapan/abematv-devcon-2017\">abematv_devcon_2017 // Speaker Deck</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h4>優しさとは</h4>\n    \n<ul>\n<li>ユーザーへの優しさ\n<ul>\n<li>ネットワーク帯域</li>\n<li>バッテリー消費</li>\n<li>親切なアニメーション</li>\n</ul></li>\n<li>通信料をおさえること</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>プレイリスト取得しすぎ問題</h4>\n    \n<ul>\n<li>HLSのプレイリスト\n<ul>\n<li>Liveの場合、再取得の時にEXT-X-MEDIA-SEQUENCEが増える</li>\n</ul></li>\n<li>Adaptiveなのでマスターのプレイリストもある</li>\n<li>各セグメントは2秒なのに、Androidは0.6秒間隔で取ってた\n<ul>\n<li>Androidで使ってるExoPlayerのバグだった</li>\n<li><a href=\"https://github.com/google/ExoPlayer\">https://github.com/google/ExoPlayer</a></li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>画面に最適なビットレートとは</h4>\n    \n<ul>\n<li>横画面だけでなく縦画面にも対応</li>\n<li>Androidではマルチウィンドウにも対応</li>\n<li>ただフルHDの動画があっても、端末側が720Pなら無駄になる</li>\n<li>回線だけでなく、OSや画面幅によっても最適なビットレートを\n<ul>\n<li>古いAndroidは回線がよくても動画のデコードが弱かったりするし</li>\n<li>maxBitrateとして持っておいて、ExoPlayerに伝える</li>\n</ul></li>\n</ul><p>こういうサービス作るならこれくらいやってて欲しいよね・・ってのをちゃんとやってて優しみ・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>MPEG-DASHによるリニア型配信 by みゆっき(@toriimiyukki)</h3>\n    \n<div class=\"section\">\n    <h4>MPEG-DASHの基礎</h4>\n    \n<ul>\n<li>HLS\n<ul>\n<li>Apple産のHTTPベースのストリーミング方式</li>\n<li>Adobe産のRTMPとかの対抗馬として登場</li>\n<li>マスタープレイリストとメディアプレイリスト（`.m3u8`）</li>\n</ul></li>\n<li>DynamicAdaptiveStreaming over Http\n<ul>\n<li>各種規格があって大変、統一しよう！</li>\n<li>統一するはいいがカバー範囲が広範囲</li>\n<li>ABRだけでなくマルチストリーム、字幕、広告、DRM、etc...</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>MPDファイル解説</h4>\n    \n<ul>\n<li>`.mpd`のXMLファイル</li>\n<li>MPD\n<ul>\n<li>type: dynamic | static</li>\n<li>minBufferTime</li>\n<li>ISO Base media Profile\n<ul>\n<li>プロファイルにより、機能の実装を制限できる</li>\n</ul></li>\n</ul></li>\n<li>Period\n<ul>\n<li>番組の枠</li>\n<li>本編、CMとか</li>\n</ul></li>\n<li>AdaptionSet\n<ul>\n<li>コンテンツの種類（映像・音声）</li>\n<li>`mimeType`とか</li>\n</ul></li>\n<li>Segment\n<ul>\n<li>SegmentTemplate とかでも書ける</li>\n<li>セグメントへのパス</li>\n<li>SegmentTimeline</li>\n<li>`timescale`で割って算出される</li>\n</ul></li>\n<li>Representation\n<ul>\n<li>`id`が画質レベル</li>\n<li>さっきのTemplateにハマる変数</li>\n<li>帯域、コーデックの指定</li>\n<li>解像度別に</li>\n</ul></li>\n<li>M4S\n<ul>\n<li>`fmp4`</li>\n</ul></li>\n<li>HLSに比べると実装がすごく面倒くさい</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>リニア型配信</h4>\n    \n<ul>\n<li>番組表に基づいて配信すること</li>\n<li>DRMに対応した配信が必要だった\n<ul>\n<li>しかもデバイスによって異なる</li>\n<li>Apple / Google / Microsoft</li>\n<li>HLSとDASHをどちら使うことで、全てのパターンをカバー</li>\n</ul></li>\n<li>fMP4とmpdを別軸で作ってる\n<ul>\n<li>放送枠の時間が変わるから</li>\n<li>生放送の場合、TSからmp4にしてそこから動的にM4S</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>配信品質管理について</h4>\n    \n<ul>\n<li>HTTPのステータスコードだけ見てても、ストリーミング監視としては役立たない</li>\n<li>全チャンネルのHLSプレイリスト、DASHマニフェストを取得して監視するツールを作った</li>\n</ul><p>DASH、やっぱり奥行きが半端ないよなー・・ってか、新卒の発表て！天才かよ・・</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>AbemaTVの裏側 - 大規模トラフィックを支える技術と負荷対策の話 by 岡田 翔乃介(@rm_rf_slant)</h3>\n    \n<div class=\"section\">\n    <h4>負荷試験</h4>\n    \n<ul>\n<li>Locust と wrk を使ってる</li>\n<li>Locust\n<ul>\n<li><a href=\"https://github.com/locustio/locust\">https://github.com/locustio/locust</a></li>\n<li>Pythonの分散型ユーザー負荷テストツール</li>\n<li>WebUIからいろいろ見れる</li>\n<li>スケールできる</li>\n<li>GKEと相性がいい</li>\n<li>綿密なシナリオも定義できる</li>\n<li>大規模な試験には向いてる</li>\n</ul></li>\n<li>wrk\n<ul>\n<li><a href=\"https://github.com/wg/wrk\">https://github.com/wg/wrk</a></li>\n<li>LuaのHTTPベンチマークツール</li>\n<li>パラメータとURL指定するだけ</li>\n<li>レポートの集計まわりは自作が必要になる</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>試験用のデータ</h4>\n    \n<ul>\n<li>MongoDB Cloud Manager\n<ul>\n<li>元 MongoDB Management Service</li>\n<li>Snapshot</li>\n</ul></li>\n<li>Cloud Bigtable\n<ul>\n<li>Cloud DataflowからHadoopのシーケンスとしてエクスポートするしかない</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>その他</h4>\n    \n<ul>\n<li>AbemaBot\n<ul>\n<li>負荷試験環境もコスト</li>\n<li>本番と同じ構成で試験する</li>\n<li>なので使用する時しか使わないようにしたい</li>\n<li>定時に起動し忘れのLoad環境があればBotが通知</li>\n</ul></li>\n<li>Cloud CDN\n<ul>\n<li>これから</li>\n</ul></li>\n</ul><p>8割くらい理解できなかった・・けどきっとこれも知見大放出やったはず・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>おわりに</h3>\n    <p>お気づきの方もおおいでしょうが、専門外の分野すぎてメモの精度が微妙です。</p><p>専門外の分野の勉強会がこんなに消耗するもんだとは思わんかった・・けど、いろいろモチベーションも上がる会だったのでよかった。<br />\nやっぱフロントエンド以外のこともやってかないとダメよなー、はてさて・・。</p>\n\n</div>"
}
