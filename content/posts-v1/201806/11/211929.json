{
  "title": "WebRTC Meetup Tokyo #18 に行ってきたメモ #webrtcjp",
  "html": "\n    <blockquote>\n        <p><a href=\"https://atnd.org/events/96770\">WebRTC Meetup Tokyo #18 : ATND</a></p>\n\n    </blockquote>\n<p>台風な中、今回も海外スピーカーの多い回やった。</p><p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/YouTube\">YouTube</a>での配信もあったし<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AB%A5%A4%A5%D6\">アーカイブ</a>も公開されてるので、今からでも見れます！</p>\n\n    <blockquote>\n        <p><a href=\"https://www.youtube.com/watch?v=aVmCgVunfog\">WebRTC Meetup Tokyo #18 #webrtcjp - YouTube</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h3>Gone in 1100 seconds — The weirdest bug I have ever met\" by @daginge</h3>\n    <p>WebRTC Conferenceにきてたらしい！</p>\n\n<div class=\"section\">\n    <h4>Confrere</h4>\n    \n<ul>\n<li>WebRTCを使った<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D3%A5%C7%A5%AA%A5%C1%A5%E3%A5%C3%A5%C8\">ビデオチャット</a>のサービス\n<ul>\n<li><a href=\"https://confrere.com/\">Confrere - Video conversations with you clients, without the hassle</a></li>\n<li>リンクを共有するだけではじめられるよ</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Dashboard\">Dashboard</a>が便利だよ\n<ul>\n<li>誰が見てるかわかる</li>\n<li>マイクやカメラの様子とかも</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>18min 20sec</h4>\n    \n<ul>\n<li>いっつも18分でチャットが切れるというお問い合わせ\n<ul>\n<li>謎</li>\n</ul></li>\n<li>WebRTC開発はバグまみれでもあるけど・・\n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\">Safari</a>とか突然フリーズしてシャットダウンしたし</li>\n<li>某<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>端末とか赤外線カメラがデフォルトになる</li>\n</ul></li>\n<li>そんな中でも最も謎だった</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>どう<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0\">デバッグ</a>していくか</h4>\n    \n<ul>\n<li>便利なツールたち\n<ul>\n<li>RTCStats</li>\n<li>`<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/chrome\">chrome</a>://webrtc-internals`</li>\n<li><a href=\"https://fippo.github.io/webrtc-dump-importer/\">https://fippo.github.io/webrtc-dump-importer/</a></li>\n</ul></li>\n<li>だめなのは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> Edge</li>\n<li>まずは問題の通信ログを見ていった\n<ul>\n<li>特に通信が閉じた様子もなかった</li>\n</ul></li>\n<li>ハードから揃えて、再現環境を作った\n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Windows\">Windows</a>のLaptopでEdgeを使って</li>\n<li>したら再現した</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0\">デバッグ</a>の歩み</h4>\n    \n<ul>\n<li>1歩ずつ試していく\n<ul>\n<li>そしてどうなったかをドキュメントにしていく</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> Edgeがダメ</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>はOK</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Firefox\">Firefox</a> <-> Edgeもダメ</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> Edgeをappear.inで試すと動いた\n<ul>\n<li>これで問題は自分たちにあることがわかった</li>\n</ul></li>\n<li>違う日に、家の回線から試してみた</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> Edgeがなんと動いた\n<ul>\n<li>`iceTransportPolicy: 'relay'`にしたらダメだった</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> <-> Edgeをappear.in w/ TURNでやると動く</li>\n<li>これで自分たちのTURNに問題があることが切り分けできた</li>\n<li>TURNのログを見る</li>\n<li>`nonce`の設定が怪しい・・？\n<ul>\n<li>乱数的なもの</li>\n<li>定期的にリフレッシュされるべき値</li>\n</ul></li>\n<li>appear.inの中の人が友達なので聞いてみた\n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Microsoft\">Microsoft</a>のQAでそういう事象があったと聞いた</li>\n<li>しかも2017年の5月に</li>\n<li>けど界隈のどこにもその情報は残ってない</li>\n</ul></li>\n<li>coturn側で`stale-nonce`をdisabledにするしかないらしい</li>\n<li>やってみたらなおった！！</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>18minの裏側</h4>\n    \n<ul>\n<li>600secでnonceがinvalidに</li>\n<li>その後500secで通信が切れる\n<ul>\n<li>これはcoturnデフォルトのtimeout値らしい</li>\n</ul></li>\n<li>Edgeがnonceの更新をしてなくて、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>側は問題ないのにEdge側が切れる</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>質問</h4>\n    \n<ul>\n<li>最新のEdgeでもダメなの？\n<ul>\n<li>たぶんダメ（試してないけど</li>\n<li>直すの難しいんだろうと思う</li>\n</ul></li>\n</ul><p>これだからEdgeは・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>Autonomous WebRTC Clients: The Why and How by Sean Oxley @ DMM Eikaiwa</h3>\n    \n<div class=\"section\">\n    <h4>WebRTC <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a></h4>\n    \n<ul>\n<li>Videoの送受信ができる<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>\n<ul>\n<li>WebAPI経由で部屋に呼び出せるようになってる</li>\n<li>任意の動画を送りつけたり、録画したり</li>\n</ul></li>\n<li>これを、DMM英会話でどう使ってるかの話</li>\n<li>見えないピアとして会話に参加してる</li>\n<li>聞き専で入って、videoを<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\">AWS</a>に流す</li>\n<li>ただ帯域を食うのが玉にキズ</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>の用途</h4>\n    \n<ul>\n<li>レッスンの録画\n<ul>\n<li>レッスンは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/P2P\">P2P</a>なので、サーバーで録画とかできない</li>\n</ul></li>\n<li>ユーザー側で録画することも考えたが、\n<ul>\n<li>いつタブが閉じられるかと思うとこっち側で管理したい</li>\n</ul></li>\n<li>あとはテスト用途、モニタリング</li>\n<li>ユーザーの設定をチェックしたり</li>\n<li>純粋に英語の上達具合をあとから見返したり</li>\n<li>CrashMonitoring</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>の詳細</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/C%2B%2B\">C++</a> w/ libwebrtc</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\">API</a>のところは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ruby\">Ruby</a> / <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Sinatra\">Sinatra</a>\n<ul>\n<li>`/launch_<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/bot\">bot</a>`を叩くと、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>のプロセスがspawn</li>\n<li>1Botプロセスは同時に1部屋にしか入れない</li>\n</ul></li>\n<li>Docker on <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\">AWS</a>なので、スケールアップ・ダウンは簡単</li>\n<li>Realtimeと呼んでる独自<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%C8%A5%B3%A5%EB\">プロトコル</a>を解釈する\n<ul>\n<li>他のピアから命令される</li>\n</ul></li>\n<li>あとはいつものWebRTCな手順（Offer/Answer）</li>\n<li>libwebrtcつらい\n<ul>\n<li>が仕方ない</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\">AWS</a>いいけど、CPU使う処理には向かない\n<ul>\n<li>お金が・・</li>\n</ul></li>\n<li>クライアント向けにre-encodingするのを回避したい\n<ul>\n<li>built-inのDecoderをモック</li>\n<li>パケットをそのままパスして録画</li>\n<li>SDPのコーデックを固定したり調整</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>質問</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\">AWS</a>はLambda？\n<ul>\n<li>ちがうよ</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>は誰が呼ぶの？\n<ul>\n<li>先生が呼んだりすることもある</li>\n<li>なんか会話の調子が悪いときとかに調べてもらう</li>\n</ul></li>\n<li>libwebrtcの<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%EB\">コンパイル</a>めっちゃ大変なので、その<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Bot\">Bot</a>で使ってるバイナリとか周辺、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/OSS\">OSS</a>にしてくれません・・？\n<ul>\n<li>まだ開発中なので、この先は未定</li>\n<li>もしやるなら、大変なところは解消したい気持ちはある</li>\n</ul></li>\n<li>録画の帯域はどれくらい使ってる？\n<ul>\n<li>まだちゃんと決めてない</li>\n</ul></li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/H.264\">H.264</a>で<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/AWS\">AWS</a>にアップしてたけど、VP8じゃないの？\n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\">Safari</a>がいるから・・</li>\n</ul></li>\n</ul><p>こういう話聞くと、フロントエンドの<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\">API</a>がどうこうなんか大した問題ではないよなーと思う・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>Screen Mirroring Service with WebRTC by SangSoo Hong@Rsupport</h3>\n    <p>韓国のWebRTC界をリードしている起業です！とのこと。</p>\n\n<div class=\"section\">\n    <h4>はじめに</h4>\n    \n<ul>\n<li>IT業界にくるまえは、獣医だった</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A5%F3%A5%C1%A5%A6%A5%A4%A5%EB%A5%B9%A5%BD%A5%D5%A5%C8\">アンチウイルスソフト</a>作ってた</li>\n<li>いまはRsupportという会社で、Mobizenというのを作ってる\n<ul>\n<li><a href=\"https://www.mobizen.com/\">Mobizen | Your Android,&nbsp;Anywhere</a></li>\n<li>他にもWebRTCを使った商品はある</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>Mobizen</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>で使える画面<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DF%A5%E9%A1%BC%A5%EA%A5%F3%A5%B0\">ミラーリング</a>アプリ</li>\n<li>プレゼン機能もあって、そっちでWebRTCを使ってる</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB\">スマホ</a>の画面をPCに飛ばす</li>\n<li>ファイルを共有したり、ホワイトボードみたく使ったり</li>\n<li>上司からWebRTC使って簡単なプレゼン機能を作れと言われた</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>MobizenPT(PresenTation)</h4>\n    \n<ul>\n<li>Offer側はPC・モバイル\n<ul>\n<li>Edgeも<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\">Safari</a>も</li>\n</ul></li>\n<li>Answer側は<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>だけ</li>\n<li>もともとの<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DF%A5%E9%A1%BC%A5%EA%A5%F3%A5%B0\">ミラーリング</a>は、WebSocketで<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JPEG\">JPEG</a>を送ってた</li>\n<li>WebRTCにしたことで、各種コーデックを選んでvideo要素だけで表示できるように</li>\n<li>解像度も<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D3%A5%C3%A5%C8%A5%EC%A1%BC%A5%C8\">ビットレート</a>もconstraintsで指定できるようになった</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>デモ</h4>\n    \n<ul>\n<li>まだ開発中で韓国語のみ</li>\n<li>PC側で表示されたpinコードみたいな6桁を、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>で入力すると接続</li>\n<li>韓国にあるサーバーを経由</li>\n<li>Mobizen専用のイヤホンも<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Amazon\">Amazon</a>で売ってるよ</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>側の画面だけじゃなく、音も飛ばせるのがウリ</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>WebRTCは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DF%A5%E9%A1%BC%A5%EA%A5%F3%A5%B0\">ミラーリング</a>向きだったか</h4>\n    \n<ul>\n<li>採用してよかったと思う</li>\n<li>ブラウザさえあれば、OSも関係ないし<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3\">プラグイン</a>も不要</li>\n<li>デフォルトのコーデックも及第点</li>\n<li>本当は面倒な<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CA%A5%EA%A5%F3%A5%B0\">シグナリング</a>も、画一的な手順がちゃんとあるし</li>\n<li>ICEも賢いし、STUN/TURNでだいたいつながる</li>\n<li>`gUM()`のconstraintsで設定を変えられるのもいいよね</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>MobizenPTの今後</h4>\n    \n<ul>\n<li>商用化を目指してるわけでないけど、取り組みたいこと</li>\n<li>DataChannelでファイル共有</li>\n<li>PC画面の<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DF%A5%E9%A1%BC%A5%EA%A5%F3%A5%B0\">ミラーリング</a></li>\n<li>録画</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>つらいこと</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iOS\">iOS</a>が<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DF%A5%E9%A1%BC%A5%EA%A5%F3%A5%B0\">ミラーリング</a>をサポートしてない</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\">Safari</a>が<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/H.264\">H.264</a>しかサポートしてない</li>\n<li>EdgeにDataChannelがない</li>\n<li>なんか突然パケットが遅延する現象</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>質疑</h4>\n    \n<ul>\n<li>なんで技術選定がWebRTC縛りだったの？\n<ul>\n<li>小さい会社でCEOがほぼ主導してたのでそれで決まった</li>\n<li>そのおかげで2ヶ月くらいで作れた</li>\n</ul></li>\n</ul>\n</div>\n</div>\n<div class=\"section\">\n    <h3>WebRTCでロボット遠隔操作デ<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9\">バイス</a>作った話 by 今井 大介＋馬 英奎 @ Asratec Corp</h3>\n    <p>最後はロボットのデモ！</p>\n\n<div class=\"section\">\n    <h4>はじめに</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/V-Sido\">V-Sido</a>\n<ul>\n<li>駆動制御に特化した汎用ソフトウェア</li>\n<li><a href=\"https://www.asratec.co.jp/products/v-sido-os/\">V-Sido OS | &#x30A2;&#x30B9;&#x30E9;&#x30C6;&#x30C3;&#x30AF;&#x682A;&#x5F0F;&#x4F1A;&#x793E;</a></li>\n<li>たくさんのメーカーのロボットで使える</li>\n</ul></li>\n<li>最近の例だと、車から人型に変形するロボットとか</li>\n<li>以前のWebRTC Meetupで発表してた</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>過去の取り組み</h4>\n    \n<ul>\n<li>2015年: <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E2%A1%BC%A5%B7%A5%E7%A5%F3%A5%AD%A5%E3%A5%D7%A5%C1%A5%E3\">モーションキャプチャ</a>でロボを動かす仕組みの通信部分</li>\n<li>2016年: Pepperに<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/VR\">VR</a>ゴーグルで乗り移れるテレプレゼンスの仕組み\n<ul>\n<li>裏はSkyWay</li>\n</ul></li>\n<li>2017年: VRCon for Pepper</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>2018年の取り組み</h4>\n    \n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/V-Sido\">V-Sido</a> WebConnect\n<ul>\n<li><a href=\"https://www.asratec.co.jp/products/v-sido-webconnect/\">&#x9060;&#x9694;&#x30ED;&#x30DC;&#x30C3;&#x30C8;&#x30B3;&#x30F3;&#x30C8;&#x30ED;&#x30FC;&#x30E9;&#x300C;V-Sido WebConnect&#x300D; | &#x30A2;&#x30B9;&#x30E9;&#x30C6;&#x30C3;&#x30AF;&#x682A;&#x5F0F;&#x4F1A;&#x793E;</a></li>\n</ul></li>\n<li>ロボット制御用のWebRTC<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A2%A5%D7%A5%E9%A5%A4%A5%A2%A5%F3%A5%B9\">アプライアンス</a>BOX\n<ul>\n<li>RaspberryPiベース</li>\n<li>arm用にlibwebrtcをビルド</li>\n<li>M65くらいのmasterをク<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%ED%A5%B9%A5%B3%A5%F3\">ロスコン</a>パイル環境作ってやってる</li>\n</ul></li>\n<li>有線接続の延長ケーブル的な立ち位置\n<ul>\n<li>ロボもソフトも改修なしで対応できる</li>\n<li>ロボとBOX間は、WebSocketや<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/TCP\">TCP</a>/<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/UDP\">UDP</a>での接続も実績ある</li>\n</ul></li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>質問</h4>\n    \n<ul>\n<li>個人で買える？\n<ul>\n<li>今は売ってない</li>\n<li>何かと開発が必要になったりするので</li>\n<li>ただ個人からの声も多く聞くので、これから用意したいと思ってる</li>\n</ul></li>\n<li>ロボットとBOXは何でつながってる？\n<ul>\n<li>WebRTCのDataChannel</li>\n<li>ロボ・PCの両方にBOXが必要で、そこでシリアル <-> DC変換してる</li>\n</ul></li>\n<li>となるとWebRTCを使うメリットは？\n<ul>\n<li>LANを超えて遠隔操縦できるようになる</li>\n<li>Videoの転送もすごく楽になった</li>\n</ul></li>\n</ul><p>ロボットSUGEEE！</p>\n\n</div>\n</div>"
}
