{
  "title": "続・apple-mobile-web-app-capableの挙動について",
  "html": "<p>昔(2013年の9月)、こういう記事を書きました。</p>\n\n    <blockquote>\n        <p>参考: <a href=\"http://lealog.hateblo.jp/entry/2013/09/11/204515\" target=\"_blank\" title=\"apple-mobile-web-app-capableの挙動について\">apple-mobile-web-app-capableの挙動について</a></p>\n\n    </blockquote>\n<p>で、久々にどうなったかなーと思って試してみたんですけど、また仕様が変わってるっぽくて・・。<br />\nというのをメモ。</p><p>iPhone5s x iOS7でチェック。</p>\n\n<div class=\"section\">\n    <h3>前回調べた時点での挙動</h3>\n    <p>いったんstandaloneモードになってしまえば、</p>\n\n<ul>\n<li>同ドメインは、\"aタグで遷移しても継続できる\"</li>\n<li>別ドメインであっても、location.hrefで飛ばせば継続できる</li>\n<li>別ドメインへのaタグは、継続できない</li>\n</ul><p>って感じでした。</p>\n\n</div>\n<div class=\"section\">\n    <h3>今回調べた時点での挙動</h3>\n    <p>いったんstandaloneモードになってしまえば、</p>\n\n<ul>\n<li>別ドメインであっても、location.hrefで飛ばせば継続できる</li>\n<li>同ドメインでも、\"aタグで遷移すると継続できない\"</li>\n<li>別ドメインへのaタグは、継続できない</li>\n</ul><p>って感じに。<br />\nさらばaタグ。</p>\n\n</div>\n<div class=\"section\">\n    <h3>つまり</h3>\n    <p>以下の表で、 o のパターンなら継続できる模様。</p>\n\n<table>\n    <tr>\n    <th>　</th>\n    <th>同ドメイン</th>\n    <th>別ドメイン</th>\n    </tr>\n    <tr>\n    <th>aタグ</th>\n    <td>x</td>\n    <td>x</td>\n    </tr>\n    <tr>\n    <th>location.href</th>\n    <td>o</td>\n    <td>o</td>\n    </tr>\n</table><p>standaloneモードにするなら、ページ遷移は全部jsでがんばれという話ですね。</p><p>まあ仕様が変わったっていうか、元からそういう仕様だった気がする。<br />\n去年がたまたま変な時期やったってだけで。</p><p>location.href での遷移なら、別ドメインにとんでも継続する！おっけー！って、<br />\n帰ってこれないからまったく意味ないですね。</p>\n\n</div>\n<div class=\"section\">\n    <h3>すごく適当に書いたコードスニペット</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">if</span> (<span class=\"synStatement\">window</span>.navigator.standalone) <span class=\"synIdentifier\">{</span>\n  $(<span class=\"synConstant\">'a'</span>).on(<span class=\"synConstant\">'touchend'</span>, <span class=\"synIdentifier\">function</span>(e) <span class=\"synIdentifier\">{</span>\n    e.preventDefault();\n    <span class=\"synStatement\">location</span>.href = e.target.href;\n    <span class=\"synStatement\">return</span> <span class=\"synConstant\">false</span>;\n  <span class=\"synIdentifier\">}</span>);\n<span class=\"synIdentifier\">}</span>\n</pre><p>これで通常はaタグで、mobileでstandaloneのときはlocationで、ってできますね。</p>\n\n</div>\n<div class=\"section\">\n    <h3>その他気になる点</h3>\n    \n<ul>\n<li>iOS7いいねポイントである、「スワイプでブラウザバック」が効かない(そらまあjsでやってるし)</li>\n<li>ステータスバーのスタイルいじるmetaタグ、iOS7では効かない？表示が変？</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h3>結論</h3>\n    <p>やっぱコレあんまり好きくないわー。</p>\n\n</div>"
}
