{
  "title": "Firefox 68ã‹ã‚‰ç©ºæ–‡å­—åˆ—ã®candidateãŒç™ºè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«",
  "html": "<p>ãªã‚Šã¾ã™ã€‚</p>\n\n<ul>\n<li>ã¤ã¾ã‚Šã©ã†ã„ã†ã“ã¨ã§</li>\n<li>ã©ã†ã„ã†å ´åˆã«å›°ã‚‹ã‹</li>\n<li>ãã‚‚ãã‚‚ã©ã†ã„ã†ã“ã¨ã‹</li>\n</ul><p>ã¿ãŸã„ãªã®ã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>ç©ºæ–‡å­—åˆ—ã®candidate</h3>\n    <p>WebRTCã®RTCPeerConnectionã§ã€é€šä¿¡ã«ä½¿ã†çµŒè·¯ã®å€™è£œãŒè¦‹ã¤ã‹ã£ãŸã¨ãã®è©±ã§ã™ã€‚</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">const</span> pc = <span class=\"synStatement\">new</span> RTCPeerConnection();\n\npc.addEventListener(<span class=\"synConstant\">'icecandidate'</span>, ev =&gt; <span class=\"synIdentifier\">{</span>\n  <span class=\"synComment\">// ã‚³ãƒ¬</span>\n  ev.candidate;\n<span class=\"synIdentifier\">}</span>);\n</pre><p>ã“ã®`ev.candidate`ã«å€™è£œæƒ…å ±ãŒå…¥ã£ã¦ã¦ã€åŸºæœ¬çš„ã«ã¯ã‚³ãƒ¬ã‚’ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã™ã‚‹ã€‚<br />\nå—ã‘å–ã£ãŸå´ã¯ã€`addIceCandidate()`ã§ãã‚Œã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã€‚</p><p>ã§ã€ç¾çŠ¶ã®Firefox 67ã‚„ã€Chrome/Safariãªã©ãªã©ã¯ã€`icecandidate`ã‚¤ãƒ™ãƒ³ãƒˆã§2ãƒ‘ã‚¿ãƒ¼ãƒ³ã®`candidate`ã‚’ç™ºè¡Œã—ã¦ã¾ã—ãŸã€‚</p><p>ã¤ã¾ã‚Š`ev.candidate`ãŒã€</p>\n\n<ul>\n<li>`RTCIceCandidate`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€å„ç¨®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè©°ã¾ã£ãŸã‚‚ã®</li>\n<li>`null`</li>\n</ul><p>ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã£ãŸã€‚</p><p>ãã“ã«ä»Šå›ã€</p>\n\n<ul>\n<li>`RTCIceCandidate`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€`candidate`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒç©ºæ–‡å­—åˆ—ã®ã‚‚ã®</li>\n</ul><p>ã¨ã„ã†3ãƒ‘ã‚¿ãƒ¼ãƒ³ç›®ãŒè¿½åŠ ã•ã‚Œã‚‹ã¨ã„ã†ã‚ã‘ã€‚</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">{</span>\n  candidate: <span class=\"synConstant\">&quot;&quot;</span>, <span class=\"synComment\">// ğŸ‘€</span>\n  sdpMLineIndex: 0,\n  sdpMid: <span class=\"synConstant\">&quot;0&quot;</span>,\n  usernameFragment: <span class=\"synConstant\">&quot;26d84f30&quot;</span>\n<span class=\"synIdentifier\">}</span>\n</pre><p>ã“ã†ã„ã†ã‚„ã¤ã€‚</p>\n\n</div>\n<div class=\"section\">\n    <h3>ã©ã†ã„ã†å ´åˆã«å›°ã‚‹ã‹</h3>\n    <p>ä»Šã¾ã§ã¯`null`ã‹`RTCIceCandidate`ã‹ã©ã£ã¡ã‹ã ã£ãŸã®ã§ã€ã“ã†ã„ã†ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ãŸã¯ãšã€‚</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">const</span> pc = <span class=\"synStatement\">new</span> RTCPeerConnection();\n\npc.addEventListener(<span class=\"synConstant\">'icecandidate'</span>, ev =&gt; <span class=\"synIdentifier\">{</span>\n  <span class=\"synComment\">// null ã§ãªã„ãªã‚‰ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã—ã¦ addIceCandidate() ã™ã‚‹</span>\n  <span class=\"synStatement\">if</span> (ev.candidate !== <span class=\"synStatement\">null</span>) <span class=\"synIdentifier\">{</span>\n    signaling.send(<span class=\"synConstant\">'candidate'</span>, ev.candidate);\n  <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>);\n</pre><p>ã“ã†ã—ã¦ãŸç†ç”±ã¯ã€ãã‚‚ãã‚‚ä¸è¦ãªä¸Šã«`addIceCandidate(null)`ãŒã©ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ãŸã‹ã‚‰ã€‚</p><p>ã§ã€ä»Šå›ã®å•é¡Œã¯ã€ä»Šå›è¿½åŠ ã•ã‚Œã‚‹ã‚„ã¤ãŒã“ã®æ¡ä»¶ã‚’ããã‚ŠæŠœã‘ã¦ãã‚‹ + Firefox 68ä»¥å¤–ã§ã¯å‹•ã‹ãªã„ã€‚</p>\n\n    <blockquote>\n        <p>978582 - addIceCandidate({candidate: \"\", sdpMLineIndex: 0 })) throws an error - chromium - Monorail - <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=978582\">https://bugs.chromium.org/p/chromium/issues/detail?id=978582</a></p>\n\n    </blockquote>\n<p>ã“ã‚ŒãŒChromeå´ã«å¯„ã›ã‚‰ã‚ŒãŸãƒã‚°å ±å‘Šã§ã€ã“ã£ã¡ã¯Firefoxå´ã®ãŠæ°—æŒã¡ã€‚</p>\n\n    <blockquote>\n        <p>1562281 - Interop: Chrome/Safari rejects the RTCIceCandidate (>=68) with the empty candidate string. - <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1562281\">https://bugzilla.mozilla.org/show_bug.cgi?id=1562281</a></p>\n\n    </blockquote>\n<p>åŒSafariã€‚</p>\n\n    <blockquote>\n        <p>199316 â€“ addIceCandidate({candidate: \"\", sdpMLineIndex: 0 })) throws an error - <a href=\"https://bugs.webkit.org/show_bug.cgi?id=199316\">https://bugs.webkit.org/show_bug.cgi?id=199316</a></p>\n\n    </blockquote>\n\n</div>\n<div class=\"section\">\n    <h3>ã©ã†ã™ã‚Œã°ã„ã„ã‹</h3>\n    <p>ç«¯çš„ã«ã¯ã€`null`ã¨ä¸€ç·’ã§ç„¡è¦–ã™ã‚Œã°ã„ã„ã€‚</p><p>å®Ÿéš›ã®å‹•ä½œã«ã¯å½±éŸ¿ãªã„ã—ã€‚</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">const</span> pc = <span class=\"synStatement\">new</span> RTCPeerConnection();\n\npc.addEventListener(<span class=\"synConstant\">'icecandidate'</span>, ev =&gt; <span class=\"synIdentifier\">{</span>\n  <span class=\"synStatement\">if</span> (ev.candidate &amp;&amp; ev.candidate.candidate !== <span class=\"synConstant\">''</span>) <span class=\"synIdentifier\">{</span>\n    signaling.send(<span class=\"synConstant\">'candidate'</span>, ev.candidate);\n  <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>);\n\n<span class=\"synComment\">// or å—ã‘å–ã‚Šå´ã§ addIceCandidate() å‰ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã§ã‚‚</span>\n</pre>\n</div>\n<div class=\"section\">\n    <h3>nullã¨ã®é•ã„</h3>\n    <p>ã“ã“ã‹ã‚‰ãŠã•ã‚‰ã„ã‚³ãƒ¼ãƒŠãƒ¼ã€‚</p><p>`null`ã¨ç©ºæ–‡å­—åˆ—ã®é•ã„ã£ã¦ä½•ï¼Ÿãªãœä»Šã“ã‚“ãªä¿®æ­£ã‚’ï¼Ÿã¨ã„ã†äººå‘ã‘ã€‚<br />\nç­”ãˆã¯Specã«ã€‚</p>\n\n    <blockquote>\n        <p>WebRTC 1.0: Real-time Communication Between Browsers - <a href=\"https://www.w3.org/TR/webrtc/#dom-rtcicecandidate-candidate\">https://www.w3.org/TR/webrtc/#dom-rtcicecandidate-candidate</a></p>\n\n    </blockquote>\n<p>ã–ã£ãã‚Šè¨³ã—ã¦ãŠãã€‚</p>\n\n    <blockquote>\n        <p>The icecandidate event is used for three different types of indications:</p>\n\n    </blockquote>\n<p>icecandidateã‚¤ãƒ™ãƒ³ãƒˆã«ã¯ã€3ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ„å‘³ãŒã‚ã‚‹ã€‚</p>\n\n    <blockquote>\n        <p>A candidate has been gathered. The candidate member of the event will be populated normally. It should be signaled to the remote peer and passed into addIceCandidate.</p>\n\n    </blockquote>\n<p>é€šå¸¸é€šã‚Š`candidate`ãŒåé›†ã•ã‚ŒãŸã¨ãã€‚ ãƒªãƒ¢ãƒ¼ãƒˆã«ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã•ã‚Œã¦ã€`addIceCandidate()`ã•ã‚Œã‚‹ã€‚</p>\n\n    <blockquote>\n        <p>An RTCIceTransport has finished gathering a generation of candidates, and is providing an end-of-candidates indication as defined by Section 8.2 of [TRICKLE-ICE]. This is indicated by candidate.candidate being set to an empty string. The candidate object should be signaled to the remote peer and passed into addIceCandidate like a typical ICE candidate, in order to provide the end-of-candidates indication to the remote peer.</p>\n\n    </blockquote>\n<p>ãã®`RTCIceTransport`ãŒå€™è£œåé›†ã‚’çµ‚ãˆã¦ã€TrickleICEã®ä»•æ§˜ã«ã‚ã‚‹ã‚ˆã†ã«`end-of-candidates`ã®æ„ã‚’è¡¨æ˜ã™ã‚‹ã¨ãã€‚<br />\nã“ã®ã¨ãã€`candidate.candidate`ãŒç©ºæ–‡å­—åˆ—ã«ãªã‚Šã€ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã•ã‚Œã¦`addIceCandidate()ã•ã‚Œã‚‹ã€‚`</p>\n\n    <blockquote>\n        <p>All RTCIceTransports have finished gathering candidates, and the RTCPeerConnection's RTCIceGatheringState has transitioned to \"complete\". This is indicated by the candidate member of the event being set to null. This only exists for backwards compatibility, and this event does not need to be signaled to the remote peer. It's equivalent to an \"icegatheringstatechange\" event with the \"complete\" state.</p>\n\n    </blockquote>\n<p>ã™ã¹ã¦ã®`RTCIceTransport`ã§å€™è£œåé›†ãŒçµ‚ã‚ã£ã¦ã€`RTCPeerConnection`ã®`iceGatheringState`ãŒ`complete`ã«ãªã‚‹ã¨ãã€‚<br />\nã“ã®ã¨ãã€`null`ãŒç™ºè¡Œã•ã‚Œã‚‹ã€‚<br />\nã“ã‚Œã¯ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã™ã‚‹å¿…è¦ã¯ãªãã€`icegatheringstatechange`ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã‚‹ãªã‚‰ä¸è¦ã§ã¯ã‚ã‚‹ãŒã€å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã«æ®‹ã£ã¦ã‚‹ã€‚</p><p>ç©ºæ–‡å­—åˆ—ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã€`sdpMid`ã¨ã‹`sdpMLineIndex`ãŒã¡ã‚ƒã‚“ã¨ã¤ã„ã¦ã‚‹ã®ã¯ãã†ã„ã†ãƒ¯ã‚±ã§ã—ãŸã¨ã•ã€‚</p><p>ã¾ãæ˜¨ä»Šã®ãƒˆãƒ¬ãƒ³ãƒ‰ã¨ã—ã¦ã¯ã€åŸºæœ¬çš„ã«ã™ã¹ã¦ã‚’1ã¤ã«BUNDLEã™ã‚‹ã—ã€`end-of-candidates`ãªã‚“ã¦å¾…ã£ã¦ãªã„ã‚“ã‚„ã‘ã©ãƒ»ãƒ»ã€‚</p>\n\n</div>\n<div class=\"section\">\n    <h3>ãŠã¾ã‘</h3>\n    <p>è›‡è¶³ã§ã™ãŒã€Firefox 68ãªã‚‰ `addIceCandidate(null)` ã‚‚ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼</p>\n\n</div>"
}
