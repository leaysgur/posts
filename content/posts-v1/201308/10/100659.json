{
  "title": "一定間隔でクラス名を付与していくJavaScriptのコード",
  "html": "<p>こういうの、コードスニペットって言うんかしら？</p><p>・特定の要素に順番にクラスを付与したい<br />\n・特定の要素の一つにだけクラスを付与したい</p><p>フィードの仕組みとか、イメージギャラリーの仕組みとかですね。<br />\n最近は表示・非表示系をCssでやるようになってるので、クラスの付け替えだけで簡単にソレが実現できますよねー。</p>\n\n<div class=\"section\">\n    <h3>コード</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>;(<span class=\"synIdentifier\">function</span>(global) <span class=\"synIdentifier\">{</span>\n\n  <span class=\"synIdentifier\">var</span> ClassCycler = <span class=\"synIdentifier\">function</span>(opt) <span class=\"synIdentifier\">{</span>\n\n    <span class=\"synIdentifier\">var</span> timer,\n    execCycle = (<span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n      <span class=\"synIdentifier\">var</span> $item = opt.$targetElm,\n      index = 0,\n      max = $item.length;\n\n      <span class=\"synStatement\">return</span> <span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n        <span class=\"synStatement\">if</span> (!opt.oneWay) <span class=\"synIdentifier\">{</span>\n          $item.removeClass(opt.cycleClassName);\n        <span class=\"synIdentifier\">}</span>   \n\n        $item.eq(index).addClass(opt.cycleClassName);\n        index = (++index === max) ? 0 : index;\n\n        <span class=\"synStatement\">if</span> (opt.oneWay &amp;&amp;  index === 0) <span class=\"synIdentifier\">{</span>\n          global.clearInterval(timer);\n        <span class=\"synIdentifier\">}</span>   \n      <span class=\"synIdentifier\">}</span>;  \n\n    <span class=\"synIdentifier\">}</span>());\n\n    <span class=\"synComment\">// 即実行したいなら</span>\n    opt.startImmediate &amp;&amp; execCycle();\n    timer = global.setInterval(execCycle, opt.duration);\n\n  <span class=\"synIdentifier\">}</span>;  \n  global.ClassCycler = ClassCycler;\n\n<span class=\"synIdentifier\">}</span>(<span class=\"synIdentifier\">this</span>.<span class=\"synStatement\">self</span> || global));\n</pre><p>短いので、引数はそのまま使っちゃいます。</p>\n\n</div>\n<div class=\"section\">\n    <h3>使い方</h3>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;js-shown-item&quot;</span><span class=\"synIdentifier\">&gt;&lt;</span><span class=\"synStatement\">img</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;example1.png&quot;</span><span class=\"synIdentifier\">/&gt;&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;js-shown-item&quot;</span><span class=\"synIdentifier\">&gt;&lt;</span><span class=\"synStatement\">img</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;example2.png&quot;</span><span class=\"synIdentifier\">/&gt;&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;js-shown-item&quot;</span><span class=\"synIdentifier\">&gt;&lt;</span><span class=\"synStatement\">img</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;example3.png&quot;</span><span class=\"synIdentifier\">/&gt;&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>こんな感じのHtmlを用意して、</p>\n<pre class=\"code lang-css\" data-lang=\"css\" data-unlink><span class=\"synIdentifier\">.js-shown-item</span> <span class=\"synIdentifier\">{</span> opacity: <span class=\"synConstant\">0</span>; <span class=\"synType\">position</span>: <span class=\"synType\">absolute</span>; <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.js-shown-item.selected</span> <span class=\"synIdentifier\">{</span> opacity: <span class=\"synConstant\">1</span>; <span class=\"synIdentifier\">}</span>\n</pre><p>こんなCssを用意したら、</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>$(<span class=\"synIdentifier\">function</span>()<span class=\"synIdentifier\">{</span>\n  <span class=\"synStatement\">new</span> ClassCycler(<span class=\"synIdentifier\">{</span>\n    $targetElm     : $(<span class=\"synConstant\">'.js-shown-item'</span>), <span class=\"synComment\">// どの要素にクラスを付与したいか</span>\n    cycleClassName : <span class=\"synConstant\">'selected'</span>,            <span class=\"synComment\">// なんてクラス名を付与するのか</span>\n    duration       : 1000,                        <span class=\"synComment\">// どんな間隔で付与するか</span>\n    startImmediate : <span class=\"synConstant\">true</span>,                      <span class=\"synComment\">// 初期状態から1つ目に付与するのか</span>\n    oneWay         : <span class=\"synConstant\">false</span>                         <span class=\"synComment\">// 付け替えじゃなくて、片道だけ付けて終わりたいか</span>\n  <span class=\"synIdentifier\">}</span>);\n <span class=\"synIdentifier\">}</span>);\n</pre><p>こうするだけで、できあがり。<br />\nCssで transition とかつければ、それだけでそれっぽく・・・！</p><p>っていうメモ。</p>\n\n    <blockquote>\n        <p>#TODO: オプションの受け方が雑、Zepto/jQuery依存</p>\n\n    </blockquote>\n\n</div>"
}
