{
  "title": "display: noneはtransitionできないので",
  "html": "\n    <blockquote>\n        <p>参考：<a href=\"http://stackoverflow.com/questions/3331353/transitions-on-the-display-property\" target=\"_blank\" title=\"css - Transitions on the display: property - Stack Overflow\">css - Transitions on the display: property - Stack Overflow</a></p>\n\n    </blockquote>\n<p>そのへんで拾ったアコーディオンのライブラリとかでよく見るやつ。<br />\nもはや<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DE%A1%BC%A5%AF%A5%A2%A5%C3%A5%D7\">マークアップ</a>あるあるですよね。</p><p>displayじゃダメなので、他のプロパティで攻めましょう、っていう。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>transitionできるプロパティ</h3>\n    \n    <blockquote>\n        <p>参考：<a href=\"http://www.w3.org/TR/css3-transitions/#animatable-properties-\" target=\"_blank\" title=\"CSS Transitions\">CSS Transitions</a></p>\n\n    </blockquote>\n<p>色とか長さとか、数値で表現できるっぽいやつはだいたいOKな感じ。</p>\n\n</div>\n<div class=\"section\">\n    <h3>代替案を書いてみる</h3>\n    <p>クラス名で切り替えるアコーディオンとか、ありがちなケースで。</p>\n\n<div class=\"section\">\n    <h4>元ネタ</h4>\n    \n<div class=\"section\">\n    <h5>Html</h5>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span>section<span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;accordion&quot;</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>Accordion 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span>section<span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span>section<span class=\"synIdentifier\"> </span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;accordion&quot;</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>Accordion 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n        <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>Sample li 1<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n    <span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">ul</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span>section<span class=\"synIdentifier\">&gt;</span>\n</pre>\n</div>\n<div class=\"section\">\n    <h5><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a></h5>\n    <pre class=\"code lang-css\" data-lang=\"css\" data-unlink><span class=\"synIdentifier\">.accordion</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">text-align</span>: <span class=\"synType\">center</span>;\n    <span class=\"synType\">margin-bottom</span>: <span class=\"synConstant\">16px</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">h1</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">font-weight</span>: <span class=\"synConstant\">900</span>;\n    <span class=\"synType\">height</span>: <span class=\"synConstant\">44px</span>;\n    <span class=\"synType\">line-height</span>: <span class=\"synConstant\">44px</span>;    \n    <span class=\"synType\">background-color</span>: <span class=\"synConstant\">#000</span>;\n    <span class=\"synType\">color</span>: <span class=\"synConstant\">#fff</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">display</span>: <span class=\"synType\">none</span>;\n    -webkit-transition: <span class=\"synType\">all</span> <span class=\"synConstant\">1s</span> ease-out;<span class=\"synComment\">/* displayには効かない！ */</span>\n    transition: <span class=\"synType\">all</span> <span class=\"synConstant\">1s</span> ease-out;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span><span class=\"synIdentifier\">.active</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">display</span>: <span class=\"synType\">block</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">li</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">height</span>: <span class=\"synConstant\">44px</span>;\n    <span class=\"synType\">line-height</span>: <span class=\"synConstant\">44px</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">li</span>:nth-child(odd) <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">background-color</span>: <span class=\"synConstant\">#eee</span>;\n<span class=\"synIdentifier\">}</span>\n</pre>\n</div>\n<div class=\"section\">\n    <h5><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a></h5>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// jQuery or something loaded...</span>\njQuery(<span class=\"synIdentifier\">function</span>(win, $)<span class=\"synIdentifier\">{</span>\n    <span class=\"synIdentifier\">var</span> doc = win.<span class=\"synStatement\">document</span>,\n        accordions = $(<span class=\"synConstant\">'.accordion'</span>),\n        accordionObj = <span class=\"synIdentifier\">{}</span>;\n\n    <span class=\"synIdentifier\">var</span> Accordion = <span class=\"synIdentifier\">function</span>(accordion)<span class=\"synIdentifier\">{</span>\n        <span class=\"synIdentifier\">var</span> <span class=\"synStatement\">self</span> = $(accordion),\n            trigger = <span class=\"synStatement\">self</span>.find(<span class=\"synConstant\">'h1'</span>),\n            target = trigger.next();\n\n        trigger.on(<span class=\"synConstant\">'click'</span>, <span class=\"synIdentifier\">function</span>()<span class=\"synIdentifier\">{</span>\n            target.toggleClass(<span class=\"synConstant\">'active'</span>);\n        <span class=\"synIdentifier\">}</span>);\n    <span class=\"synIdentifier\">}</span>;\n\n    accordions.each(<span class=\"synIdentifier\">function</span>(id, accordion)<span class=\"synIdentifier\">{</span>\n        accordionObj<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'accordion-'</span> + id<span class=\"synIdentifier\">]</span> = <span class=\"synStatement\">new</span> Accordion(accordion);\n    <span class=\"synIdentifier\">}</span>);\n\n<span class=\"synIdentifier\">}</span>(<span class=\"synIdentifier\">this</span>, jQuery));\n</pre><p>ちゃんと動作するけど、No Transition！<br />\nほんとはもうちょっときっちり書いた方がいい気もする。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h4>代替案</h4>\n    <p>displayがダメなのであれば、heightで攻めてみる。</p>\n\n<div class=\"section\">\n    <h5><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Css\">Css</a></h5>\n    <pre class=\"code lang-css\" data-lang=\"css\" data-unlink><span class=\"synComment\">/* ... */</span>\n\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">height</span>: <span class=\"synConstant\">0px</span>;<span class=\"synComment\">/* heightだけでもいいけど */</span>\n    opacity: <span class=\"synConstant\">0</span>;<span class=\"synComment\">/* transitionっぽくするならコレも */</span>\n    <span class=\"synType\">overflow</span>: <span class=\"synType\">hidden</span>;\n    -webkit-transition: <span class=\"synType\">all</span> <span class=\"synConstant\">1s</span> ease-out;\n    transition: <span class=\"synType\">all</span> <span class=\"synConstant\">1s</span> ease-out;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">.accordion</span> <span class=\"synSpecial\">&gt;</span> <span class=\"synStatement\">ul</span><span class=\"synIdentifier\">.active</span> <span class=\"synIdentifier\">{</span>\n    <span class=\"synType\">height</span>: <span class=\"synType\">auto</span>;\n    opacity: <span class=\"synConstant\">1</span>;\n<span class=\"synIdentifier\">}</span>\n\n<span class=\"synComment\">/* ... */</span>\n</pre><p>というわけで、無事にfadeToggleっぽくなった！</p><p>slideToggle()にしたい場合はたぶん、</p>\n\n<ul>\n<li>newした時に要素の高さも取得する</li>\n<li>クリックイベントに貼るのはtoggleClassじゃなくてwhile(高さ){高さ--}みたいな関数</li>\n</ul><p>ってすればいけるかな？</p><p>と思って適当に書いたらすごくいやな感じになったｗ</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// jQuery or something loaded...</span>\njQuery(<span class=\"synIdentifier\">function</span>(win, $)<span class=\"synIdentifier\">{</span>\n    <span class=\"synIdentifier\">var</span> doc = win.<span class=\"synStatement\">document</span>,\n        accordions = $(<span class=\"synConstant\">'.accordion'</span>),\n        accordionObj = <span class=\"synIdentifier\">{}</span>;\n\n    <span class=\"synIdentifier\">var</span> Accordion = <span class=\"synIdentifier\">function</span>(accordion)<span class=\"synIdentifier\">{</span>\n        <span class=\"synIdentifier\">var</span> <span class=\"synStatement\">self</span> = $(accordion),\n            trigger = <span class=\"synStatement\">self</span>.find(<span class=\"synConstant\">'h1'</span>),\n            target = trigger.next(),\n            isActive = <span class=\"synConstant\">false</span>,\n            height = target.height();\n\n        trigger.on(<span class=\"synConstant\">'click'</span>, <span class=\"synIdentifier\">function</span>()<span class=\"synIdentifier\">{</span>\n            <span class=\"synComment\">/* ------------- </span><span class=\"synTodo\">TODO</span><span class=\"synComment\">: どうにかしたい ------------ */</span>\n            <span class=\"synIdentifier\">var</span> counter = (isActive) ? height : 0;\n            <span class=\"synStatement\">if</span>(isActive)<span class=\"synIdentifier\">{</span>\n                <span class=\"synStatement\">while</span>(counter)<span class=\"synIdentifier\">{</span>\n                    target.height(counter);\n                    counter--;\n                <span class=\"synIdentifier\">}</span>\n            <span class=\"synIdentifier\">}</span><span class=\"synStatement\">else</span><span class=\"synIdentifier\">{</span>\n                <span class=\"synStatement\">while</span>(counter &lt; height)<span class=\"synIdentifier\">{</span>\n                    target.height(counter);\n                    counter++;\n                <span class=\"synIdentifier\">}</span>                \n            <span class=\"synIdentifier\">}</span>\n            isActive = !isActive;\n            <span class=\"synComment\">/* ------------- </span><span class=\"synTodo\">TODO</span><span class=\"synComment\">: どうにかしたい ------------ */</span>\n        <span class=\"synIdentifier\">}</span>);\n\n        target.height(0);\n        isActive = <span class=\"synConstant\">false</span>;\n    <span class=\"synIdentifier\">}</span>;\n\n    accordions.each(<span class=\"synIdentifier\">function</span>(id, accordion)<span class=\"synIdentifier\">{</span>\n        accordionObj<span class=\"synIdentifier\">[</span><span class=\"synConstant\">'accordion-'</span> + id<span class=\"synIdentifier\">]</span> = <span class=\"synStatement\">new</span> Accordion(accordion);\n    <span class=\"synIdentifier\">}</span>);\n\n<span class=\"synIdentifier\">}</span>(<span class=\"synIdentifier\">this</span>, jQuery));\n</pre><p>・・・精進が足りませんね。</p><p></p>\n\n    <blockquote>\n        <p>まぁ、<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/jQuery\">jQuery</a>使ってるならslideToggle()とかfadeToggle()とかすれば良いんやけど、もっと軽いライブラリを選んでるケースもあるよねー。</p>\n\n    </blockquote>\n\n</div>\n</div>\n</div>\n</div>"
}
