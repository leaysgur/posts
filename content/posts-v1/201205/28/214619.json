{
  "title": "Handlebars.jsとTwitter Search APIを使ったサンプル",
  "html": "<p>いま絶賛勉強中のHandlebars.jsを使って、TwitterのAPIを絡めたサンプルを。<br />\nHandlebars.jsについては、また備忘録を残そうかと思ってます。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>概要</h3>\n    \n<ul>\n<li>TwitterのSearch APIを叩く</li>\n<li>取得したjsonを、Handlebarsのテンプレに流しこむ</li>\n</ul><p>簡単！</p>\n\n</div>\n<div class=\"section\">\n    <h3>ソース</h3>\n    \n<div class=\"section\">\n    <h4>Html / Css</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">html</span><span class=\"synIdentifier\"> </span><span class=\"synType\">lang</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;ja&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">head</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">meta</span><span class=\"synIdentifier\"> </span><span class=\"synType\">http-equiv</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;content-type&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">content</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text/html; charset=UTF-8&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">title</span><span class=\"synIdentifier\">&gt;</span>Handlebars x Twitter API<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">title</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">style</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synStatement\">body</span><span class=\"synIdentifier\">{</span>\n  <span class=\"synType\">text-align</span>: <span class=\"synType\">center</span>;\n  <span class=\"synType\">margin</span>: <span class=\"synConstant\">0</span>;\n  <span class=\"synType\">padding</span>: <span class=\"synConstant\">0</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">#container{</span>\n  <span class=\"synType\">width</span>: <span class=\"synConstant\">50%</span>;\n  <span class=\"synType\">margin</span>: <span class=\"synConstant\">0</span> <span class=\"synType\">auto</span>;\n  <span class=\"synType\">padding</span>: <span class=\"synConstant\">20px</span>;\n  <span class=\"synType\">background</span>: <span class=\"synConstant\">#eee</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synSpecial\">.</span>tweets<span class=\"synIdentifier\">{</span>\n  <span class=\"synType\">clear</span>: <span class=\"synType\">both</span>;\n  <span class=\"synType\">height</span>: <span class=\"synConstant\">42px</span>;\n  <span class=\"synType\">margin</span>:<span class=\"synConstant\">0</span> <span class=\"synConstant\">0</span> <span class=\"synConstant\">20px</span>;\n  <span class=\"synType\">overflow</span>: <span class=\"synType\">hidden</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synSpecial\">.</span>tweets:<span class=\"synPreProc\">hover</span>{\n  height: auto;\n<span class=\"synError\">}</span>\n<span class=\"synSpecial\">.</span>tweets <span class=\"synStatement\">p</span><span class=\"synIdentifier\">{</span>\n  <span class=\"synType\">margin</span>: <span class=\"synConstant\">0</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synSpecial\">.</span>tweets <span class=\"synStatement\">img</span><span class=\"synIdentifier\">{</span>\n  <span class=\"synType\">display</span>: <span class=\"synType\">block</span>;\n  <span class=\"synType\">float</span>: <span class=\"synType\">left</span>;\n  <span class=\"synType\">margin-right</span>: <span class=\"synConstant\">5px</span>;\n<span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">style</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">head</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">body</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>Handlebars.js with Twitter Search API<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">h1</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;container&quot;</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;q&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;reload&quot;</span><span class=\"synIdentifier\">&gt;</span>Search<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;input&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text/x-handlebars-template&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synSpecial\">    </span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">#each </span><span class=\"synIdentifier\">this}}</span>\n<span class=\"synSpecial\">    &lt;div </span><span class=\"synStatement\">class</span><span class=\"synSpecial\">=</span><span class=\"synConstant\">&quot;tweets&quot;</span><span class=\"synSpecial\"> title=</span><span class=\"synConstant\">&quot;@{{user}}'s tweets&quot;</span><span class=\"synSpecial\">&gt;</span>\n<span class=\"synSpecial\">      &lt;img src=</span><span class=\"synConstant\">&quot;{{url}}&quot;</span><span class=\"synSpecial\"> width=</span><span class=\"synConstant\">&quot;42&quot;</span><span class=\"synSpecial\"> height=</span><span class=\"synConstant\">&quot;42&quot;</span><span class=\"synSpecial\"> /&gt;</span>\n<span class=\"synSpecial\">      &lt;p&gt;</span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">text</span><span class=\"synIdentifier\">}}</span><span class=\"synSpecial\">&lt;/p&gt;</span>\n<span class=\"synSpecial\">    &lt;/div&gt;</span>\n<span class=\"synSpecial\">    </span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">/each</span><span class=\"synIdentifier\">}}</span>\n<span class=\"synSpecial\">  </span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;output&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\"> </span><span class=\"synType\">src</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;https://github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span><span class=\"synComment\">&lt;!--</span><span class=\"synSpecial\"> 下のコード </span><span class=\"synComment\">--&gt;</span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">body</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">html</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>Cssはオマケで。</p>\n\n</div>\n<div class=\"section\">\n    <h4>JavaScript(jQuery)</h4>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>(<span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n\n    <span class=\"synIdentifier\">var</span> Twitter = <span class=\"synIdentifier\">{}</span>,\n        source = $(<span class=\"synConstant\">&quot;#input&quot;</span>).html(),\n        template = Handlebars.compile(source);\n\n    Twitter.init = <span class=\"synIdentifier\">function</span>(conf) <span class=\"synIdentifier\">{</span>\n        $.ajax(<span class=\"synIdentifier\">{</span>\n            type: <span class=\"synConstant\">'GET'</span>,\n            url: <span class=\"synConstant\">'http://search.twitter.com/search.json'</span>,\n            dataType: <span class=\"synConstant\">'jsonp'</span>,\n            cache: <span class=\"synConstant\">true</span>,\n            ifModified: <span class=\"synConstant\">true</span>,\n            data: <span class=\"synIdentifier\">{</span>\n                q: conf.query,\n                lang: <span class=\"synConstant\">'ja'</span>,\n                locale: <span class=\"synConstant\">'ja-JP'</span>,\n                result_type: <span class=\"synConstant\">'mixed'</span>,\n                rpp: 100\n            <span class=\"synIdentifier\">}</span>,\n            success: <span class=\"synIdentifier\">function</span>(d) <span class=\"synIdentifier\">{</span>\n                <span class=\"synIdentifier\">var</span> tweets = $.map(d.results, <span class=\"synIdentifier\">function</span>(d) <span class=\"synIdentifier\">{</span>\n                    <span class=\"synStatement\">return</span> <span class=\"synIdentifier\">{</span>\n                        user: d.from_user,\n                        url: d.profile_image_url,\n                        text: d.text\n                    <span class=\"synIdentifier\">}</span>;\n                <span class=\"synIdentifier\">}</span>);\n                $(<span class=\"synConstant\">&quot;#output&quot;</span>).html(template(tweets));\n            <span class=\"synIdentifier\">}</span>\n        <span class=\"synIdentifier\">}</span>);\n\n    <span class=\"synIdentifier\">}</span>;\n\n    $(<span class=\"synConstant\">'#reload'</span>).on(<span class=\"synConstant\">'click'</span>, <span class=\"synIdentifier\">function</span>() <span class=\"synIdentifier\">{</span>\n        $(<span class=\"synConstant\">'#output'</span>).empty();\n        Twitter.init(<span class=\"synIdentifier\">{</span>\n            query: $(<span class=\"synConstant\">'#q'</span>).val()\n        <span class=\"synIdentifier\">}</span>);\n    <span class=\"synIdentifier\">}</span>);\n\n    Twitter.init(<span class=\"synIdentifier\">{</span>\n        query: <span class=\"synConstant\">&quot;Get better&quot;</span>\n    <span class=\"synIdentifier\">}</span>);\n<span class=\"synIdentifier\">}</span>());\n</pre>\n</div>\n</div>\n<div class=\"section\">\n    <h3>説明とか</h3>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink>  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;input&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;text/x-handlebars-template&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synSpecial\">    </span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">#each </span><span class=\"synIdentifier\">this}}</span>\n<span class=\"synSpecial\">    &lt;div </span><span class=\"synStatement\">class</span><span class=\"synSpecial\">=</span><span class=\"synConstant\">&quot;tweets&quot;</span><span class=\"synSpecial\"> title=</span><span class=\"synConstant\">&quot;@{{user}}'s tweets&quot;</span><span class=\"synSpecial\">&gt;</span>\n<span class=\"synSpecial\">      &lt;img src=</span><span class=\"synConstant\">&quot;{{url}}&quot;</span><span class=\"synSpecial\"> width=</span><span class=\"synConstant\">&quot;42&quot;</span><span class=\"synSpecial\"> height=</span><span class=\"synConstant\">&quot;42&quot;</span><span class=\"synSpecial\"> /&gt;</span>\n<span class=\"synSpecial\">      &lt;p&gt;</span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">text</span><span class=\"synIdentifier\">}}</span><span class=\"synSpecial\">&lt;/p&gt;</span>\n<span class=\"synSpecial\">    &lt;/div&gt;</span>\n<span class=\"synSpecial\">    </span><span class=\"synIdentifier\">{{</span><span class=\"synSpecial\">/each</span><span class=\"synIdentifier\">}}</span>\n<span class=\"synSpecial\">  </span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">script</span><span class=\"synIdentifier\">&gt;</span>\n\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\"> </span><span class=\"synType\">id</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;output&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">div</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>そのままですが、idがinputの中がテンプレです。<br />\n{{}}でくくります。<br />\neachとかifとかunlessとか使えます。<br />\n今回はthisになってますが、もちろんプロパティの名称を指定することもできます。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">var</span> source = $(<span class=\"synConstant\">&quot;#input&quot;</span>).html();\n<span class=\"synComment\">// 作ったテンプレの元を取得してー</span>\n<span class=\"synIdentifier\">var</span> template = Handlebars.compile(source);\n<span class=\"synComment\">// それをテンプレとしてコンパイル！</span>\n\n $(<span class=\"synConstant\">&quot;#output&quot;</span>).html(template(tweets));\n<span class=\"synComment\">// 最後にそれを出力！</span>\n</pre><p>とまぁお手軽3ステップですね。</p>\n\n</div>\n</div>"
}
