{
  "title": "Nodeはじめてみた",
  "html": "\n    <blockquote>\n        <p>参考：<a href=\"http://nodefest.jp/2012/\" target=\"_blank\" title=\"東京Node学園祭2012\">東京Node学園祭2012</a></p>\n\n    </blockquote>\n<p>去年はニコ生で見るだけ、でも今年は実際に行ってみたい！ということで、会社の師に連れてってもらうことに。</p><p>で、行くからには触っておきたい！ということで。</p>\n\n<div class=\"seemore\">\n    \n<div class=\"section\">\n    <h3>教科書として</h3>\n    \n    <blockquote>\n        <p>参考：<a href=\"http://www.nodebeginner.org/index-jp.html\" target=\"_blank\" title=\"Nodeビギナーズブック » Node.jsチュートリアル » Node.js 教程\">Nodeビギナーズブック » Node.jsチュートリアル » Node.js 教程</a></p>\n\n    </blockquote>\n<p>こちらを参考に。</p><p>ただインストールは丸投げされてた・・ｗ</p>\n\n</div>\n<div class=\"section\">\n    <h3>nodeのインストール！</h3>\n    <p>mp3格納庫と化しているVPSちゃんの出番です。</p><p>2012年9月23日時点での安定版は、v0.8.9だそうです。<br />\nとはいえパッケージからビルドするやり方にはトラウマがあり、他の手段がないかを探したところ・・。</p>\n\n    <blockquote>\n        <p>参考：<a href=\"https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager\" target=\"_blank\" title=\"Installing Node.js via package manager · joyent/node Wiki · GitHub\">Installing Node.js via package manager · joyent/node Wiki · GitHub</a></p>\n\n    </blockquote>\n<p>Nodejs Package Manager、略してnpmを使えばyumでインストールできるっぽい。<br />\n書かれてる通り、</p>\n<pre class=\"code\" data-unlink>wget http://nodejs.tchol.org/repocfg/el/nodejs-stable-release.noarch.rpm\nyum localinstall --nogpgcheck nodejs-stable-release.noarch.rpm\nyum install nodejs-compat-symlinks npm\nrm nodejs-stable-release.noarch.rpm</pre><p>その結果・・</p>\n<pre class=\"code\" data-unlink>node -v # v0.6.18</pre><p>どうやらこの方法だと、古いのしかインストールできないぽいです。<br />\nとは言え、いつでもキレイに削除できるし、大して最新版との違いもわかってない身としては、<br />\n手軽に試してみる分にはコレでいいかと思うことにします。</p><p>最新版・新しい安定版じゃなきゃやだ！という場合は、ソースから。<br />\nどうにか0.8.9入れれへんかなぁ・・。</p>\n\n</div>\n<div class=\"section\">\n    <h3>コマンドラインでHello World</h3>\n    <pre class=\"code\" data-unlink>console.log(<span class=\"synConstant\">'Hello World'</span>);\n</pre><p>hello.jsとして保存して、</p>\n<pre class=\"code\" data-unlink>node hello.js # Hello World</pre><p>できた！次！</p>\n\n</div>\n<div class=\"section\">\n    <h3>ブラウザからHello World</h3>\n    <pre class=\"code\" data-unlink><span class=\"synIdentifier\">var</span> http = require(<span class=\"synConstant\">&quot;http&quot;</span>);\n\n<span class=\"synIdentifier\">function</span> onRequest(request, response) <span class=\"synIdentifier\">{</span>\n  console.log(<span class=\"synConstant\">&quot;Request received.&quot;</span>);\n  response.writeHead(200, <span class=\"synIdentifier\">{</span><span class=\"synConstant\">&quot;Content-Type&quot;</span>: <span class=\"synConstant\">&quot;text/plain&quot;</span><span class=\"synIdentifier\">}</span>);\n  response.write(<span class=\"synConstant\">&quot;Hello World&quot;</span>);\n  response.end();\n<span class=\"synIdentifier\">}</span>\n\nhttp.createServer(onRequest).listen(8888);\n\nconsole.log(<span class=\"synConstant\">&quot;Server has started.&quot;</span>);\n</pre><p>server.jsとして保存して、サーバーのIP:8888としてブラウザでアクセス。<br />\nポート番号は任意。</p><p>ブラウザでもHello Worldできた！</p><p>今日はここまで。</p>\n\n</div>\n<div class=\"section\">\n    <h3>ハマったところ</h3>\n    \n<div class=\"section\">\n    <h4>iptablesに阻まれるアクセス</h4>\n    <p>というか、期待通りの挙動やけどさ・・。<br />\nポート8888なんて開けてなかったので、何回やっても通らなかった。</p>\n<pre class=\"code\" data-unlink>sudo vi /etc/sysconfig/iptables\n# ポート開けて\nsudo /etc/rc.d/init.d/iptables restart\n# これでOK！</pre>\n</div>\n<div class=\"section\">\n    <h4>httpモジュールいれてない</h4>\n    <p>ブラウザからHello Worldの、server.jsの1行目。</p>\n<pre class=\"code\" data-unlink><span class=\"synIdentifier\">var</span> http = require(<span class=\"synConstant\">&quot;http&quot;</span>);\n<span class=\"synComment\">// httpモジュールを使う宣言</span>\n</pre><p>つまり、それインストールしてないとダメ。<br />\nNode本体だけじゃダメ。</p>\n<pre class=\"code\" data-unlink>npm ls\n# 案の定からっぽだったので・・\n\nnpm install http</pre><p>こうすることで、無事にできるようになりました。</p>\n\n</div>\n<div class=\"section\">\n    <h4>Node起動してない</h4>\n    <p>まさかの凡ミス・・・凡すぎる凹む・・ｗ</p>\n<pre class=\"code\" data-unlink>node server.js</pre><p>ってやってから、アクセスです。<br />\nやってないとつながるはずがありません。</p><p>当たり前や！</p>\n\n</div>\n</div>\n</div>"
}
