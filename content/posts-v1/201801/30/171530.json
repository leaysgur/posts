{
  "title": "postcss-cliで複数のentryを扱いたい",
  "html": "<p>webpackみたく、複数のアプリを1つの設定ファイルでよしなにしてほしい。</p><p>この気持ち・・わかりますか！<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>しかしpostcss-cliは</h3>\n    <p>現時点での最新は`v4.x`。</p><p>実は`v2.x`までは設定ファイルから入力と出力を指定できてたけど、`v3.x`になるときに廃止された。</p><p>なんでなんってIssue立てた覚えがある。</p>\n\n    <blockquote>\n        <p><a href=\"https://github.com/postcss/postcss-cli/issues/93\">`from` field in `postcss.config.js` does not work in v3? &middot; Issue #93 &middot; postcss/postcss-cli &middot; GitHub</a></p>\n\n    </blockquote>\n<p>なので、現時点ではCLI経由の場合、</p>\n<pre class=\"code lang-sh\" data-lang=\"sh\" data-unlink>postcss <span class=\"synStatement\">[</span>input.css<span class=\"synStatement\">]</span> <span class=\"synStatement\">[</span>OPTIONS<span class=\"synStatement\">]</span> <span class=\"synStatement\">[-o|</span>--output output.css<span class=\"synStatement\">]</span> <span class=\"synStatement\">[-w|</span>--watch<span class=\"synStatement\">]</span>\n</pre><p>てな具合に指定するしかやりようがない。でも隣のwebpackが青い・・。</p>\n\n</div>\n<div class=\"section\">\n    <h3>なので適当に書いた</h3>\n    \n    <blockquote>\n        <p><a href=\"https://gist.github.com/leader22/154d5bbb4a0191299aac48345b0f09aa\">Enable multiple entries with postcss-cli. &middot; GitHub</a></p>\n\n    </blockquote>\n<p>これを使えば、webpackのconfigと同じフォーマットでpostcssで同じようにできる。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>module.exports = <span class=\"synIdentifier\">{</span>\n  <span class=\"synComment\">// このwebpack的な記述を追加</span>\n  context: rootPath,\n  entry: <span class=\"synIdentifier\">{</span>\n    index: <span class=\"synConstant\">'./src/index/main.css'</span>,\n    room: <span class=\"synConstant\">'./src/room/main.css'</span>,\n  <span class=\"synIdentifier\">}</span>,\n  output: <span class=\"synIdentifier\">{</span>\n    path: `$<span class=\"synIdentifier\">{</span>rootPath<span class=\"synIdentifier\">}</span>/<span class=\"synStatement\">public</span>`,\n    filename: <span class=\"synConstant\">'[name].bundle.css'</span>,\n  <span class=\"synIdentifier\">}</span>,\n\n  <span class=\"synComment\">// 今まで通り</span>\n  plugins: <span class=\"synIdentifier\">{</span>\n    <span class=\"synConstant\">'postcss-import'</span>: <span class=\"synIdentifier\">{}</span>,\n    <span class=\"synConstant\">'postcss-nested'</span>: <span class=\"synIdentifier\">{}</span>,\n  <span class=\"synIdentifier\">}</span>\n<span class=\"synIdentifier\">}</span>;\n</pre><p>そうすると、</p>\n<pre class=\"code lang-sh\" data-lang=\"sh\" data-unlink>node ./postcss-multiple.js <span class=\"synStatement\">[-w]</span>\n</pre><p>ってできる。</p><p>フラグとか他にも追加すると思う。（開発が進んで、`NODE_ENV=production`なことを考える時にでも。）</p>\n\n</div>\n<div class=\"section\">\n    <h3>需要ないの？</h3>\n    <p>別に時間かけてないから良いんやけど、先人がラッパー作ってるならそれを使いたいので知ってたら教えてください。</p><p>需要あると思うんやけどなー・・。</p>\n\n</div>"
}
