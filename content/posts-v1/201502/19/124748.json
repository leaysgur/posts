{
  "title": "html { touch-action: none; } に潜む罠",
  "html": "\n    <blockquote>\n        <p><a href=\"http://0-9.sakura.ne.jp/pub/html5conf20150125/start.html\" target=\"_blank\" title=\"解決してしまったTap delay問題 #html5j\">解決してしまったTap delay問題 #html5j</a></p>\n\n    </blockquote>\n<p>例えばこの記事を見て、</p>\n<pre class=\"code lang-css\" data-lang=\"css\" data-unlink><span class=\"synStatement\">html</span> <span class=\"synIdentifier\">{</span> touch-action: <span class=\"synType\">none</span>; <span class=\"synIdentifier\">}</span>\n</pre><p>ってそのまんま書いてみちゃってませんか？</p><p>実はこれ罠があるのでちゃんと意味を知っておかないと困ります。<br />\nそう、私のように・・。<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>何が起こるか</h3>\n    <p>Tap delayを消したいがためにコレを書くと、単純に「画面のスクロールすらできなくなる」場合があります。</p><p>再現端末例: <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Xperia\">Xperia</a> Z1 / <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a> <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> 40</p><p>まーた<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>がやらかしたのかと最初は思ったんですけど、まぁ割とハイスペックな端末で、かつ<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>なんですよね。</p>\n\n    <blockquote>\n        <p>まあ<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iPhone5\">iPhone5</a> / <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iOS\">iOS</a> <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a> 40だと起こらないのでまーた<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>か案件には変わりないんですけど・・。</p>\n\n    </blockquote>\n\n</div>\n<div class=\"section\">\n    <h3>touch-actionとは</h3>\n    \n    <blockquote>\n        <p><a href=\"https://dvcs.w3.org/hg/pointerevents/raw-file/tip/pointerEvents.html#the-touch-action-css-property\" target=\"_blank\" title=\"Pointer Events | 9.1 The touch-action CSS property\">Pointer Events | 9.1 The touch-action CSS property</a></p>\n\n    </blockquote>\n<p>さて、そもそもこれはTap delayを消すために存在するプロパティではないので、そこを知らないとハマりますよっていうお話です。<br />\nそしてそもそも冒頭の資料にもあるように、これを指定してTap delayが消えるのは<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IE\">IE</a>系の話です。</p><p>なので、Tap delayも消えない他の環境で指定するとどうなるか、です。<br />\n指定できる値は以下5つ。</p>\n\n<ul>\n<li>auto</li>\n<li>none</li>\n<li>pan-x</li>\n<li>pan-y</li>\n<li>manipulation</li>\n</ul><p>もちろん実装があればですが、それぞれ指定で以下のようになります。</p>\n\n<div class=\"section\">\n    <h4>auto</h4>\n    \n    <blockquote>\n        <p>The user agent may determine any permitted touch behaviors, such as panning and zooming manipulations of the viewport, for touches that begin on the element.</p>\n\n    </blockquote>\n<p>デフォルトの値で、何も指定してないときと同じ。<br />\n画面のスクロールもズームも、なんでもできるよって指定。(もちろんviewportのmetaタグとかで縛ってなければ)</p>\n\n</div>\n<div class=\"section\">\n    <h4>none</h4>\n    \n    <blockquote>\n        <p>Touches that begin on the element must not trigger default touch behaviors.</p>\n\n    </blockquote>\n<p>その名の通り。<br />\n画面さわってもうんともすんとも。<br />\nよって、画面スクロールもできなくなります。</p>\n\n</div>\n<div class=\"section\">\n    <h4>pan-x | pan-y</h4>\n    \n    <blockquote>\n        <p>The user agent may consider touches that begin on the element only for the purposes of horizontally | vertically scrolling the element's nearest ancestor with horizontally | vertically scrollable content.</p>\n\n    </blockquote>\n<p>X方向 | Y方向それぞれのスクロールだけを許可するならコレ。<br />\nこれが地味に賢くて、\"やや斜め上\"みたいなものも、上方向としてちゃんと処理してくれます。</p>\n\n</div>\n<div class=\"section\">\n    <h4>manipulation</h4>\n    \n    <blockquote>\n        <p>The user agent may consider touches that begin on the element only for the purposes of scrolling and continuous zooming. Any additional behaviors supported by auto are out of scope for this specification.</p>\n\n    </blockquote>\n<p>noneと同じだが、スクロールとズームだけは通すようにするならコレ。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>まぎらわしい用語や概念</h3>\n    \n<div class=\"section\">\n    <h4>touch*イベントが発火しないってこと？</h4>\n    <p>これは関係ないです。<br />\ntouch-action: none;な要素に対しても、普通にイベントは発火します。<br />\nスワイプバナーとかも問題なく動作します。</p>\n\n</div>\n<div class=\"section\">\n    <h4>aタグやbuttonは？</h4>\n    <p>動きます。</p>\n\n</div>\n<div class=\"section\">\n    <h4>overflow: scroll</h4>\n    <p>指定によっては動かないです。</p>\n\n</div>\n<div class=\"section\">\n    <h4>panningってなに？</h4>\n    <p>画面をスワイプしたり動かそうとするアレです。<br />\n指を画面に乗っけて、そのまま指を動かしたらそれはもうpanです。<br />\nなので画面をスクロールしようとする動作も含みます。</p>\n\n</div>\n<div class=\"section\">\n    <h4>scrollingとpanningは一緒？</h4>\n    <p>panningした結果、画面がスクロールするので、おそらく一緒。</p>\n\n</div>\n<div class=\"section\">\n    <h4>manipulation 以上 none 以下ってどういう動きがある？</h4>\n    <p>わかりません！(ホールドとか？)<br />\nこれは知ってる人おしえてください。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>というわけで</h3>\n    \n    <blockquote>\n        <p><a href=\"http://caniuse.com/#feat=css-touch-action\" target=\"_blank\" title=\"Can I use... Support tables for HTML5, CSS3, etc\">Can I use... Support tables for HTML5, CSS3, etc</a></p>\n\n    </blockquote>\n<p>モバイルでは実質まだまだ使えねーやつです。</p><p>ただ<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Android\">Android</a>標準ブラウザや<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/iOS\">iOS</a> <a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Safari\">Safari</a>、古い端末で<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>のバージョンが古かったりすると(効かないから)起きないけど、<br />\n新しい端末で最新の<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Chrome\">Chrome</a>とか使ってると、正常に効いてしまって思わぬ罠にかかることがあります。</p><p>ちゃんと確かめないままにnoneを指定してたりすると、なんでもないページでスクロールできなくて、<br />\n「え、こんな品質でリリースするつもり？わろすわろすm9(^Д^)」とかって知らない人に言われるので注意です。</p>\n\n</div>\n<div class=\"section\">\n    <h3>私はこう思う</h3>\n    \n<ul>\n<li>既に出回ってる端末のことを考えると、モバイルでclickイベント使うのは来世までpend</li>\n<li>なのでfastClickに準ずるものはほぼ必須</li>\n<li>ゆえに今さらtouch-actionなんて実装されても使い道がない・・</li>\n<li>どうしても<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/IE\">IE</a>系で指定したいなら、noneじゃなくてmanipulationにしといたほうが無難</li>\n<li>てかいつ使うのコレ</li>\n</ul>\n</div>"
}
