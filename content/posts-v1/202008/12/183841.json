{
  "title": "PreactでもMobXを使いたい",
  "html": "<p>正確には、`mobx-react-lite`を使いたい。<br />\nそんなときにどうすればいいか。</p><p>そしてできることなら`preact/compat`ではなく、素の`preact`でやりたいが・・。</p>\n\n    <blockquote>\n        <p>追記: やりたい気持ちが高まったので、自分でそれ用のライブラリを作りました。<br />\nつ <a href=\"https://github.com/leader22/mobx-preact-super-lite\">https://github.com/leader22/mobx-preact-super-lite</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h3>順当: `preact/compat`を使う</h3>\n    \n<ul>\n<li>`preact`ではなく、同梱されてる`preact/compat`を使う</li>\n<li>バンドラで`react`と`react-dom`から<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9\">エイリアス</a>を貼る</li>\n</ul><p>だいたいのReact向けのライブラリは、これでなんとかなる。</p><p>Rollupを使ってる場合は、`@rollup/plugin-alias`を使う。</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synStatement\">import</span> alias from <span class=\"synConstant\">&quot;@rollup/plugin-alias&quot;</span>;\n\n<span class=\"synComment\">// ...</span>\nplugins: <span class=\"synIdentifier\">[</span>\n  alias(<span class=\"synIdentifier\">{</span>\n    entries: <span class=\"synIdentifier\">{</span>\n      react: <span class=\"synConstant\">&quot;preact/compat&quot;</span>,\n    <span class=\"synIdentifier\">}</span>,\n  <span class=\"synIdentifier\">}</span>),\n<span class=\"synIdentifier\">]</span>,\n<span class=\"synComment\">// ...</span>\n</pre><p>ほかのReact用のライブラリもそのまま使えるし、これでいいといえばいい、が。</p><p>素の`preact`に比べると、サイズが大きくなる。<br />\nなんとかならんだろうか・・。</p>\n\n</div>\n<div class=\"section\">\n    <h3>却下: `mobx-preact`</h3>\n    \n    <blockquote>\n        <p><a href=\"https://github.com/mobxjs/mobx-preact\">GitHub - mobxjs/mobx-preact: MobX bindings for Preact</a></p>\n\n    </blockquote>\n<p>いちおう公式のオーガナイゼーションに存在する<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA\">リポジトリ</a>。<br />\nただし2018年から更新されてない。</p><p>そして`mobx-react-lite`が生まれる前の`mobx-react`の<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\">API</a>しかないので、現世において使う必要はない。</p>\n\n</div>\n<div class=\"section\">\n    <h3>却下: `mobx-preact-lite`</h3>\n    \n    <blockquote>\n        <p><a href=\"https://github.com/philmander/mobx-preact-lite\">GitHub - philmander/mobx-preact-lite: Preact bindings for MobX</a></p>\n\n    </blockquote>\n<p>なんとnpmでこのネームスペースが取られてる！と思ったら、中身はさっきの`mobx-preact`と一緒だった・・・。</p>\n\n</div>\n<div class=\"section\">\n    <h3>却下: `@sgratzl/mobx-preact-lite`</h3>\n    \n    <blockquote>\n        <p><a href=\"https://github.com/sgratzl/mobx-preact-lite\">GitHub - sgratzl/mobx-preact-lite: Wrapper around mobx-react-lite with Preact typings</a></p>\n\n    </blockquote>\n<p>型まわりだけパッチを充ててる・・？</p><p>とにかく、求めていたものではない。</p>\n\n</div>\n<div class=\"section\">\n    <h3>まとめ</h3>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9\">エイリアス</a>なし`preact`で、`mobx-react-lite`相当の機能を使うためのパッケージは、現時点でこの世には存在しない。</p><p>ゆえに、`preact/compat`を使って<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9\">エイリアス</a>を貼るしかない。</p>\n\n    <blockquote>\n        <p>こうなると、もはやMobXではないナニカを採用するという手もあるなと最近は思う・・。<br />\nMobXも地味にバンドルサイズが大きいからな〜でもしっくりくるライブラリないしな〜。</p>\n\n    </blockquote>\n<p>これこそ、無いものは作れの精神なのか・・。</p>\n\n<div class=\"section\">\n    <h4>しれっと`preact`に<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9\">エイリアス</a>を向けるとどうなるか</h4>\n    <p>`import { useState } from \"react\"`が解決できなくて落ちる。</p><p>PreactのHooksは、`preact/hooks`にあるので、当然の結果であった・・。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>作った</h3>\n    <p>というわけで無いものは作れの精神で作りました。</p>\n\n    <blockquote>\n        <p><a href=\"https://github.com/leader22/mobx-preact-super-lite\">GitHub - leader22/mobx-preact-super-lite: Super lightweight Preact bindings for MobX based on Preact 10.x+ and Hooks</a></p>\n\n    </blockquote>\n<p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/API\">API</a>は`mobx-react-lite`と一緒ですが、`memo()`と`forwardRef()`に依存してる`observer()`のHOCだけがないです。</p>\n\n</div>"
}
