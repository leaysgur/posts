{
  "title": "NetlifyのFormsについて",
  "html": "\n    <blockquote>\n        <p><a href=\"https://docs.netlify.com/forms/setup/#html-forms\">Forms setup | Netlify Docs</a></p>\n\n    </blockquote>\n<p>個人的に忘れないようにメモ。<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%E6%A1%BC%A5%B9%A5%B1%A1%BC%A5%B9\">ユースケース</a>たち</h3>\n    <p>だいたいこの2つなはず。</p>\n\n<ul>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0\">ホスティング</a>してるHTMLに直接`form`要素を置くパターン</li>\n<li>ReactとかからJSで描画するパターン</li>\n</ul><p>前者はほんとに簡単で、`data-netlify=\"true\"`をつけた`form`を用意するだけ。</p><p>後者ももちろん対応されてるけど、ひと手間が必要だった。</p>\n\n</div>\n<div class=\"section\">\n    <h3><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/JavaScript\">JavaScript</a>でフォームを作る</h3>\n    \n    <blockquote>\n        <p><a href=\"https://www.netlify.com/blog/2017/07/20/how-to-integrate-netlifys-form-handling-in-a-react-app/\">How to Integrate Netlify&rsquo;s Form Handling in a React App | Netlify</a></p>\n\n    </blockquote>\n<p>このパターンでやるべきステップは2段階ある。</p>\n\n<ul>\n<li>有効化</li>\n<li>設置</li>\n</ul><p>この2つ。</p>\n\n<div class=\"section\">\n    <h4>有効化</h4>\n    <p>Netlifyの<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0\">ホスティング</a>の中に、ダミーのフォームだけを定義したHTMLを置く。</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;feedback&quot;</span><span class=\"synIdentifier\"> netlify </span><span class=\"synType\">hidden</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;hidden&quot;</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;ua&quot;</span><span class=\"synIdentifier\"> /&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">textarea</span><span class=\"synIdentifier\"> </span><span class=\"synType\">name</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;message&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">textarea</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">form</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>こういうやつ。</p><p>描画目的ではないので`hidden`属性をつけてあればよく、中身も送信したいフォームの中身だけでよい。</p><p>フォーマットはHTMLではあるものの、いわゆる<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE\">スキーマ</a>みたいなイメージ。<br />\nここで定義してないフィールドは送信しても無視される。</p><p>それぞれの`name`属性が設置するときにも必要になるので注意。</p><p>一度でもこのファイルを使ったビルドが完了したら、このHTMLは消してしまっても問題ない模様。<br />\nただフォームのフィールドを変更したい場合は、また改めて必要になる・・・。</p><p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/GUI\">GUI</a>から設定できるようにしてほしい・・。</p>\n\n</div>\n<div class=\"section\">\n    <h4>設置</h4>\n    <p>フォームを描画するのはいつものとおりに。</p>\n<pre class=\"code lang-typescript\" data-lang=\"typescript\" data-unlink><span class=\"synStatement\">const</span> FeedbackForm <span class=\"synStatement\">=</span> <span class=\"synStatement\">()</span> <span class=\"synStatement\">=&gt;</span> <span class=\"synStatement\">(</span>\n  <span class=\"synStatement\">&lt;</span>form name<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;feedback&quot;</span> method<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;POST&quot;</span><span class=\"synStatement\">&gt;</span>\n    <span class=\"synStatement\">&lt;</span>input <span class=\"synStatement\">type=</span><span class=\"synConstant\">&quot;hidden&quot;</span> name<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;form-name&quot;</span> value<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;feedback&quot;</span> /<span class=\"synStatement\">&gt;</span>\n    <span class=\"synStatement\">&lt;</span>input <span class=\"synStatement\">type=</span><span class=\"synConstant\">&quot;hidden&quot;</span> name<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;ua&quot;</span> value<span class=\"synStatement\">=</span><span class=\"synIdentifier\">{</span><span class=\"synConstant\">navigator</span>.userAgent<span class=\"synIdentifier\">}</span> /<span class=\"synStatement\">&gt;</span>\n    <span class=\"synStatement\">&lt;</span>label<span class=\"synStatement\">&gt;</span>\n      Message: <span class=\"synStatement\">&lt;</span>textarea name<span class=\"synStatement\">=</span><span class=\"synConstant\">&quot;message&quot;</span><span class=\"synStatement\">&gt;&lt;</span>/textarea<span class=\"synStatement\">&gt;</span>\n    <span class=\"synStatement\">&lt;</span>/label<span class=\"synStatement\">&gt;</span>\n    <span class=\"synStatement\">&lt;</span>button <span class=\"synStatement\">type=</span><span class=\"synConstant\">&quot;submit&quot;</span><span class=\"synStatement\">&gt;</span>Send<span class=\"synStatement\">&lt;</span>/button<span class=\"synStatement\">&gt;</span>\n  <span class=\"synStatement\">&lt;</span>/form<span class=\"synStatement\">&gt;</span>\n<span class=\"synStatement\">);</span>\n</pre><p>さっき置いたダミーのフォームと同じ`name`を使う。</p><p>`form-name`ってやつが特別に必要で、`<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/value\">value</a>`はこのフォームの`name`にする。</p><p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/Ajax\">Ajax</a>で送信する場合は、同じ内容の`FormData`を作って`/`に向けてPOSTすればいいだけ。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>個人的なFAQ</h3>\n    \n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0\">ホスティング</a>は違うところで、フォームだけNetlify</h4>\n    <p>できない。</p><p>フォームの<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%C1%F7%BF%AE%C0%E8\">送信先</a>のURLが払い出されるわけではないし、CORSの設定でブロックされる。</p>\n\n</div>\n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/localhost\">localhost</a>で<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0\">デバッグ</a></h4>\n    <p>できない。</p><p>プレビュービルドの機能とか使って確認するしかなさそう。</p>\n\n</div>\n<div class=\"section\">\n    <h4>有効化したフォームの削除</h4>\n    <p>できない。</p><p>サポートフォーラムで依頼すれば消してくれる・・！</p>\n\n    <blockquote>\n        <p><a href=\"https://community.netlify.com/t/how-to-delete-a-form-from-the-netlify-dashboard/1182/124\">How to delete a form from the Netlify dashboard? - Support - Netlify Community</a></p>\n\n    </blockquote>\n\n</div>\n</div>"
}
