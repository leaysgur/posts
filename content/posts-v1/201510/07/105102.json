{
  "title": "5分でわかった気になるWeb Notifications API",
  "html": "\n    <blockquote>\n        <p><a href=\"http://www.w3.org/TR/notifications/\">Web Notifications</a></p>\n\n    </blockquote>\n<p>これを！5分で！<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>許可を得る</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink>Notification\n  .requestPermission()\n  .then(<span class=\"synIdentifier\">function</span>(<span class=\"synStatement\">status</span>) <span class=\"synIdentifier\">{</span>\n    <span class=\"synStatement\">if</span> (Notification.permission !== <span class=\"synStatement\">status</span>) <span class=\"synIdentifier\">{</span>\n      Notification.permission = <span class=\"synStatement\">status</span>;\n    <span class=\"synIdentifier\">}</span>\n  <span class=\"synIdentifier\">}</span>);\n</pre><p>statusは、</p>\n\n<ul>\n<li>granted: 許可したとき</li>\n<li>denied:  ブロックしたとき</li>\n<li>default: はじめてのとき(≒ denied)</li>\n</ul><p>これで「許可する」を選んでもらえれば、通知ができるように。</p>\n\n</div>\n<div class=\"section\">\n    <h3>表示する</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">var</span> ntf = <span class=\"synStatement\">new</span> Notification(<span class=\"synConstant\">'やっほー'</span>);\n\n<span class=\"synComment\">// 消すのは手動</span>\nntf.close();\n</pre><p>自動で消したいならsetTimeoutです。<br />\nSafariだと自動的に閉じたりするらしい。(未確認)</p>\n\n<div class=\"section\">\n    <h4>表示オプション</h4>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">var</span> options = <span class=\"synIdentifier\">{</span>\n  tag:  <span class=\"synConstant\">'group'</span>,  <span class=\"synComment\">// グループ化してまとめる</span>\n  body: <span class=\"synConstant\">'ほげ'</span>,   <span class=\"synComment\">// タイトルの下に出るテキスト</span>\n  icon: <span class=\"synConstant\">'ntf.png'</span> <span class=\"synComment\">// 通知のアイコン画像</span>\n  <span class=\"synComment\">// ほかにもいろいろ</span>\n<span class=\"synIdentifier\">}</span>;\n<span class=\"synIdentifier\">var</span> ntf = <span class=\"synStatement\">new</span> Notification(<span class=\"synConstant\">'やっほー'</span>, options);\n</pre>\n</div>\n</div>\n<div class=\"section\">\n    <h3>イベント</h3>\n    <pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synIdentifier\">var</span> ntf = <span class=\"synStatement\">new</span> Notification(<span class=\"synConstant\">'やっほー'</span>);\n\nntf.addEventListener(<span class=\"synConstant\">'click'</span>, <span class=\"synIdentifier\">function</span>(ev) <span class=\"synIdentifier\">{</span>\n  console.log(<span class=\"synConstant\">'click'</span>);\n<span class=\"synIdentifier\">}</span>, <span class=\"synConstant\">false</span>);\n</pre><p>イベントはこの2つ。</p>\n\n<ul>\n<li>onclick</li>\n<li>onerror</li>\n</ul><p>onclose / onshowはdepricatedらしい。</p>\n\n</div>\n<div class=\"section\">\n    <h3>対応状況は</h3>\n    \n    <blockquote>\n        <p><a href=\"http://caniuse.com/#feat=notifications\">Can I use... Support tables for HTML5, CSS3, etc</a></p>\n\n    </blockquote>\n<p>お察し。</p><p>以上。</p>\n\n</div>"
}
