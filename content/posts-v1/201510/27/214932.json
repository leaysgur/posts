{
  "title": "#ウデマエアーカイブ をVue.js@1.0.0にアップデート！",
  "html": "<p>しました。<br />\n個人のサービスだと思い切ってやっちゃえるので良いですね。</p><p>そんなに複雑な使い方してないので参考になるかは謎ですが、手順やら何やらメモっときます。<br />\n<br />\n</p>\n\n<div class=\"section\">\n    <h3>まず読む</h3>\n    \n    <blockquote>\n        <p><a href=\"https://github.com/vuejs/vue/releases/tag/1.0.0\">Release 1.0.0 Evangelion &middot; vuejs/vue &middot; GitHub</a></p>\n\n    </blockquote>\n\n<ul>\n<li>まずはNotable Changesを把握</li>\n<li>できればドキュメント再読</li>\n<li>`1.0.0-migration`ってバージョンなら、v0.12.16と互換しつつv1.0.0の機能も使えるのでまずコレで試すのおすすめ</li>\n<li>warningsを1つずつ解消する</li>\n</ul><p>って書いてますがまぁいけるやろーってことで、</p>\n\n<ul>\n<li>Notable Changes読む</li>\n<li>いきなりv1.0.0つっこむ</li>\n<li>変更点なおす + warnings消す</li>\n</ul><p>って手順でやりました。</p>\n\n</div>\n<div class=\"section\">\n    <h3>変わったところ</h3>\n    <p>きっとそのうちどこかの誰かさんが詳細な記事を書いてくださると期待して、ここでは実際になおしたとこだけ書きます。</p><p>こまめにコミット分けてたので、なんとなく察する感じでよければ作業ブランチの様子など。</p>\n\n    <blockquote>\n        <p><a href=\"https://github.com/leader22/ika-rchive/pull/35\">Feature/update vue by leader22 &middot; Pull Request #35 &middot; leader22/ika-rchive &middot; GitHub</a></p>\n\n    </blockquote>\n\n<div class=\"section\">\n    <h4>v-repeat -> v-for</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-repeat=</span><span class=\"synConstant\">&quot;items&quot;</span><span class=\"synIdentifier\">&gt;</span>{{this.id}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-repeat=</span><span class=\"synConstant\">&quot;item in items&quot;</span><span class=\"synIdentifier\">&gt;</span>{{item.id}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-repeat=</span><span class=\"synConstant\">&quot;obj&quot;</span><span class=\"synIdentifier\">&gt;</span>{{$key}} - {{$value}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-</span><span class=\"synType\">for</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;item in items&quot;</span><span class=\"synIdentifier\">&gt;</span>{{item.id}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-</span><span class=\"synType\">for</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;value in obj&quot;</span><span class=\"synIdentifier\">&gt;</span>{{$key}} - {{value}}<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>ようは、</p>\n\n<ul>\n<li>foo in barって書き方に統一された</li>\n<li>オブジェクトを回すと、$keyってのがとれる</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>v-on=\"click\"</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> v-on=</span><span class=\"synConstant\">&quot;click: onClickOk&quot;</span><span class=\"synIdentifier\">&gt;</span>わかった！<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> v-on:click=</span><span class=\"synConstant\">&quot;onClickOk&quot;</span><span class=\"synIdentifier\">&gt;</span>わかった！<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\"> @click=</span><span class=\"synConstant\">&quot;onClickOk&quot;</span><span class=\"synIdentifier\">&gt;</span>わかった！<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">button</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>@で済むとかもはや楽ちん過ぎですねー。</p>\n\n</div>\n<div class=\"section\">\n    <h4>v-bind</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-</span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;{ 'is-active': activePane === 'record' }&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\"> v-bind:</span><span class=\"synType\">class</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;{ 'is-active': activePane === 'record' }&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">li</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>v-classだけじゃなくて、v-attrも変わってます。</p>\n<pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\"> v-attr=</span><span class=\"synConstant\">&quot;width: canvasW, height: canvasH&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\"> v-bind:</span><span class=\"synType\">width</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;canvasW&quot;</span><span class=\"synIdentifier\"> v-bind:</span><span class=\"synType\">height</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;canvasH&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\"> :</span><span class=\"synType\">width</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;canvasW&quot;</span><span class=\"synIdentifier\"> :</span><span class=\"synType\">height</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;canvasH&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\">&gt;</span>\n\n\n<span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;checkbox&quot;</span><span class=\"synIdentifier\"> v-attr=</span><span class=\"synConstant\">&quot;disabled: isDisconnected&quot;</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;checkbox&quot;</span><span class=\"synIdentifier\"> v-bind:</span><span class=\"synType\">disabled</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;isDisconnected&quot;</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">input</span><span class=\"synIdentifier\"> </span><span class=\"synType\">type</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;checkbox&quot;</span><span class=\"synIdentifier\"> :</span><span class=\"synType\">disabled</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;isDisconnected&quot;</span><span class=\"synIdentifier\">&gt;</span>\n\n\n<span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\"> v-attr=</span><span class=\"synConstant\">&quot;href: tweetUrl&quot;</span><span class=\"synIdentifier\">&gt;</span><span class=\"synUnderlined\">リンク</span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\"> v-bind:</span><span class=\"synType\">href</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;tweetUrl&quot;</span><span class=\"synIdentifier\">&gt;</span><span class=\"synUnderlined\">リンク</span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\"> :</span><span class=\"synType\">href</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;tweetUrl&quot;</span><span class=\"synIdentifier\">&gt;</span><span class=\"synUnderlined\">リンク</span><span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">a</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>属性値に対しては、ここまで略せます。<br />\nなんか略せすぎてタイポとかで事故りそう・・。</p><p>v-styleも廃止だそうですよ。</p>\n\n</div>\n<div class=\"section\">\n    <h4>select要素のoptionsが廃止</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">select</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;stage&quot;</span><span class=\"synIdentifier\"> options=</span><span class=\"synConstant\">&quot;stages&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">select</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">select</span><span class=\"synIdentifier\"> v-model=</span><span class=\"synConstant\">&quot;stage&quot;</span><span class=\"synIdentifier\">&gt;</span>\n  <span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">option</span><span class=\"synIdentifier\"> v-</span><span class=\"synType\">for</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;option in stages&quot;</span><span class=\"synIdentifier\"> :</span><span class=\"synType\">value</span><span class=\"synIdentifier\">=</span><span class=\"synConstant\">&quot;option.value&quot;</span><span class=\"synIdentifier\">&gt;</span>\n    {{option.text}}\n  <span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">option</span><span class=\"synIdentifier\">&gt;</span>\n<span class=\"synIdentifier\">&lt;/</span><span class=\"synStatement\">select</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>ちょっとめんどくさいけど順当なかんじ。</p>\n\n<ul>\n<li>地道にoption要素をv-forで回すように</li>\n<li>{ value: 'VAL', text: 'TEXT' } ってデータ構造はそのまま</li>\n</ul>\n</div>\n<div class=\"section\">\n    <h4>v-el</h4>\n    <pre class=\"code lang-html\" data-lang=\"html\" data-unlink><span class=\"synComment\">&lt;!-- いままで --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\"> v-el=</span><span class=\"synConstant\">&quot;graph&quot;</span><span class=\"synIdentifier\">&gt;&lt;/</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\">&gt;</span>\n\n<span class=\"synComment\">&lt;!-- これから --&gt;</span>\n<span class=\"synIdentifier\">&lt;</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\"> v-el:graph&gt;&lt;/</span><span class=\"synStatement\">canvas</span><span class=\"synIdentifier\">&gt;</span>\n</pre><p>そしてjsでのアクセス方法も変わって、</p>\n<pre class=\"code lang-javascript\" data-lang=\"javascript\" data-unlink><span class=\"synComment\">// いままで</span>\n<span class=\"synIdentifier\">var</span> $canvas = <span class=\"synIdentifier\">this</span>.$$.graph.getContext(<span class=\"synConstant\">'2d'</span>);\n\n<span class=\"synComment\">// これから</span>\n<span class=\"synIdentifier\">var</span> $canvas = <span class=\"synIdentifier\">this</span>.$els.graph.getContext(<span class=\"synConstant\">'2d'</span>);\n</pre><p>`v-ref`も変わってます。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>あっさり移行できた</h3>\n    <p>だいたい1時間ちょいくらいでした。<br />\nなんかバグってたりしたらこっそりなおして追記します。</p><p>リリースしてからの累計利用イカ数が10,000匹を超えた本サービスですが、引き続きイカよろしくーー。</p><p><iframe src=\"https://hatenablog-parts.com/embed?url=https%3A%2F%2Fleader22.github.io%2Fika-rchive%2F\" title=\"ウデマエアーカイブ\" class=\"embed-card embed-webcard\" scrolling=\"no\" frameborder=\"0\" style=\"display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;\"></iframe><cite class=\"hatena-citation\"><a href=\"https://leader22.github.io/ika-rchive/\">leader22.github.io</a></cite></p>\n\n</div>"
}
