{
  "title": "WordPressをサブドメインのマルチサイトにする際のサーバー選びのメモ",
  "html": "<p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/WordPress\">WordPress</a>をマルチサイト化するためには、色々設定が必要で。</p>\n\n<ul>\n<li>サブディレクトリ型</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%C9%A5%E1%A5%A4%A5%F3\">サブドメイン</a>型</li>\n</ul><p>と2通りのやり方があるのですが、おそらくマルチサイト化するなら<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%C9%A5%E1%A5%A4%A5%F3\">サブドメイン</a>でやらないと、あんまり意味がないような？とも思います。<br />\nそんな<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%C9%A5%E1%A5%A4%A5%F3\">サブドメイン</a>型でマルチサイト化するためには、いくつか越えないといけない壁があります。</p>\n\n<div class=\"seemore\">\n    \n<ol>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/WordPress\">WordPress</a>自体をマルチサイト用の設定にする。</li>\n<li><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>をマルチサイト用に設定する。</li>\n</ol>\n<div class=\"section\">\n    <h3><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/WordPress\">WordPress</a>側の設定</h3>\n    <p>こっちは調べれば山のように出てくるので割愛。</p>\n\n</div>\n<div class=\"section\">\n    <h3><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>の設定</h3>\n    <p><b>注：この<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>の設定は、借りてるサーバーによって、どうやってもできないモノもあります。<br />\n　　その場合は、諦めるしかないです・・。</b></p>\n\n<div class=\"section\">\n    <h4>いまさらな<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>(かなり都合のいい解釈</h4>\n    <p>基本的にインターネットに存在するサーバーにはIPが設定されてます。<br />\nただそんな数字の羅列は覚えにくいので、ドメインという名前が付いてます。<br />\nそんなドメイン名と、元のIPを紐付けるもの、それが<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>です。</p><p>で、リクエストされたドメインに対して、サーバーのどのディレクトリを表示するか、っていう設定もします。<br />\n独自ドメインを取得して設定するときに、そういう設定をしてるはずです。</p><p>ドメインを呼べば、どこのIPのサーバーかを<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>が教えてくれる。<br />\nどこのサーバーかがわかったら、どのディレクトリかはわかるようになってる。</p><p>そんな仕組みなはず。</p>\n\n</div>\n<div class=\"section\">\n    <h4>マルチサイトとは</h4>\n    <p>マルチサイトというものは、「単一の<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/WordPress\">WordPress</a>(単一のディレクトリ)で、複数のサイトを作ること」です。<br />\n本来複数のサイト＝複数のディレクトリであれば、複数のURL・ドメインになってるもんです。</p><p>というわけで、どうにか複数のドメインを、単一のディレクトリに向ける必要があります。</p>\n\n</div>\n<div class=\"section\">\n    <h4><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/DNS\">DNS</a>レコードの設定</h4>\n    <p>マルチサイト化に際して、設定する必要があるのは恐らく以下のどっちか。<br />\nIPとドメインを紐付けるAレコード<br />\nドメインに対してドメインを紐付けるCNAMEレコード</p>\n\n    <pre class=\"code\" data-unlink>example.com\nsub.example.com\nsupersub.example.com</pre>\n<p>っていう3サイトを、example.comを中心にマルチサイト化するためには、</p><p>Aレコードを使って、</p>\n\n    <pre class=\"code\" data-unlink>example.com IN A 192.168.1.1(example.comのIPとして)\nsub.example.com IN A 192.168.1.1(example.comのIPとして)\nsupersub.example.com IN A 192.168.1.1(example.comのIPとして)</pre>\n<p>もしくは、CNAMEレコードで、</p>\n\n    <pre class=\"code\" data-unlink>example.com IN A 192.168.1.1(example.comのIPとして)\nsub.example.com IN CNAME example.com\nsupersub.example.com IN CNAME example.com</pre>\n<p>ワイルドカードはそのドメインに対するアクセスを、一箇所に投げつけるもの。<br />\nそんな便利なものが使えるのであれば、それで一括であてちゃってもOK。</p>\n\n</div>\n</div>\n<div class=\"section\">\n    <h3>メモとしては</h3>\n    <p><a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/WordPress\">WordPress</a>のマルチサイトを<a class=\"keyword\" href=\"http://d.hatena.ne.jp/keyword/%A5%B5%A5%D6%A5%C9%A5%E1%A5%A4%A5%F3\">サブドメイン</a>で作りたい場合は、<br />\n<b>IPが固定で振り出されていることが必須。</b><br />\n以上のようにドメインの設定をする必要があるからです。</p>\n\n<div class=\"section\">\n    <h4>できないサーバーは</h4>\n    \n<ul>\n<li>ハッスルサーバー</li>\n<li>お名前.comの共用サーバー SD</li>\n</ul><p>二重で契約した上にどっちもマルチサイトできひんくて、無駄に3ヶ月分くらいの利用料をただ払いするやつが私です。<br />\nAレコードでIPが紐づいてない状態やと、CNAMEだけ設定しようとしてもできんかったー。</p>\n\n</div>\n</div>\n</div>"
}
