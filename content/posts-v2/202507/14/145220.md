---
title: Astroã§å‹•çš„ãªãƒ‘ã‚¹ã®ç”»åƒã‚’æ‰±ã†
---

ã“ã†ã„ã†çŠ¶æ³ãŒãŸã¾ã«ã‚ã‚‹ã¯ãšã€‚

- `.astro`ã§ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’ã™ã‚‹
- ãã—ã¦å„ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚µãƒ ãƒã‚¤ãƒ«ã‚’å‡ºã™

ãã‚“ãªæ™‚ã«ã©ã†ã™ã‚‹ã‹ã€‚

## MDXã®å ´åˆ

ãã®å„ã‚¢ã‚¤ãƒ†ãƒ ãŒContent collectionsã«ãªã£ã¦ã¦ã€ã‚½ãƒ¼ã‚¹ãŒMDXã®å ´åˆã€‚

ã“ã®å ´åˆã¯ã€MDXã‹ã‚‰ã‚µãƒ ãƒã‚’exportã™ã‚Œã°ã‚ˆãã¦ã€ç‰¹ã«å›°ã‚‰ãªã„ã€‚

> Images | Docs
> https://docs.astro.build/en/guides/images/#images-in-content-collections

`schema`ã§ã‚‚ç¸›ã‚Œã‚‹ã€‚

```ts
const blogCollection = defineCollection({
  schema: ({ image }) =>
    z.object({
      title: z.string(),
      cover: image(), // ğŸ‘€
      coverAlt: z.string(),
    }),
});
```

## ãã†ã˜ã‚ƒãªã„å ´åˆã¯ï¼Ÿ

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã¦ãã†æ€ã£ã¦ã—ã¾ã£ãŸã€‚

Content collectionsã§ã‚‚ã€ã‚«ã‚¹ã‚¿ãƒ loaderã‚’ä½¿ã£ã¦ã‚‹ã¨ã‹ã€CSVã‚„JSONã‹ã‚‰ç”Ÿæˆã—ã¦ã‚‹ã¨ã‹ã®å ´åˆã«ã€ã©ã†ã™ã‚Œã°ãƒ»ãƒ»ãƒ»ï¼Ÿ

ã¾ãšæœ€åˆã«æ€ã„ã¤ãã®ã¯ã€`/public`ã«ç½®ãã‚„ã‚Šæ–¹ã€‚
ã§ã‚‚ã“ã‚Œã¯é¿ã‘ãŸã„ã€‚ãƒ‘ã‚¹ã®æ‰±ã„ã‚‚å›°ã‚‹ã—ã€ãªã«ã‚ˆã‚Šã‚«ã‚ªã‚¹ã«ãªã‚‹ã®ãŒç›®ã«è¦‹ãˆã¦ã‚‹ã‹ã‚‰ã€‚

ã¨ãªã‚‹ã¨ã€ãªã‚“ã¨ã‹ã—ã¦Astro or Viteã«ç”»åƒã‚’èªè­˜ã•ã›ã¦ã€ãã®ãƒ‘ã‚¹ã‚’ç®¡ç†ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ã¨ã„ã†ã“ã¨ã«æ‚©ã‚“ã§ãŸã‚‰ã€ã„ã¡ãŠã†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãƒ¬ã‚·ãƒ”ã¨ã—ã¦æ›¸ã„ã¦ã‚ã£ãŸã€‚

> Dynamically import images | Docs
> https://docs.astro.build/en/recipes/dynamically-importing-images/

## ã“ã†ã™ã‚‹

```ts
export async function getItemThumbnailSrcById(id: string) {
  const path = `/path/to/data/${id}/thumb.png`;
  const img = import.meta.glob<{ default: ImageMetadata }>(
    // NOTE: This must be a static string literal path
    "/path/to/data/*/thumb.png",
  )[path];
  if (!img) throw new Error(`Failed to load ${path}`);
  return img();
}
```

`import.meta.glob()`ã§Viteã«èªè­˜ã•ã›ã¦ã€ç”»åƒã®ãƒ‘ã‚¹ã‚’å–å¾—ã™ã‚‹é–¢æ•°ã«ã—ã¦ãŠãã€‚

ã‚ã¨ã¯ã“ã‚Œã‚’`.astro`ã§ä½¿ã†ã ã‘ã€‚

```astro
<Image src={getItemThumbnailSrcById(item.id)} alt="" />
```

`ImageMetadata`ã¨ã„ã†å‹ã«ã‚ˆã‚Šã€ã“ã®é–¢æ•°ã®è¿”ã‚Šå€¤ã¯`Promise<{ default: ImageMetadata }>`ã«ãªã‚‹ã€‚

`astro:assets`ã®`Image`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®`src`ã¯ã€`ImageMetadata`ã ã‘ã§ãªãã€`Promise<{ default: ImageMetadata }>`ã‚‚å—ã‘ä»˜ã‘ã¦ãã‚Œã‚‹ã®ã§ã€ãƒªã‚¹ãƒˆã§ã‚‚æ°—ã«ã›ãšä½¿ãˆã‚‹ã¨ã„ã†ã‚ã‘ã€‚

ãŸã ã®`img`ã®å ´åˆã¯ã“ã†ã¯ã„ã‹ãªã„ã€‚ã©ã†ã—ã¦ã‚‚`img`ã‚’ä½¿ã†å ´åˆã¯ã€`import.meta.glob()`ã§`{ eager: true, import: "default" }`ãªã©ã‚’é§†ä½¿ã—ã¦é ‘å¼µã‚‹ã—ã‹ãªã„ã€‚

> Imports reference | Docs
> https://docs.astro.build/en/guides/imports/#importmetaglob

> Features | Vite
> https://vite.dev/guide/features.html#glob-import

Content collectionsã§ç”»åƒã§ã‚‚PDFã§ã‚‚ãªã‚“ã§ã‚‚ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰ã„ã„ã®ã«ã€‚

